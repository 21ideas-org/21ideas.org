<!doctype html><html lang=ru-RU dir=ltr><head><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel=stylesheet><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Как Биткоин защищен с помощью энергии? И что такое нонс? На эти и другие вопросы вы найдете ответы в этой статье."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=lightning content="21ideas@getalby.com"><meta property="og:title" content="SHA256 и майнинг в сети Биткоин"><meta property="og:description" content="Как Биткоин защищен с помощью энергии? И что такое нонс? На эти и другие вопросы вы найдете ответы в этой статье."><meta property="og:type" content="article"><meta property="og:url" content="https://21ideas.org/mining-walkthrough/"><meta property="og:image" content="https://21ideas.org/img/mining/01.webp"><title>SHA256 и майнинг в сети Биткоин | 21ideas</title><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon media="(prefers-color-scheme: dark)" sizes=180x180 href=/apple-touch-icon-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=32x32 href=/favicon-32x32-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=16x16 href=/favicon-16x16-dark.png><link rel=alternate hreflang=en href=https://21ideas.org/en/mining-walkthrough/ title="SHA256 and Bitcoin Mining Walkthrough"><link rel=stylesheet href=/book.min.44d288673620af09aba4fb7b29ef4c1d1f9c0258f725bd228507764ec1740f0a.css integrity="sha256-RNKIZzYgrwmrpPt7Ke9MHR+cAlj3Jb0ihQd2TsF0Dwo=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/ru.search.min.9541c5d6fa097eb1459b13c5b4fe5a5d815ad40e1c8fa97d4820807f3c6aaadf.js integrity="sha256-lUHF1voJfrFFmxPFtP5aXYFa1A4cj6l9SCCAfzxqqt8=" crossorigin=anonymous></script>
<script type=text/javascript src=https://unpkg.com/zapthreads@0.5.2/dist/zapthreads.iife.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><picture><source srcset=/svg/logo_white.svg media="(prefers-color-scheme: dark)"><img src=/svg/logo_black.svg alt=Logo></picture>
<span>21ideas</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Поиск aria-label=Поиск maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Русский</a></label><ul><li><a href=https://21ideas.org/en/mining-walkthrough/>English</a></li></ul></li></ul><ul><li><input type=checkbox id=section-512cd8dd047d9194f8b56568c3c961b4 class=toggle>
<label for=section-512cd8dd047d9194f8b56568c3c961b4 class="flex justify-between"><a href=/start/>Старт</a></label><ul><li><a href=/glossary/>Глоссарий</a></li><li><a href=/start/start/>Что такое Биткоин?</a></li><li><a href=/start/guide/>Используем биткоин</a></li><li><a href=/course/>Биткоин от А до Я</a></li><li><a href=/bitcoin-myths/>Разрушаем мифы о Биткоине</a></li><li><a href=/shitcoin-casino/>Не играйте в щиткоин-казино</a></li></ul></li><li><input type=checkbox id=section-4f53cbff6ac5b0f9cfca5f1f9f3b991c class=toggle checked>
<label for=section-4f53cbff6ac5b0f9cfca5f1f9f3b991c class="flex justify-between"><a href=/theory/>Теория</a></label><ul><li><input type=checkbox id=section-c4ddad175f26bb1d35909363eff62296 class=toggle>
<label for=section-c4ddad175f26bb1d35909363eff62296 class="flex justify-between"><a href=/economics/>Экономика</a></label><ul><li><input type=checkbox id=section-182005e73bd80d066a67724ac5ed0bad class=toggle>
<label for=section-182005e73bd80d066a67724ac5ed0bad class="flex justify-between"><a href=/pzv/>Постепенно, затем внезапно</a></label><ul><li><a href=/pzv/postepenno-zatem-vnezapno/>Введение</a></li><li><a href=/pzv/bitkoin-nelzya-skopirovat/>Биткоин нельзя скопировать</a></li><li><a href=/pzv/bitkoin-ne-slishkom-volatilen/>Биткоин не слишком волатилен</a></li><li><a href=/pzv/bitkoin-ne-tratit-energiyu-zrya/>Биткоин не тратит энергию зря</a></li><li><a href=/pzv/bitkoin-ne-slishkom-medlennyj/>Биткоин не слишком медленный</a></li><li><a href=/pzv/bitkoin-eto-ispravit/>Биткоин это исправит</a></li><li><a href=/pzv/bitkoin-ne-blokchejn/>Биткоин, не блокчейн</a></li><li><a href=/pzv/bitkoin-nichem-ne-podkreplen/>Биткоин ничем не подкреплен?</a></li><li><a href=/pzv/bitkoin-ne-finansovaya-piramida/>Биткоин — не финансовая пирамида</a></li><li><a href=/pzv/bitkoin-ne-mozhet-byt-zabanen/>Биткоин не может быть забанен</a></li><li><a href=/pzv/bitkoin-ne-dlya-prestupnikov/>Биткоин не для преступников</a></li><li><a href=/pzv/bitkoin-obescenivaet-ostalnye-dengi/>Биткоин обесценивает остальные деньги</a></li><li><a href=/pzv/bitkoin-zov-k-edineniyu/>Биткоин — зов к единению</a></li><li><a href=/pzv/bitkoin-eto-zdravyj-smysl/>Биткоин — это здравый смысл</a></li><li><a href=/pzv/bitkoin-antihrupok/>Биткоин антихрупок</a></li><li><a href=/pzv/bitkoin-velikaya-definancializaciya/>Биткоин — великая дефинанcиализация</a></li></ul></li><li><input type=checkbox id=section-7f9a42e8b73c082c7ee1415fd0eae7fb class=toggle>
<label for=section-7f9a42e8b73c082c7ee1415fd0eae7fb class="flex justify-between"><a href=/sb/>Становление Биткоина</a></label><ul><li><a href=/sb/stanovlenie-intro/>Введение</a></li><li><a href=/sb/stanovlenie-1/>О времени</a></li><li><a href=/sb/stanovlenie-2/>О людях</a></li><li><a href=/sb/stanovlenie-3/>Знакомьтесь: деньги</a></li><li><a href=/sb/stanovlenie-4/>Поворот не туда</a></li><li><a href=/sb/stanovlenie-5/>Цифровая редкость</a></li><li><a href=/sb/stanovlenie-6/>Цифровые контракты</a></li><li><a href=/sb/stanovlenie-7/>Недостающие части головоломки</a></li></ul></li><li><a href=/bitkoin-ne-vredit-okruzhayushej-srede/>Биткоин и окружающая среда</a></li><li><a href=/sem-setevyh-effektov-bitkoina/>Семь сетевых эффектов Биткоина</a></li><li><a href=/hozyaeva-i-raby-deneg/>Хозяева и рабы денег</a></li><li><a href=/strukturnaya-perestrojka/>Структурная перестройка</a></li><li><a href=/v-zashchitu-deflyacii/>В защиту дефляции</a></li><li><a href=/sravnenie-monetarnyh-standartov/>Сравнение монетарных стандартов</a></li><li><a href=/negativnye-effekty-neftedollara/>Негативные внешние эффекты нефтедоллара</a></li><li><a href=/raskoshelivaemsya/>Раскошеливаемся (Shelling Out): Происхождение денег</a></li><li><a href=/bitcoin-i-ritmy-istorii/>Биткоин и ритмы истории</a></li><li><a href=/bitcoin-i-internet-cikly-hopfa/>Биткоин и интернет-циклы Хопфа</a></li><li><a href=/dengi-blokchejny-i-socialnaya-masshtabiruemost/>Деньги, блокчейны и социальная масштабируемость</a></li><li><a href=/chto-takoe-dengi/>Что такое деньги</a></li><li><a href=/vyzhivaet-silnejshij/>Выживает сильнейший</a></li><li><a href=/strategiya-dca/>Стратегия DCA</a></li><li><a href=/jevons-paradox/>Парадокс Джевонса: Обратная истина</a></li><li><a href=/kak-rabotajut-dengi/>Как работают деньги</a></li></ul></li><li><input type=checkbox id=section-e83ea293497a2ab861101ccfc99a8ecc class=toggle>
<label for=section-e83ea293497a2ab861101ccfc99a8ecc class="flex justify-between"><a href=/security/>Безопасность</a></label><ul><li><a href=/kak-hranit-kljuchi/>Биткоин-кошельки. Зачем и как хранить свои приватные ключи</a></li><li><a href=/seed/>Что такое сид-фраза?</a></li><li><a href=/seed-security/>Как обезопасить свои сид-фразы?</a></li><li><a href=/passphrase/>Насколько надежна ваша парольная фраза?</a></li><li><a href=/multisig/>Все о мультисиг</a></li><li><a href=/hwws/>Сравнение аппаратных кошельков</a></li><li><a href=/multisig-1/>Мультисиг. Часть I</a></li><li><a href=/multisig-2/>Мультисиг. Часть II: Отдельные ключи – основа мультиподписи</a></li></ul></li><li><input type=checkbox id=section-e9552bdc5e196adcf41f88d9180bebda class=toggle>
<label for=section-e9552bdc5e196adcf41f88d9180bebda class="flex justify-between"><a href=/privacy/>Приватность</a></label><ul><li><a href=/privacy/luchshie-praktiki/>Как сохранить приватность?</a></li><li><a href=/privacy/no-kyc/>Никаких KYC, берегите персональные данные</a></li><li><a href=/privatnost-v-seti-bitcoin/>Приватность в сети Биткоин</a></li><li><a href=/bitcoin-stanovitsya-kriticheski-vazhnym/>Биткоин становится критически важным</a></li><li><a href=/bip47-ili-gadkij-utenok/>BIP47, или гадкий утенок</a></li><li><input type=checkbox id=section-197d372e28cf8111d6d38339599c8c1f class=toggle>
<label for=section-197d372e28cf8111d6d38339599c8c1f class="flex justify-between"><a href=/privacy/oxt/>Понимание приватности в сети Биткоин с помощью OXT</a></label><ul><li><a href=/privacy/oxt-1/>Часть 1: Анализ цепочки и приватность транзакций</a></li><li><a href=/privacy/oxt-2/>Часть 2: Ключевые концепции анализа цепочки</a></li><li><a href=/privacy/oxt-3/>Часть 3: Защита от анализа цепочки</a></li><li><a href=/privacy/oxt-4/>Часть 4: Применение концепций анализа цепочки для улучшения приватности пользователей</a></li></ul></li><li><a href=/privacy/coinjoin/>Понимание и использование CoinJoin</a></li><li><a href=/bitcoin-fungibility/>Взаимозаменяемость Биткоина</a></li><li><a href=/freesamourai/>#FreeSamourai</a></li></ul></li><li><input type=checkbox id=section-e49feff8bdc4c8d9840548f297831fbc class=toggle checked>
<label for=section-e49feff8bdc4c8d9840548f297831fbc class="flex justify-between"><a href=/protocol/>Протокол</a></label><ul><li><a href=/kto-kontroliruet-bitkoin-kor/>Кто контролирует Bitcoin Core?</a></li><li><a href=/vechnaja-borba/>Вечная борьба Биткоина</a></li><li><a href=/ob-udobstve-vzaimodejstvija-s-bitcoinom/>Об удобстве взаимодействия с Биткоином</a></li><li><a href=/bitcoin-zoloto-2-0/>Биткоин: цифровое золото или пиринговая наличность?</a></li><li><a href=/upravlenie-bitcoin/>Управление Биткоином</a></li><li><a href=/doverennye-tretyi-storony/>Доверенные третьи стороны — это бреши в системе безопасности</a></li><li><a href=/21-million-ne-podlezhit-obsuzhdeniyu/>21 миллион не подлежит обсуждению</a></li><li><a href=/proof-of-work/>Proof of Work: доказательство проделанной работы</a></li><li><a href=/proof-of-stake-eto-skam/>Proof of Stake – это скам</a></li><li><a href=/byl-li-satoshi-zhadnym-majnerom/>Был ли Сатоши жадным майнером?</a></li><li><a href=/segwit/>Что такое SegWit</a></li><li><a href=/taproot/>Что такое Taproot</a></li><li><a href=/bomby-slozhnosti-ethereum/>Бомбы сложности Ethereum</a></li><li><a href=/rgb/>Разбирая протокол RGB</a></li><li><a href=/halving/>Что такое Биткоин-халвинг?</a></li><li><a href=/difficulty/>О корректировке сложности майнинга</a></li><li><a href=/sravnenie-tipov-bitcoin-adresov/>Типы биткоин-адресов</a></li><li><a href=/myths-about-halving/>Мифы о Биткоин-халвинге</a></li><li><a href=/mining-walkthrough/ class=active>SHA256 и майнинг в сети Биткоин</a></li><li><input type=checkbox id=section-84ceb72b1632e17a773889af11eec517 class=toggle>
<label for=section-84ceb72b1632e17a773889af11eec517 class="flex justify-between"><a href=/protocol/utxo/>Что такое UTXO и как ими управлять?</a></label><ul><li><a href=/protocol/utxo-1/>Что такое UTXO?</a></li><li><a href=/protocol/utxo-2/>Как избежать высоких комиссий при большом количестве UTXO</a></li><li><a href=/protocol/utxo-3/>Приватность UTXO</a></li></ul></li><li><a href=/timestamps/>Временны́е метки в Биткоине</a></li><li><a href=/transaction-size/>Размер транзакции</a></li><li><a href=/o-zakostenenii-protokola/>О закостенении протокола</a></li></ul></li><li><input type=checkbox id=section-8509d6019544d659ccbc67af32e91aea class=toggle>
<label for=section-8509d6019544d659ccbc67af32e91aea class="flex justify-between"><a href=/history/>История</a></label><ul><li><input type=checkbox id=section-aa23c48a9c39058e09f0c1d84d8ebaca class=toggle>
<label for=section-aa23c48a9c39058e09f0c1d84d8ebaca class="flex justify-between"><a href=/gf/>Генезис-файлы</a></label><ul><li><a href=/gf/genesis-intro/>Пролог</a></li><li><a href=/gf/genesis-1/>Часть I: eCash Дэвида Чаума и зарождение мечты шифропанков</a></li><li><a href=/gf/genesis-2/>Часть II: Hashcash или как Адам Бэк разработал сердце Биткоина</a></li><li><a href=/gf/genesis-3/>Часть III: Если у Биткоина был прототип, то это были b-money Вэя Дая</a></li><li><a href=/gf/genesis-4/>Часть IV: Создавая Bit Gold, Сабо был в двух шагах от изобретения Биткоина</a></li><li><a href=/gf/genesis-5/>Часть V: Как поиски цифровой наличности привели Хэла Финни к созданию RPOW (и не только)</a></li></ul></li><li><a href=/hal-finney/>Хэл Финни — жизнь и смерть легенды движения шифропанков</a></li><li><a href=/bitcoin-and-me/>Биткоин и я</a></li><li><a href=/bitcoin-reformaciya/>Биткоин-Реформация</a></li><li><a href=/bitcoin-forks/>Полная история консенсус-форков Биткоина</a></li><li><a href=/analyzing-2013-fork/>Анализ форка Биткоина 2013 года</a></li><li><input type=checkbox id=section-6413681172093090da410a6853c081ef class=toggle>
<label for=section-6413681172093090da410a6853c081ef class="flex justify-between"><a href=/sr/>Silk Road</a></label><ul><li><a href=/sr/silkroad-1/>Скаут, Биткоин и грибы</a></li><li><a href=/sr/silkroad-2/>Первые успехи и неудачи нарко-Amazon'a</a></li><li><a href=/sr/silkroad-3/>Ужасный Пират Робертс</a></li><li><a href=/sr/silkroad-4/>Компания, заработавшая тысячи биткоинов</a></li><li><a href=/sr/silkroad-5/>Тёмная сторона Silk Road</a></li><li><a href=/sr/silkroad-6/>Розыск и арест Росса Ульбрихта</a></li></ul></li></ul></li><li><input type=checkbox id=section-042f7e1a0906e66d4ceaeeb231b37175 class=toggle>
<label for=section-042f7e1a0906e66d4ceaeeb231b37175 class="flex justify-between"><a href=/philosophy/>Философия</a></label><ul><li><input type=checkbox id=section-1048f9a65fd469c32ebe9f1814dc2a1c class=toggle>
<label for=section-1048f9a65fd469c32ebe9f1814dc2a1c class="flex justify-between"><a href=/chemu-ya-nauchilsya-u-bitcoina/>Чему я научился у Биткоина?</a></label><ul><li><a href=/chemu-ya-nauchilsya-u-bitcoina/filosofskie-uroki-bitcoina/>Часть1. Философские уроки Биткоина</a></li></ul></li><li><a href=/ne-shitcoin/>Биткоин, не щиткоин</a></li><li><a href=/neotemlemye-prava-sobstvennosti/>Неотъемлемые права собственности</a></li><li><a href=/manifest-kriptoanarhista/>Манифест криптоанархиста</a></li><li><a href=/manifest-shifropanka/>Манифест шифропанка</a></li><li><a href=/tyulpannaya-lihoradka/>Биткоин — современная голландская тюльпанная лихорадка?</a></li><li><a href=/vse-moshenniki/>Все — мошенники</a></li><li><a href=/svoboda-cennosti/>Свобода ценности</a></li><li><a href=/bitcoin-meme/>Биткоин — единственный реальный мем</a></li><li><a href=/nol-i-bitcoin/>Ноль и Биткоин</a></li><li><a href=/crypto-bro/>Дорогие крипто- и фиат-бро</a></li><li><a href=/boremsya-s-poddelnymi-bitcoin/>Боремся с поддельными биткоинами</a></li><li><a href=/bit%D1%81oin-eto-micelij/>Биткоин — это мицелий</a></li><li><a href=/pochemu-bitcoin-zhivoj-organizm/>Доказательство жизни. Почему Биткоин — живой организм</a></li><li><a href=/samaya-mirnaya-revolyuciya/>Самая мирная революция</a></li><li><a href=/o-bitcoin-vselennoj/>О Биткоин-вселенной</a></li><li><a href=/bitcoin-dissidenty/>Биткоин-диссиденты</a></li><li><a href=/bitcoin-svoboda/>Биткоин = свобода</a></li></ul></li><li><input type=checkbox id=section-66beb9b5ed04619b43509a5a9298b3a2 class=toggle>
<label for=section-66beb9b5ed04619b43509a5a9298b3a2 class="flex justify-between"><a href=/future/>Будущее</a></label><ul><li><input type=checkbox id=section-df24c55b3b01a044f159006399dd3f62 class=toggle>
<label for=section-df24c55b3b01a044f159006399dd3f62 class="flex justify-between"><a href=/ba/>Биткоин-астрономия</a></label><ul><li><a href=/ba/1/>Постгипербиткоинизация</a></li><li><a href=/ba/2/>Миллион крошечных миров</a></li><li><a href=/ba/3/>Первый контакт</a></li></ul></li><li><a href=/ej-bitcoin-pritormozi/>Эй, Биткоин, притормози</a></li><li><a href=/apokalipsis/>Сможет ли Биткоин пережить апокалипсис?</a></li><li><a href=/bitcoin-i-teplovaya-energiya-okeanov/>Биткоин и тепловая энергия океанов</a></li></ul></li><li><input type=checkbox id=section-a71a3aee31fa8f939d269196bdc16bfd class=toggle>
<label for=section-a71a3aee31fa8f939d269196bdc16bfd class="flex justify-between"><a href=/lightning/>Лайтнинг</a></label><ul><li><a href=/chto-takoe-laitning/>Что такое Лайтнинг?</a></li><li><a href=/lajtning-koshelki/>Лайтнинг-кошельки</a></li><li><a href=/lajtning-adresa/>Лайтнинг-адреса</a></li><li><a href=/privatnost-v-lajtning/>Приватность в сети Lightning</a></li><li><a href=/centralizovanna-li-set-lightning/>Централизованна ли сеть Lightning?</a></li><li><a href=/mekhanizm-raboty-lightning/>Механизм работы Lightning Network</a></li><li><a href=/problema-vhodyashchej-likvidnosti/>Решение проблемы входящей ликвидности</a></li></ul></li></ul></li><li><input type=checkbox id=section-a6b5e5f811434cb992fdebac0e1d7718 class=toggle>
<label for=section-a6b5e5f811434cb992fdebac0e1d7718 class="flex justify-between"><a href=/practice/>Практика</a></label><ul><li><input type=checkbox id=section-5a7a56ff2c706814b0747555f55b45b2 class=toggle>
<label for=section-5a7a56ff2c706814b0747555f55b45b2 class="flex justify-between"><a href=/practice/buy/>Покупка</a></label><ul><li><a href=/newbie-buy/>Покупка и хранение биткоина для новичков</a></li><li><a href=/hodl-hodl/>Покупка биткоина без KYC на Hodl Hodl</a></li><li><a href=/robosats/>RoboSats: Приватный p2p обмен</a></li></ul></li><li><input type=checkbox id=section-a2a499e8fa40193bb85003cabaff5d49 class=toggle>
<label for=section-a2a499e8fa40193bb85003cabaff5d49 class="flex justify-between"><a href=/practice/hodl/>Хранение</a></label><ul><li><a href=/electrum/>Кошелек Электрум</a></li><li><a href=/blue/>Кошелек Blue</a></li><li><a href=/seedsigner/>SeedSigner: оффлайн-крепость для ваших биткоинов</a></li><li><a href=/holodnyj-koshelek-iz-starogo-smartfona/>Холодный кошелек из старого смартфона</a></li><li><a href=/coldcard/>Что такое Coldcard?</a></li></ul></li><li><input type=checkbox id=section-4e34fd6dae27eeab9274b5e370a300a7 class=toggle>
<label for=section-4e34fd6dae27eeab9274b5e370a300a7 class="flex justify-between"><a href=/practice/interact/>Взаимодействие</a></label><ul><li><a href=/practice/bitcoin-node/>Каждому следует запустить собственную Биткоин-ноду!</a></li><li><a href=/orangepilling-in-5-min/>Оранжпиллинг за 5 минут</a></li><li><a href=/5-tips-for-teaching-bitcoin/>5 советов по обучению Биткоину</a></li></ul></li><li><input type=checkbox id=section-96e30ec66d0b34a4f6f9c7ee8d27fdd6 class=toggle>
<label for=section-96e30ec66d0b34a4f6f9c7ee8d27fdd6 class="flex justify-between"><a href=/docs/Practice/security/>Практики безопасности</a></label><ul><li><a href=/pgp-verify/>Проверка подлинности программ с помощью PGP</a></li></ul></li><li><input type=checkbox id=section-ed813fe32867bdad9fbc116cfa115400 class=toggle>
<label for=section-ed813fe32867bdad9fbc116cfa115400 class="flex justify-between"><a href=/practice-privacy/>Практики приватности</a></label><ul><li><input type=checkbox id=section-20fa42a588c7405850eac56c7752c25b class=toggle>
<label for=section-20fa42a588c7405850eac56c7752c25b class="flex justify-between"><a href=/practice-privacy/dojo/>Установка Биткоин-узла Dojo на x86</a></label><ul><li><a href=/practice-privacy/dojo-0/>Введение</a></li><li><a href=/practice-privacy/dojo-1/>Установка Bitcoin Core и Tor</a></li><li><a href=/practice-privacy/dojo-2/>Установка индексатора Fulcrum</a></li><li><a href=/practice-privacy/dojo-3/>Установка блокчейн-обозревателя Mempool</a></li><li><a href=/practice-privacy/dojo-4/>Установка Samourai Dojo</a></li><li><a href=/practice-privacy/dojo-5/>Конфигурация межсетевого экрана</a></li><li><a href=/practice-privacy/dojo-6/>Установка обновлений пакетов</a></li></ul></li><li><a href=/practice-privacy/ronindojo/>Установка RoninDojo на x86</a></li><li><a href=/grapheneos/>GrapheneOS: Избавляемся от слежки Google на смартфоне</a></li></ul></li><li><input type=checkbox id=section-0af442a82e8087438ae3e5d932bfcd3c class=toggle>
<label for=section-0af442a82e8087438ae3e5d932bfcd3c class="flex justify-between"><a href=/practice/lightning/>Лайтнинг на практике</a></label><ul><li><a href=/phoenix/>Кошелек Phoenix</a></li><li><a href=/lnbits/>LNbits – швейцарский нож среди лайтнинг-приложений</a></li><li><a href=/alby-i-nostr/>Alby и Nostr</a></li><li><a href=/zapplanner/>Подписки с помощью Лайтнинг</a></li><li><a href=/lntips/>Телеграм-бот @LightningTipBot</a></li><li><a href=/ochishchaem-bitcoin-cherez-lajtning/>Очищаем биткоины через сеть Лайтнинг</a></li><li><a href=/likvidnost-v-lajtning/>Руководство по управлению ликвидностью в сети Lightning</a></li><li><a href=/mutiny/>Кошелек Mutiny</a></li></ul></li></ul></li><li><input type=checkbox id=section-4f9efbc916a788429edff50248f79330 class=toggle>
<label for=section-4f9efbc916a788429edff50248f79330 class="flex justify-between"><a href=/rabbithole/>Кроличья нора</a></label><ul><li><a href=/books/>Книги</a><ul></ul></li><li><a href=/videos/>Видео</a><ul></ul></li><li><a href=/audiobooks/>Аудиокниги</a><ul></ul></li><li><a href=/pods/>Подкасты</a><ul></ul></li></ul></li></ul><div class=menuSep></div><ul><li><a href=/posts/>Блог</a></li><li><a href=/calendar/>Биткоин-календарь</a></li><li><input type=checkbox id=section-d90442343f58c582906ebc7e255e7116 class=toggle>
<label for=section-d90442343f58c582906ebc7e255e7116 class="flex justify-between"><a href=/contribute/>Принять участие</a></label><ul><li><a href=/syntax/>Оформление статей</a></li><li><a href=/github/>Как добавить статью?</a></li><li><a href=/obsidian/>Публикация статей через Obsidian</a></li></ul></li><li><a href=/feedback/>Обратная связь</a></li></ul></nav><footer><br><a class=menuSocialButton href=https://t.me/bitcoin21ideas target=_blank title=Telegram><svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg"><path d="m12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12c0-6.627-5.373-12-12-12zm5.894 8.221-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002.0-.003.0-.005.0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121L8.32 13.617l-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/></svg></a>&nbsp;
<a class=menuSocialButton href=https://github.com/21ideas-org/21ideas.org target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 820"><path d="M4e2 9.9C179.11 9.9.0 189 0 409.94.0 585.6 113.24 734.86 270.71 788.61l2.83.83c20 3.76 27.34-8.59 27.34-19.24.0-9.49-.32-34.68-.5-68-111.27 24.14-134.75-53.68-134.75-53.68a106.58 106.58.0 00-44.09-58.26l-.43-.24c-36.23-24.81 2.8-24.3 2.8-24.3A84.06 84.06.0 01185 606.54l.22.4a85.24 85.24.0 00116.92 33l-.43.21A85.16 85.16.0 01327 586.7C238.19 576.67 144.8 542.25 144.8 389c0-.72.0-1.55.0-2.38a153.82 153.82.0 0141.27-105l-.08.11a139.82 139.82.0 01-8.56-48.58 141.91 141.91.0 0112.4-58.21l-.37.91s33.51-10.72 110 41c30-8.56 64.43-13.5 1e2-13.5a378.09 378.09.0 01102.68 14.14l-2.67-.64c76-51.72 109.51-41 109.51-41a144 144 0 0112 58.07 145.56 145.56.0 01-8.35 48.82l.32-1a154.37 154.37.0 0141 105c0 .83.0 1.63.0 2.43V389c0 153.68-93.5 187.51-182.52 197.35a95.48 95.48.0 0127.27 66.93c0 2.48-.11 5-.3 7.42v-.32c0 53.54-.51 96.54-.51 109.53.0 10.51 7 23 27.51 19C686.25 734.78 8e2 585.39 8e2 409.41 8e2 188.74 621.11 9.87 400.47 9.87H4e2z"/></svg></a>&nbsp;
<a class=menuSocialButton href=https://njump.me/npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l target=_blank title=Nostr><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 820"><path d="M4e2 797.5c219.53.0 397.5-178 397.5-397.5S619.53 2.5 4e2 2.5 2.5 180.47 2.5 4e2 180.47 797.5 4e2 797.5zM598.23 242.15c6.82 8.46 10.35 18.14 11.45 28.86 1.7 16.37-2.68 31.17-11.2 45-14.19 23.62-43.17 39.63-45.85 41-5.42 2.86-7.42 7.12-7.06 13.34s-1.21 37.19-20 50.83c-9.68 7-48.64 16-66.6 19.05a28.61 28.61.0 00-13.18 5.37c-1 .67-2 1.36-3.2 2.06-6.82 4.27-31.23 38-35.31 45.48l10.66-3.27c21.2-6.53 66.85-20.6 69.52-21 9-1.4 15.89 1.22 20.34 7.79 3.63 5.41 7.18 10.81 10.75 16.25.61.94 1.23 1.87 1.85 2.81 1 1.54 2 3.08 2.93 4.62.48.78 1 1.55 1.45 2.32l1.52 2.38c.09.14.19.29.28.45a10.65 10.65.0 011.37 2.83c.24 1 .91 4.14-.92 6.09-1.7 1.77-4.63 1.77-6.21 1.34a15.65 15.65.0 01-5.6-2.8l-2.49-2.13c-2-1.71-5.73-2.56-8.71-2.44-3.41.13-8-1-10.11-2.37-4.2-2.74-5.35-9.56-5.35-9.68a3.51 3.51.0 00-3.72-2.86 18.58 18.58.0 00-6.28 1.15l-.78.25q-15 4.56-29.93 9.24h0l-14.31 4.45c-7.06 2.19-14.12 4.38-21.13 6.69a37.45 37.45.0 00-5.72 2.62c-.43.21-.84.43-1.25.64l-1.24.64h0c-.85.42-1.7.85-2.55 1.34l-.27.15a30.59 30.59.0 01-5.76 2.65c-7.12 2.13-13.39-1-16.32-8.1-1.88-4.63-.18-13.76.86-16.44 5.58-14.35 21.77-39.58 26.28-46.6.75-1.17 1.17-1.83 1.17-1.86-.36-.12-23.25 9.07-27 11.93-10.35 7.86-34.64 26.49-35 28.31A22.75 22.75.0 01331 508.13c-5.66 2.19-9.13 6.7-12.48 11.08.0.0-60.88 83.83-65 88.34l-.68.74c-2.83 3-12.28 13.16-15 18.13-.46.83-1.61 3.27-2.58 5.33-.6 1.26-1.13 2.38-1.38 2.89.0.05-.05.11-.08.17-.59 1.21-1.91 3.9-6.31 3.66s-4.79-6.12-5-9.09v-.4c-.54-6.88 1-13.7 4.63-20.82a6.46 6.46.0 01.31-.58c1-1.8 3.93-7 2.61-11.36s-2.61-11.14-.6-14.61c2.84-4.77 7.62-5.48 13.92-6.41l2.64-.41c5.29-.85 9.13-3.53 12.84-8.88 4.66-6.84 17-24.51 27.65-39.67C293.62 516 3e2 507 302.66 503.09a25.55 25.55.0 003.77-9.08c1.89-9.74 7.85-16.49 18.14-20.7 2.25-.85 43.17-35.06 43.17-39.45.0-3.1-4.45-4.87-7.92-5.78-.48-.12-26.24-6.82-37.92-12.12A88.58 88.58.0 01305 406.41c-7.53-5.54-22.23-3.16-25.3-2.67l-.27.05c-11 1.58-19.12 6.51-28.37 12.78-1.65 1.16-10.05 4.2-14.31 1.77-1.32-.75-2.9-1.6-4.65-2.54-9.16-4.92-22.91-12.31-28.59-20.9-3.11-4.69-2.68-12.42-.49-20.94 7.07-19.73 17.48-28.56 36.77-33.91 11.39-3.95 32.41-5.33 46.84-6.28 2.93-.19 5.59-.37 7.84-.54.12-.05.8-.09 1.94-.18 7-.51 31.32-2.27 49.13-11.39 1.61-.82 3.59-1.92 5.91-3.2 17.67-9.8 55.68-30.86 107.76-29.25 12.95.4 32.15 7.45 49.77 13.93 14.79 5.43 28.46 10.45 36.38 10.79 17.65.73 26.54-1.22 36.77-11.81 2.92-3.05 15.16-29.53 3.59-44a108.64 108.64.0 00-13.94-14.55q-2.28-1.94-4.59-3.85a183.79 183.79.0 01-15.8-14.29c-13.82-14.61-18.09-34.58-11.51-50.17 4.14-10.9 13-15.65 25.63-13.15 6.22 1.24 11.28 5.49 15.95 9.41a73.24 73.24.0 005.84 4.59c3.6 2.38 9.56 3.78 13.46 4.69 4.93 1.16 8.65 4.93 8.4 7.49s-6.7 4.75-13 4.26c-7.36-.49-20.09-.55-27.7 2-5.05 1.83-7.3 7.49-5.84 13 1.22 4.57 10.9 12.66 14.55 15.65 1.64 1.35 3.3 2.67 5 4C587.86 231.81 593.56 236.34 598.23 242.15z" fill-rule="evenodd"/></svg></a>&nbsp;
<a class=menuSocialButton href=/rss title=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="-143 145 525 525"><path d="M113 145c-141.4.0-256 114.6-256 256s114.6 256 256 256 256-114.6 256-256S254.4 145 113 145zM43.1 518.7c-6.2 6.2-14.7 9.9-24.1 9.9-9.4.0-17.8-3.8-24-9.9-6.2-6.2-10-14.6-10-23.9.0-9.4 3.8-17.8 10-24s14.6-10 24-10 17.9 3.8 24 10c6.2 6.2 10 14.6 10 24C53 504.2 49.2 512.6 43.1 518.7zM104.8 529c-.1-32.1-12.5-62.3-35.1-84.9-22.6-22.6-52.8-35.2-84.7-35.2V360c46.6.0 88.7 19 119.3 49.6s49.5 72.8 49.6 119.4H104.8zm87.2.0c-.1-114.2-92.8-207.1-206.9-207.1V273c70.6.0 134.5 28.7 180.8 75.1 46.3 46.4 75 110.3 75.1 180.9H192z"/></svg></a></footer><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class="book-page book-page-page"><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>SHA256 и майнинг в сети Биткоин</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#хэш-функции>Хэш-функции</a></li><li><a href=#майнинг>Майнинг</a></li><li><a href=#выигрыш-блока>Выигрыш блока</a></li><li><a href=#корректировка-сложности>Корректировка сложности</a></li><li><a href=#халвинг>Халвинг</a></li><li><a href=#комиссии-за-транзакции>Комиссии за транзакции</a></li><li><a href=#может-ли-блок-быть-перезаписан>Может ли блок быть перезаписан?</a></li><li><a href=#что-произойдет-если-два-майнера-одновременно-найдут-блок>Что произойдет, если два майнера одновременно найдут блок?</a></li><li><a href=#приложение>Приложение</a><ul><li><a href=#почему-блок-майнера-занявшего-второе-место-является-недействительным>Почему блок майнера, занявшего второе место, является недействительным</a></li></ul></li></ul></li></ul></nav></aside></header><div class=pageCover><picture><img src=/img/mining/01.webp alt=Cover></picture></div><h1>Как SHA256 и майнинг защищают сеть Биткоина</h1><div class=pageDate>24 февраля 2022 г.</div><article class=markdown><p>Как Биткоин защищен с помощью энергии? И что такое &ldquo;нонс&rdquo;? На эти и другие вопросы ответит эта статья.</p><blockquote class="book-hint btc"><p>Перевод <a href=https://bitcoinmagazine.com/technical/how-mining-protects-the-bitcoin-network>статьи</a> <a href=https://twitter.com/parman_the>Arman The Parman</a>, опубликованной в Bitcoin Magazine.</p><p><a href=/contribute>Поддержать проект</a>.</p></blockquote><p>То, как работает майнинг, просто завораживает. Когда я объясняю это людям, мне нравится видеть их лица в тот момент, когда у них сносит крышу. Я объясню процесс майнинга в сегодняшней статье, но знайте, что я представляю себе ваши лица, когда ваши умы взрываются!</p><p>Я начну с хэш-функций. Без хэш-функций Биткоин был бы невозможен. Позвольте мне сначала объяснить, что это такое, не только для того, чтобы вы могли покозырять на вечеринках, но и потому, что это имеет фундаментальное значение для понимания того, как работает Биткоин под капотом – как осуществляются биткоин-транзакции, но, в особенной степени, как майнинг обеспечивает безопасность сети. Если вам интересно узнать, как вычислить хэш SHA256 с помощью ручки и бумаги, ознакомьтесь <a href=https://armantheparman.com/sha256/>это руководство</a>.</p><p>Чтобы извлечь пользу из Биткоина, не нужно понимать, как он работает, точно так же, как не нужно понимать, как работает TCP/IP, чтобы пользоваться Интернетом. Но все-таки прочтите эту статью, потому что это довольно интересно, и я обещаю, что понять принципы майнинга будет не сложно.</p><h2 id=хэш-функции>Хэш-функции
<a class=anchor href=#%d1%85%d1%8d%d1%88-%d1%84%d1%83%d0%bd%d0%ba%d1%86%d0%b8%d0%b8>#</a></h2><p>Начнем со схемы, которую я объясню ниже&mldr;</p><div class=imageWrapper><img src=/img/mining/02-ru.png><p><em>(Источник изображения: <a href=https://twitter.com/jirols_btc>@jirols_btc</a>)</em></p></div><p>Слева – вход, в центре – функция, а справа – выход. На входе могут быть любые данные, лишь бы они были цифровыми. Они могут быть любого объема, до тех пор пока ваш компьютер сможет их обработать. Данные передаются в функцию SHA256. Функция принимает данные и вычисляет случайное число, но с опредёленными свойствами (о них мы поговорим позже).</p><p>Первый алгоритм безопасного хэширования (Secure Hash Algorithm – SHA) был изначально <a href=https://ru.wikipedia.org/wiki/SHA-1>разработан АНБ</a>, и сейчас существует множество его различных версий (в Биткоине используется SHA256). Это набор инструкций по перемешиванию данных очень сложным, но определенным способом. Инструкции по хэшированию не являются секретом, и это даже можно сделать вручную, хотя процесс весьма утомителен.</p><p>Данные, пропущенные через алгоритм SHA256 на выходе представляют собой 256-битное число.</p><p><em>256-битное число может быть представлено в двоичном формате с использованием 256 цифр. Двоичный формат означает, что значение представлено двумя символами, либо 0, либо 1. Двоичные числа можно преобразовать в любой другой формат, например, в десятичный, с которым все мы хорошо знакомы.</em></p><p>Хотя функция возвращает 256-разрядное двоичное число, значение обычно выражается в шестнадцатеричном формате, длиной 64 цифры.</p><p><em>Шестнадцатеричная система означает, что вместо 10 возможных символов, к которым мы привыкли в десятичной системе (от 0 до 9), используется 16 символов (привычные нам десять – 0-9, плюс буквы a, b, c, d, e и f, которым присваиваются значения от 11 до 15). Например, чтобы представить десятичное значение 15 в шестнадцатеричной системе, мы просто напишем &ldquo;f&rdquo;. Если вам понадобится более подробная информация на эту тему, ее можно получить в интернете, бегло поискав в Google.</em></p><p>Чтобы продемонстрировать SHA256 в действии, я могу взять число 1 и прогнать его через <a href=https://emn178.github.io/online-tools/sha256.html>онлайн-калькулятор расчета хэшей</a>, получив следующий результат (в шестнадцатеричном виде):</p><div class=imageWrapper><img src=/img/mining/03.webp></div><p>Верхняя область – входные данные, нижняя – результат хэширования.</p><p>Обратите внимание, что все компьютеры в мире использующие одни и те же входные данные и функцию SHA256, выдадут тот же результат.</p><p>Если преобразовать шестнадцатеричное число в десятичное, то получится (обратите внимание, что для записи требуется больше цифр):</p><p>48,635,463,943,209,834,798,109,814,161,294,753,926,839,975,257,569,795,305,637,098,542,720,658,922,315</p><p>А при переводе в двоичную систему это выглядит так:</p><p>11010111000011010110010011100111111111100110100111111001110000110011101011010111000000001001110111111110101101000111111010101110100011110101101101001001110101010100010001011110001110101001001110000000001111001010010110111011011011110000111010110110100101111010111001101011100110101110011010111001101011100110101110011010111001101011100111</p><p>Просто для интереса, вот то же самое значение в <a href=https://ru.wikipedia.org/wiki/Base64>base 64</a>:</p><p>1w1k5/5p+cM61wCd/rR+ro9bSdVEXjqTgDylu28OtpY=</p><p>Наименьшее возможное значение, которое может вернуть SHA256, – это ноль, но ДЛИНА строки все равно равна 256 битам. Вот как выглядит ноль:</p><p>0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</p><p>А наибольшее возможное значение:</p><p>1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p><p>В десятичной системе это:</p><p>115,792,089,237,316,195,423,570,985,008,687,907,853,269,984,665,640,564,039,457,584,007,913,129,639,935</p><p>В шестнадцатеричной:</p><p>FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</p><p>Здесь ровно 64 символа &ldquo;F&rdquo;.</p><p>Ноль в шестнадцатеричной системе может быть записан как один единственный ноль, но для вывода хэша их нужно 64, чтобы соблюсти требование фиксированного размера вывода:</p><p>0000000000000000000000000000000000000000000000000000000000000000</p><p>Ниже приведены некоторые факты о хэш-функции, которые важно знать:</p><ul><li>Вход не может быть определен из выхода (имея результат хэширования, нет возможности вычислить входные данные)</li><li>Входные данные могут быть любой длины</li><li>Выходные данные всегда имеют одинаковую длину</li><li>Выходные данные всегда будут неизменными, если вы предоставите одинаковые входные данные</li><li>Любое изменение входных данных, сколь бы незначительным оно ни было, приведет к непредсказуемым и кардинально отличающимся данным на выходе</li><li>Результат кажется случайным, но на самом деле он детерминирован (то есть был вычислен и является воспроизводимым)</li><li>Выход нельзя предсказать. Его можно только вычислить, а это требует ощутимого объема компьютерных вычислений (или часов работы с карандашом и бумагой – не делайте этого!).</li></ul><p>Теперь, когда вы поняли основную концепцию того, что такое хэш, вы сможете понять принцип работы майнинга Биткоина.</p><p>Но прежде чем двигаться дальше, я рекомендую вам открыть онлайн-калькулятор расчета хэшей, немного поиграть с ним и проверить на практике то, что я рассказал о хэш-функциях. Я советую <a href=https://emn178.github.io/online-tools/sha256.html>этот калькулятор</a>.</p><h2 id=майнинг>Майнинг
<a class=anchor href=#%d0%bc%d0%b0%d0%b9%d0%bd%d0%b8%d0%bd%d0%b3>#</a></h2><p>Я начну с демонстрации концепции, откуда берет начало &ldquo;доказательство работы&rdquo; (Proof-of-Work) в Биткоине.</p><p>Откройте онлайн-калькулятор расчета хэшей и введите: “I am creating 50 bitcoins and paying myself this amount.” <em>(&ldquo;Я создаю 50 биткоинов и плачу себе эту сумму&rdquo;).</em></p><p>Введите эту фразу без изменений, с учетом регистра, включая точку. Вы должны получить следующее сообщение:</p><div class=imageWrapper><img src=/img/mining/04.webp></div><p>Теперь давайте создадим правило, согласно которому для того, чтобы сообщение о платеже было действительным, нужно, чтобы хэш начинался с одного нуля. Для этого нам нужно как-то изменить входные данные. Но, как вы уже поняли, невозможно предсказать, каким будет выход для разных входных данных. Что же мы можем изменить, чтобы хэш начинался с нуля?</p><p>Нам придется добавлять данные методом проб и ошибок. Но мы также не хотим менять смысл входного сообщения. Поэтому создадим поле (выделенный раздел) под названием &ldquo;нонс&rdquo; <em>(от английского <strong>nonce</strong> – прим. пер.)</em>, которое будет содержать бессмысленное значение.</p><p>Термин &ldquo;нонс&rdquo; предположительно происходит от “number only used once” (&ldquo;число, используемое только один раз&rdquo;).</p><p>Обратите внимание, как простое добавление <code>Nonce:</code> в качестве заголовка дополнительного поля изменяет результат хэширования.</p><div class=imageWrapper><img src=/img/mining/05.webp></div><p>Вывод по-прежнему не начинается с &ldquo;0&rdquo;, поэтому давайте добавим немного данных (я добавил &ldquo;x&rdquo;):</p><div class=imageWrapper><img src=/img/mining/06.webp></div><p>Вывод по-прежнему не начинается с нуля. Я добавил еще несколько символов, пока хэш не стал начинаться с нуля:</p><div class=imageWrapper><img src=/img/mining/07.webp></div><p>Вот так. Теперь, согласно произвольным правилам, которые я установил для этой воображаемой версии Биткоина, текст в окне для входных данных – это действительный блок с одной транзакцией, заплатившей мне 50 биткоинов.</p><p><em>Блоки биткоина – это, по сути, страницы бухгалтерской книги. Каждый блок пронумерован и создает новые биткоины, а также записывает транзакции между пользователями. Эти записи – место, где хранятся биткоины.</em></p><p>Теперь новое правило. В следующий блок должен быть включен хэш предыдущего блока. Я немного усложню задачу и добавлю еще несколько полей, чтобы приблизить вид наших импровизированных блоков к настоящим блокам Биткоина.</p><div class=imageWrapper><img src=/img/mining/08.webp></div><p>Хэш начинается с &ldquo;f&rdquo;, а не с &ldquo;0&rdquo;, поэтому мне придется попробовать несколько значений в поле нонс:</p><div class=imageWrapper><img src=/img/mining/09.webp></div><p>На этот раз мне повезло больше, и я нашел подходящий нонс всего после четырех попыток. Напомню, что для первого блока потребовалось 22 попытки. Здесь есть некоторая случайность, но в целом найти подходящий хэш не так уж сложно, если мы пытаемся получить только один ноль в начале. Для первой цифры хэша существует 16 возможных значений, поэтому у меня есть 1 шанс к 16, что любое изменение, которое я внесу в поле для входных данных, приведет к тому, что первой цифрой хэша будет &ldquo;0&rdquo;.</p><p>Обратите внимание, что поля в блоке Биткоина выглядят примерно так же, но есть и другие детали, которые я не стал добавлять. Это просто иллюстрация, а не детальная модель того, как выглядит блок Биткоина.</p><p>Я добавлю поле времени в следующий блок, так как оно мне нужно для объяснения &ldquo;корректировки сложности&rdquo;:</p><div class=imageWrapper><img src=/img/mining/10.webp></div><p>Выше представлен блок номер три. Он включает в себя хэш предыдущего блока, а теперь я также начал включать в него время. Найденный мною нонс успешно заставил хэш начинаться с нуля (я просто продолжал добавлять &ldquo;1&rdquo;, пока цель хэширования не была достигнута).</p><p>Я полагаю, предоставленной информации достаточно, чтобы начать объяснять несколько интересных концепций, в контексте блокчейна Биткоина и майнинга.</p><h2 id=выигрыш-блока>Выигрыш блока
<a class=anchor href=#%d0%b2%d1%8b%d0%b8%d0%b3%d1%80%d1%8b%d1%88-%d0%b1%d0%bb%d0%be%d0%ba%d0%b0>#</a></h2><p>Процесс майнинга является конкурентным. Тот, кто первым производит действительный блок, получает установленное за него вознаграждение. Майнер, добывший блок с тем же номером немного позже, не получает ничего – этот блок отклоняется. Объяснять, почему это так, сейчас слишком утомительно, поэтому я расскажу об этом в <a href=/mining-walkthrough/#%d0%bf%d1%80%d0%b8%d0%bb%d0%be%d0%b6%d0%b5%d0%bd%d0%b8%d0%b5>приложении ниже</a>.</p><p>После того как блок 3 найден и передан всем узлам Биткоина, все майнеры прекращают работу над тем, что было бы их версией блока 3. Они переносят хэш блока 3 в новый блок и начинают работать над поиском подходящего нонса для блока 4. Победитель публикует результат, после чего все начинают работать над пятым блоком и т. д.</p><p>С каждым блоком создаются новые биткоины, которые в совокупности составляют общее предложение на данный момент. Если майнеров много, то по статистике мы должны ожидать, что блоки будут создаваться быстрее, а значит, и биткоины будут производиться быстрее. Проблема, верно?</p><p>Стремясь к ограниченному предложению Биткоина, обладающему предсказуемой эмиссией с течением времени, Сатоши Накамото ввел отрицательную обратную связь, чтобы поддерживать темп выпуска блоков на отметке около 10 минут. Как? Попробуйте придумать решение сами. Остановитесь на мгновение и подумайте, сможете ли вы придумать такое же гениальное решение, а когда сдадитесь, читайте дальше.</p><p><em>УЗЛЫ: Я упоминаю &ldquo;действительные&rdquo; блоки. Что? Кто их проверяет? Валидность блоков проверяют узлы Биткоина. Узел Биткоина <strong>хранит копию блокчейна</strong>, актуальную на данный момент, и, следуя набору правил, проверяет, соответствуют ли новые блоки правилам. Узел отклоняет блоки, которые не соответствуют правилам протокола Биткоин. Где указаны эти правила? В коде. Компьютер, на котором запущен код Биткоина, является узлом, хранящим в том числе и правила протокола.</em></p><h2 id=корректировка-сложности>Корректировка сложности
<a class=anchor href=#%d0%ba%d0%be%d1%80%d1%80%d0%b5%d0%ba%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%ba%d0%b0-%d1%81%d0%bb%d0%be%d0%b6%d0%bd%d0%be%d1%81%d1%82%d0%b8>#</a></h2><p>Среднее время создания новых блоков Биткоина рассчитывается каждым узлом через каждые 2016 блоков (вот почему необходимо поле, указывающее время). Это часть протокола и правил, которым следуют узлы. Формула применяется для корректировки количества нулей, с которых должен начинаться хэш каждого действительного блока.</p><p><em>Строго говоря, корректируется не количество нулей, а целевое значение (target), ниже которого должен быть хэш, но, используя нули в начале хэша, происходящее проще объяснить.</em></p><p>Если блоки создаются слишком быстро, то цель хэширования корректируется в соответствии с заранее установленными правилами, которым все узлы следуют одинаково (это прописано в их коде).</p><p>Упрощая для примера, скажем, что я не единственный участник этой вымышленной сети и за создание блоков со мной соревнуются другие люди. Блоки начинают появляться слишком быстро, и теперь, согласно вымышленному расчету, чтобы четвертый блок считался действительным, его хэш должен начинаться с двух нулей, а не с одного.</p><p>Мне потребуется немного больше времени, чтобы получить два нуля в начале хэша, но не забывайте, что помимо меня хэш подбирает множество других участников сети, поэтому общее время, затрачиваемое каждым на поиск блока, не превышает заданного.</p><p>Вот следующий блок:</p><div class=imageWrapper><img src=/img/mining/11.webp></div><p>Обратите внимание на время. С момента предыдущего блока прошло более 10 минут (я просто указал выдуманное время для примера). Цель в 10 минут является вероятностной; никогда не известно, когда именно будет найден следующий блок.</p><p>Я с минуту возился с блоком, пока не появились два нуля. Это было в геометрической прогрессии сложнее, чем найти хэш с одним нулём в начале. Шанс найти два нуля подряд составляет 1 к 16<sup>2</sup>, или 1 к 256.</p><p>Если все больше людей будут участвовать в майнинге и соревновании за новые биткоины, то в конце концов потребуются три нуля.</p><p>Я только что просмотрел последний реальный блок Биткоина, который содержит хэш предыдущего блока. Хеш был таким:</p><p>000000000000000000084d31772619ee08e21b232f755a506bc5d09f3f1a43a1</p><p>Это 19 нулей! Вероятность найти такой блок при каждой попытке – 1 к 16<sup>19</sup>. Биткоин-майнеры выполняют много, много попыток в секунду, коллективно по всему миру.</p><p>Количество попыток в секунду известно как &ldquo;хэшрейт&rdquo;. В настоящее время мировой хэшрейт составляет чуть менее 200 миллионов терахэшей в секунду (один терахэш – это триллион хэшей). При таком количестве попыток в секунду блок с хэшем, начинающимся с 19 нулей, находится примерно каждые 10 минут.</p><p>В будущем, когда к работе присоединится больше майнеров, хэшрейт вырастет, блоки будут находиться быстрее, а сложность Биткоина изменится так, чтобы требовать 20 нулей, что приведет к восстановлению времени создания блока примерно до 10 минут.</p><blockquote class="book-hint btc">Подробнее о корректировке сложности Биткоина можно узнать из <a href=/difficulty>этой нашей статьи</a>.</blockquote><h2 id=халвинг>Халвинг
<a class=anchor href=#%d1%85%d0%b0%d0%bb%d0%b2%d0%b8%d0%bd%d0%b3>#</a></h2><p>Когда биткоин только появился, за каждый блок выплачивалось 50 биткоинов. Правила блокчейна Биткоина гласят, что после каждых 210 000 блоков вознаграждение сокращается вдвое. Этот явление известно как &ldquo;халвинг&rdquo; и происходит примерно раз в четыре года. Халвинг в сочетании с корректировкой сложности для сохранения десятиминутных интервалов между блоками означает, что примерно в 2140 году вознаграждение за блок составит 0,00000001, или 1 сатоши, наименьшую единицу Биткоина, и больше не сможет быть уменьшено вдвое. Майнинг не прекратится, но вознаграждение за блок будет равно нулю. С этого момента новые биткоины больше не будут создаваться, а количество биткоинов математически вычисляемо и немногим меньше 21 миллиона монет. Именно поэтому известно общее предложение – оно задается программно.</p><p>Даже если вознаграждение за блок будет равно нулю, у майнеров все равно будет стимул продолжать работать, чтобы получать комиссии за транзакции.</p><p><em>Как именно вознаграждение за блок сокращается вдвое? Это заложено в коде, запущенном на узлах. Они знают, что нужно отклонить любой новый блок после 210 000, где майнер платит себе более 25 биткоинов. А затем отклонять любые блоки после 420 000, где майнер платит себе более 12,5 биткоина, и так далее.</em></p><blockquote class="book-hint btc">Подробнее о халвинге Биткоина можно узнать из <a href=/halving>этой нашей статьи</a>.</blockquote><h2 id=комиссии-за-транзакции>Комиссии за транзакции
<a class=anchor href=#%d0%ba%d0%be%d0%bc%d0%b8%d1%81%d1%81%d0%b8%d0%b8-%d0%b7%d0%b0-%d1%82%d1%80%d0%b0%d0%bd%d0%b7%d0%b0%d0%ba%d1%86%d0%b8%d0%b8>#</a></h2><p>До сих пор я показывал только воображаемые блоки с одной транзакцией – транзакцией, в которой майнер получает вознаграждение. Это называется &ldquo;coinbase-транзакция&rdquo;.</p><p><em>Она названа не в честь компании Coinbase. Компания назвала себя в честь coinbase-транзакций, а не наоборот. Не путайте.</em></p><p>Помимо coinbase-транзакций, блок содержит транзакции, в которых люди платят друг другу. Вот воображаемый пример:</p><div class=imageWrapper><img src=/img/mining/12.webp></div><p>На этот раз я не стал утруждать себя поиском настоящего хэша (на самом деле настоящий хэш указан в блоке 200 001). Нонс я придумал просто для развлечения, но обратите внимание, что в него можно вложить сообщение.</p><p><em>Многим известно, что Сатоши включил слова “Chancellor on brink of second bailout for banks” (&ldquo;Канцлер на грани повторного спасения банков&rdquo;) из газетного заголовка того дня в первый блок Биткоина (генезис-блок).</em></p><div class=imageWrapper><img src=/img/mining/13.webp></div><p>Важно то, что в блок, используемый нами в качестве примера, включены 132 транзакции (показаны не все). Посмотрите на транзакцию #132 – 2.3 биткоина тратятся, чтобы перевести 2.1 биткоина на один адрес, а также на 0.1 – на второй (я использовал точки, чтобы сократить длину адресов).</p><p>Таким образом, источник с 2.3 биткоина отправляет в общей сложности 2.2 биткоина (2.1 + 0.1 = 2.2). Пропала ли 0.1 биткоина? Нет, эту разницу забирает себе майнер, и я сейчас объясню в чем дело.</p><p>Майнеру разрешено выплатить себе 25 биткоинов в качестве вознаграждения за блок (поскольку прошло 210 000 блоков, вознаграждение уменьшилось вдвое – с 50 до 25). Но если вы присмотритесь к coinbase-транзакции, то увидите, что она равна 27.33880022 BTC. Дополнительные 2.33880022 биткоина поступают из 132 транзакций в блоке – сумма входов при отправке монет немного первышает сумму выходов. Таким образом, майнер получает возможность забрать эти &ldquo;брошенные&rdquo; биткоины себе в качестве оплаты. Это считается комиссией за транзакции, выплачиваемой майнеру.</p><p><em>Размер блока ограничен. Когда Биткоин только появился, пользователи могли отправлять транзакции без комиссии, и майнеры включали их в блок. Но теперь пользователей стало гораздо больше, и, поскольку попадание в следующий блок является конкурентным, пользователи добавляют к транзакции комиссию, чтобы побудить майнера выбрать именно их транзакцию.</em></p><p>Поэтому, когда вознаграждение за блок неуклонно снижается, уменьшаясь вдвое каждые четыре года и стремясь к нулю, майнеры все равно получают оплату за проделанную работу.</p><p><em>Некоторые предполагают, что в один прекрасный день вознаграждение майнеров станет недостаточным и приведет к краху Биткоина. Это предположение было полностью <a href=/21-million-ne-podlezhit-obsuzhdeniyu/>опровергнуто</a>, и я не буду возвращаться к этой теме.</em></p><h2 id=может-ли-блок-быть-перезаписан>Может ли блок быть перезаписан?
<a class=anchor href=#%d0%bc%d0%be%d0%b6%d0%b5%d1%82-%d0%bb%d0%b8-%d0%b1%d0%bb%d0%be%d0%ba-%d0%b1%d1%8b%d1%82%d1%8c-%d0%bf%d0%b5%d1%80%d0%b5%d0%b7%d0%b0%d0%bf%d0%b8%d1%81%d0%b0%d0%bd>#</a></h2><p>Это крайне маловероятно, и стоит понять, почему. Тогда вы поймете, почему транзакции Биткоина являются необратимыми.</p><p>Ранее я объяснял, что хэш предыдущего блока включается в текущий блок. Таким образом, любое редактирование транзакций в старом блоке изменяет хэш этого отредактированного блока. Но этот хэш записывается в следующий блок, а значит, следующий блок тоже нужно обновлять. Но если вы измените хэш, записанный в следующем блоке, то и его хэш изменится, и так далее.</p><p>При любом изменении вы потеряете все эти прекрасные нули в хэше и получите хэш случайного вида. Вам придется проделать всю работу заново, чтобы подобрать хэш с нужным количеством нолей. Если вы сделаете это для блока, который вы пытались отредактировать, вам придется повторить работу для следующего блока, и следующего, и так до самого последнего блока. Вы не можете просто остановиться на старом блоке, потому что правила Биткоина таковы, что самая длинная цепочка блоков является настоящей историей Биткоина. Если вы вернетесь на 10 блоков назад и отредактируете блок, у вас больше не будет самой длинной цепочки. Вам придется добавить еще 10 блоков, а затем еще немного, потому что, пока вы создавали эти 10 блоков, реальная цепочка, вероятно, стала немного длиннее. Вам придется участвовать в гонке, чтобы обогнать реальную цепочку. Если это удастся, то новая версия станет настоящей.</p><p>Повторение коллективных усилий всего мира по хэшированию от редактируемого блока до последнего блока – это барьер для редактирования истории Биткоина. Энергия была потрачена на создание этих хэшей со невероятными количеством нолей, и чтобы отредактировать Биткоин, эти энергозатраты необходимо повторить. Вот почему энергия, используемая для добычи Биткоина, не является &ldquo;потраченной впустую&rdquo;; она используется для защиты реестра Биткоина от редактирования, чтобы сделать бухгалтерскую книгу неизменяемой без необходимости доверять центральному органу.</p><h2 id=что-произойдет-если-два-майнера-одновременно-найдут-блок>Что произойдет, если два майнера одновременно найдут блок?
<a class=anchor href=#%d1%87%d1%82%d0%be-%d0%bf%d1%80%d0%be%d0%b8%d0%b7%d0%be%d0%b9%d0%b4%d0%b5%d1%82-%d0%b5%d1%81%d0%bb%d0%b8-%d0%b4%d0%b2%d0%b0-%d0%bc%d0%b0%d0%b9%d0%bd%d0%b5%d1%80%d0%b0-%d0%be%d0%b4%d0%bd%d0%be%d0%b2%d1%80%d0%b5%d0%bc%d0%b5%d0%bd%d0%bd%d0%be-%d0%bd%d0%b0%d0%b9%d0%b4%d1%83%d1%82-%d0%b1%d0%bb%d0%be%d0%ba>#</a></h2><p>Это действительно происходит время от времени, и всегда все решается следующим образом.</p><p>Каждый узел получит один из новых почти одновременных блоков, примет его и отвергнет тот, что придет несколько мгновений спустя. Это приводит к расколу сети, но это временно.</p><p>Для примера назовем один из блоков синим, а другой – красным (у них нет цвета, просто представьте, что я их временно окрасил).</p><p>Затем майнеры работают над следующим блоком, но при часть майнеров строит продлевает цепочку поверх синего блока, а часть – поверх красного.</p><p>Допустим, выигравший майнер нашел блок, используя синюю цепочку. Он отправит новый блок всем узлам, и самая длинная цепочка станет очевидной. Узлы, изначально принявшие красную цепочку, откажутся от нее и примут синюю. Все майнеры, работавшие над красной цепочкой, прекратят работу над ней и теперь будут работать над самой длинной цепочкой, которой является синяя. Красная цепочка мертва.</p><h2 id=приложение>Приложение
<a class=anchor href=#%d0%bf%d1%80%d0%b8%d0%bb%d0%be%d0%b6%d0%b5%d0%bd%d0%b8%d0%b5>#</a></h2><h3 id=почему-блок-майнера-занявшего-второе-место-является-недействительным>Почему блок майнера, занявшего второе место, является недействительным
<a class=anchor href=#%d0%bf%d0%be%d1%87%d0%b5%d0%bc%d1%83-%d0%b1%d0%bb%d0%be%d0%ba-%d0%bc%d0%b0%d0%b9%d0%bd%d0%b5%d1%80%d0%b0-%d0%b7%d0%b0%d0%bd%d1%8f%d0%b2%d1%88%d0%b5%d0%b3%d0%be-%d0%b2%d1%82%d0%be%d1%80%d0%be%d0%b5-%d0%bc%d0%b5%d1%81%d1%82%d0%be-%d1%8f%d0%b2%d0%bb%d1%8f%d0%b5%d1%82%d1%81%d1%8f-%d0%bd%d0%b5%d0%b4%d0%b5%d0%b9%d1%81%d1%82%d0%b2%d0%b8%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d1%8b%d0%bc>#</a></h3><p>Предположим, что блок 700 000 только что был найден Майнером-A. Тридцать секунд спустя Майнер-B также создал другую версию блока 700 000. Когда Майнер-B опубликует этот вариант, каждый узел отвергнет его, потому что они уже видели и приняли блок от Майнера-A. Более того, за эти 30 секунд, допустим, Майнер-C нашел блок 700 001. Учитывая, что конкурирующий 700 000-й блок Майнера-B не удлиняет текущую цепочку (которая уже дошла до 700 001), он будет отклонен и по этой причине.</p><p>Еще интереснее то, что если бы Майнер-B работал над блоком 700 001, а не над конкурирующей версией 700 000, у него было бы столько же шансов найти действительный блок 700 001, сколько и найти в итоге альтернативный блок 700 000. Поэтому, как только майнер видит новый блок, он должен направить свои усилия на построение следующего.</p><p>Однако если Майнер-B нашел блок 700 000 через секунду после Майнера-A, то, в зависимости от географического положения и скорости интернета, возможно, что одни узлы увидят первым блок Майнера-A, а другие – блок Майнера-B. В этом случае возникает временная развилка, и некоторые майнеры будут работать над продлением одной версии, в то время как другие майнеры будут работать над продлением другой. Как объяснялось ранее с помощью терминов &ldquo;синяя цепочка&rdquo; и &ldquo;красная цепочка&rdquo;, в конечном итоге одна из версий продвинется дальше другой и единогласно станет действительной версией.</p></article><hr><i>Connect to our relay to leave a comment. <a href=https://21ideas.org/en/comments/>Details</a>.<br>Подключитесь к нашему релею, чтобы оставить комментарий. <a href=https://21ideas.org/comments/>Подробнее</a>.</i>
<zap-threads anchor=https://21ideas.org/mining-walkthrough/ author=npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l relays=wss://21ideas.nostr1.com disable=replyAnonymously legacy-url=true></zap-threads><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#хэш-функции>Хэш-функции</a></li><li><a href=#майнинг>Майнинг</a></li><li><a href=#выигрыш-блока>Выигрыш блока</a></li><li><a href=#корректировка-сложности>Корректировка сложности</a></li><li><a href=#халвинг>Халвинг</a></li><li><a href=#комиссии-за-транзакции>Комиссии за транзакции</a></li><li><a href=#может-ли-блок-быть-перезаписан>Может ли блок быть перезаписан?</a></li><li><a href=#что-произойдет-если-два-майнера-одновременно-найдут-блок>Что произойдет, если два майнера одновременно найдут блок?</a></li><li><a href=#приложение>Приложение</a><ul><li><a href=#почему-блок-майнера-занявшего-второе-место-является-недействительным>Почему блок майнера, занявшего второе место, является недействительным</a></li></ul></li></ul></li></ul></nav></div></aside></main><script src=/static/scripts.js></script></body></html>