<!doctype html><html lang=ru dir=ltr><head><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel=stylesheet><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="В этой статье мы рассмотрим, что такое CoinJoin, как он работает и как правильно его использовать. Мы поговорим в основном о Whirlpool, самой эффективной, на мой взгляд, реализации CoinJoin на сегодняшний день, но также рассмотрим и другие существующие реализации."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=lightning content="21ideas@getalby.com"><meta property="og:title" content="Понимание и использование CoinJoin"><meta property="og:description" content="В этой статье мы рассмотрим, что такое CoinJoin, как он работает и как правильно его использовать. Мы поговорим в основном о Whirlpool, самой эффективной, на мой взгляд, реализации CoinJoin на сегодняшний день, но также рассмотрим и другие существующие реализации."><meta property="og:type" content="article"><meta property="og:url" content="https://21ideas.org/privacy/coinjoin/"><meta property="og:image" content="https://21ideas.org/img/coinjoin-pandul/cjp-01.jpg"><title>Понимание и использование CoinJoin | 21ideas</title>
<link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon media="(prefers-color-scheme: dark)" sizes=180x180 href=/apple-touch-icon-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=32x32 href=/favicon-32x32-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=16x16 href=/favicon-16x16-dark.png><link rel=alternate hreflang=en href=https://21ideas.org/en/privacy/coinjoin/ title="CoinJoin Overview"><link rel=stylesheet href=/book.min.a88fda41628a86b0aa4a3caa9c8ab466ee8e01a433898186e506a93fb98f1884.css integrity="sha256-qI/aQWKKhrCqSjyqnIq0Zu6OAaQziYGG5QapP7mPGIQ=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/ru.search.min.1fbc76bd1c0143c2d942c8f1ffa73e7c3676eb9d3fe3fe50e862f0275fcfb686.js integrity="sha256-H7x2vRwBQ8LZQsjx/6c+fDZ2650/4/5Q6GLwJ1/PtoY=" crossorigin=anonymous></script><script type=text/javascript src=https://unpkg.com/zapthreads@0.5.2/dist/zapthreads.iife.js></script><script defer data-domain=21ideas.org src=https://plausible.io/js/script.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><picture><source srcset=/svg/logo_white.svg media="(prefers-color-scheme: dark)"><img src=/svg/logo_black.svg alt=Logo>
</picture><span>21ideas</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Поиск aria-label=Поиск maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Русский</a></label><ul><li><a href=https://21ideas.org/en/privacy/coinjoin/>English</a></li></ul></li></ul><ul><li><input type=checkbox id=section-b0dafb98a5d0578d631a1c9dd29bee81 class=toggle>
<label for=section-b0dafb98a5d0578d631a1c9dd29bee81 class="flex justify-between"><a href=/start/>Старт</a></label><ul><li><a href=/glossary/>Глоссарий</a></li><li><a href=/start/start/>Что такое Биткоин?</a></li><li><a href=/start/guide/>Используем биткоин</a></li><li><a href=/course/>Биткоин от А до Я</a></li><li><a href=/bitcoin-myths/>Разрушаем мифы о Биткоине</a></li><li><a href=/shitcoin-casino/>Не играйте в щиткоин-казино</a></li></ul></li><li><input type=checkbox id=section-f4a619252679302c899a690180d7ffa2 class=toggle checked>
<label for=section-f4a619252679302c899a690180d7ffa2 class="flex justify-between"><a href=/theory/>Теория</a></label><ul><li><input type=checkbox id=section-356070beafdf88b67731f5d7a38cd521 class=toggle>
<label for=section-356070beafdf88b67731f5d7a38cd521 class="flex justify-between"><a href=/economics/>Экономика</a></label><ul><li><input type=checkbox id=section-9c21df0254e6f531458131e593d77332 class=toggle>
<label for=section-9c21df0254e6f531458131e593d77332 class="flex justify-between"><a href=/pzv/>Постепенно, затем внезапно</a></label><ul><li><a href=/pzv/postepenno-zatem-vnezapno/>Введение</a></li><li><a href=/pzv/bitkoin-nelzya-skopirovat/>Биткоин нельзя скопировать</a></li><li><a href=/pzv/bitkoin-ne-slishkom-volatilen/>Биткоин не слишком волатилен</a></li><li><a href=/pzv/bitkoin-ne-tratit-energiyu-zrya/>Биткоин не тратит энергию зря</a></li><li><a href=/pzv/bitkoin-ne-slishkom-medlennyj/>Биткоин не слишком медленный</a></li><li><a href=/pzv/bitkoin-eto-ispravit/>Биткоин это исправит</a></li><li><a href=/pzv/bitkoin-ne-blokchejn/>Биткоин, не блокчейн</a></li><li><a href=/pzv/bitkoin-nichem-ne-podkreplen/>Биткоин ничем не подкреплен?</a></li><li><a href=/pzv/bitkoin-ne-finansovaya-piramida/>Биткоин — не финансовая пирамида</a></li><li><a href=/pzv/bitkoin-ne-mozhet-byt-zabanen/>Биткоин не может быть забанен</a></li><li><a href=/pzv/bitkoin-ne-dlya-prestupnikov/>Биткоин не для преступников</a></li><li><a href=/pzv/bitkoin-obescenivaet-ostalnye-dengi/>Биткоин обесценивает остальные деньги</a></li><li><a href=/pzv/bitkoin-zov-k-edineniyu/>Биткоин — зов к единению</a></li><li><a href=/pzv/bitkoin-eto-zdravyj-smysl/>Биткоин — это здравый смысл</a></li><li><a href=/pzv/bitkoin-antihrupok/>Биткоин антихрупок</a></li><li><a href=/pzv/bitkoin-velikaya-definancializaciya/>Биткоин — великая дефинанcиализация</a></li></ul></li><li><input type=checkbox id=section-f75619703a6dc5d9286c6f2682febebb class=toggle>
<label for=section-f75619703a6dc5d9286c6f2682febebb class="flex justify-between"><a href=/sb/>Становление Биткоина</a></label><ul><li><a href=/sb/stanovlenie-intro/>Введение</a></li><li><a href=/sb/stanovlenie-1/>О времени</a></li><li><a href=/sb/stanovlenie-2/>О людях</a></li><li><a href=/sb/stanovlenie-3/>Знакомьтесь: деньги</a></li><li><a href=/sb/stanovlenie-4/>Поворот не туда</a></li><li><a href=/sb/stanovlenie-5/>Цифровая редкость</a></li><li><a href=/sb/stanovlenie-6/>Цифровые контракты</a></li><li><a href=/sb/stanovlenie-7/>Недостающие части головоломки</a></li></ul></li><li><a href=/bitkoin-ne-vredit-okruzhayushej-srede/>Биткоин и окружающая среда</a></li><li><a href=/sem-setevyh-effektov-bitkoina/>Семь сетевых эффектов Биткоина</a></li><li><a href=/hozyaeva-i-raby-deneg/>Хозяева и рабы денег</a></li><li><a href=/strukturnaya-perestrojka/>Структурная перестройка</a></li><li><a href=/v-zashchitu-deflyacii/>В защиту дефляции</a></li><li><a href=/sravnenie-monetarnyh-standartov/>Сравнение монетарных стандартов</a></li><li><a href=/negativnye-effekty-neftedollara/>Негативные внешние эффекты нефтедоллара</a></li><li><a href=/raskoshelivaemsya/>Раскошеливаемся (Shelling Out): Происхождение денег</a></li><li><a href=/bitcoin-i-ritmy-istorii/>Биткоин и ритмы истории</a></li><li><a href=/bitcoin-i-internet-cikly-hopfa/>Биткоин и интернет-циклы Хопфа</a></li><li><a href=/dengi-blokchejny-i-socialnaya-masshtabiruemost/>Деньги, блокчейны и социальная масштабируемость</a></li><li><a href=/chto-takoe-dengi/>Что такое деньги</a></li><li><a href=/vyzhivaet-silnejshij/>Выживает сильнейший</a></li><li><a href=/strategiya-dca/>Стратегия DCA</a></li><li><a href=/jevons-paradox/>Парадокс Джевонса: Обратная истина</a></li><li><a href=/kak-rabotajut-dengi/>Как работают деньги</a></li></ul></li><li><input type=checkbox id=section-25dd0684538231cc6c8c9cfa92ec4aa8 class=toggle>
<label for=section-25dd0684538231cc6c8c9cfa92ec4aa8 class="flex justify-between"><a href=/security/>Безопасность</a></label><ul><li><a href=/kak-hranit-kljuchi/>Биткоин-кошельки. Зачем и как хранить свои приватные ключи</a></li><li><a href=/seed/>Что такое сид-фраза?</a></li><li><a href=/seed-security/>Как обезопасить свои сид-фразы?</a></li><li><a href=/passphrase/>Насколько надежна ваша парольная фраза?</a></li><li><a href=/multisig/>Все о мультисиг</a></li><li><a href=/hwws/>Сравнение аппаратных кошельков</a></li><li><a href=/multisig-1/>Мультисиг. Часть I</a></li><li><a href=/multisig-2/>Мультисиг. Часть II: Отдельные ключи – основа мультиподписи</a></li></ul></li><li><input type=checkbox id=section-aff498226e3572dbd162673efd80256d class=toggle checked>
<label for=section-aff498226e3572dbd162673efd80256d class="flex justify-between"><a href=/privacy/>Приватность</a></label><ul><li><a href=/privacy/luchshie-praktiki/>Как сохранить приватность?</a></li><li><a href=/privacy/no-kyc/>Никаких KYC, берегите персональные данные</a></li><li><a href=/privatnost-v-seti-bitcoin/>Приватность в сети Биткоин</a></li><li><a href=/bitcoin-stanovitsya-kriticheski-vazhnym/>Биткоин становится критически важным</a></li><li><a href=/bip47-ili-gadkij-utenok/>BIP47, или гадкий утенок</a></li><li><input type=checkbox id=section-e925ecbcdc92e383b7ea825222e52704 class=toggle>
<label for=section-e925ecbcdc92e383b7ea825222e52704 class="flex justify-between"><a href=/privacy/oxt/>Понимание приватности в сети Биткоин с помощью OXT</a></label><ul><li><a href=/privacy/oxt-1/>Часть 1: Анализ цепочки и приватность транзакций</a></li><li><a href=/privacy/oxt-2/>Часть 2: Ключевые концепции анализа цепочки</a></li><li><a href=/privacy/oxt-3/>Часть 3: Защита от анализа цепочки</a></li><li><a href=/privacy/oxt-4/>Часть 4: Применение концепций анализа цепочки для улучшения приватности пользователей</a></li></ul></li><li><a href=/privacy/coinjoin/ class=active>Понимание и использование CoinJoin</a></li><li><a href=/bitcoin-fungibility/>Взаимозаменяемость Биткоина</a></li><li><a href=/freesamourai/>#FreeSamourai</a></li></ul></li><li><input type=checkbox id=section-0c147b062aca36b71690569b35776e24 class=toggle>
<label for=section-0c147b062aca36b71690569b35776e24 class="flex justify-between"><a href=/protocol/>Протокол</a></label><ul><li><a href=/kto-kontroliruet-bitkoin-kor/>Кто контролирует Bitcoin Core?</a></li><li><a href=/vechnaja-borba/>Вечная борьба Биткоина</a></li><li><a href=/ob-udobstve-vzaimodejstvija-s-bitcoinom/>Об удобстве взаимодействия с Биткоином</a></li><li><a href=/bitcoin-zoloto-2-0/>Биткоин: цифровое золото или пиринговая наличность?</a></li><li><a href=/upravlenie-bitcoin/>Управление Биткоином</a></li><li><a href=/doverennye-tretyi-storony/>Доверенные третьи стороны — это бреши в системе безопасности</a></li><li><a href=/21-million-ne-podlezhit-obsuzhdeniyu/>21 миллион не подлежит обсуждению</a></li><li><a href=/proof-of-work/>Proof of Work: доказательство проделанной работы</a></li><li><a href=/proof-of-stake-eto-skam/>Proof of Stake – это скам</a></li><li><a href=/byl-li-satoshi-zhadnym-majnerom/>Был ли Сатоши жадным майнером?</a></li><li><a href=/segwit/>Что такое SegWit</a></li><li><a href=/taproot/>Что такое Taproot</a></li><li><a href=/bomby-slozhnosti-ethereum/>Бомбы сложности Ethereum</a></li><li><a href=/rgb/>Разбирая протокол RGB</a></li><li><a href=/halving/>Что такое Биткоин-халвинг?</a></li><li><a href=/difficulty/>О корректировке сложности майнинга</a></li><li><a href=/sravnenie-tipov-bitcoin-adresov/>Типы биткоин-адресов</a></li><li><a href=/myths-about-halving/>Мифы о Биткоин-халвинге</a></li><li><a href=/mining-walkthrough/>SHA256 и майнинг в сети Биткоин</a></li><li><input type=checkbox id=section-b92a36e5ae31c3fd403b01b9c2ec1c8b class=toggle>
<label for=section-b92a36e5ae31c3fd403b01b9c2ec1c8b class="flex justify-between"><a href=/protocol/utxo/>Что такое UTXO и как ими управлять?</a></label><ul><li><a href=/protocol/utxo-1/>Что такое UTXO?</a></li><li><a href=/protocol/utxo-2/>Как избежать высоких комиссий при большом количестве UTXO</a></li><li><a href=/protocol/utxo-3/>Приватность UTXO</a></li></ul></li><li><a href=/timestamps/>Временны́е метки в Биткоине</a></li><li><a href=/transaction-size/>Размер транзакции</a></li><li><a href=/o-zakostenenii-protokola/>О закостенении протокола</a></li></ul></li><li><input type=checkbox id=section-06b1b370d2d0779d84f03a0910de7588 class=toggle>
<label for=section-06b1b370d2d0779d84f03a0910de7588 class="flex justify-between"><a href=/history/>История</a></label><ul><li><input type=checkbox id=section-139f117b6284888a0eef6a640eb6c1bd class=toggle>
<label for=section-139f117b6284888a0eef6a640eb6c1bd class="flex justify-between"><a href=/gf/>Генезис-файлы</a></label><ul><li><a href=/gf/genesis-intro/>Пролог</a></li><li><a href=/gf/genesis-1/>Часть I: eCash Дэвида Чаума и зарождение мечты шифропанков</a></li><li><a href=/gf/genesis-2/>Часть II: Hashcash или как Адам Бэк разработал сердце Биткоина</a></li><li><a href=/gf/genesis-3/>Часть III: Если у Биткоина был прототип, то это были b-money Вэя Дая</a></li><li><a href=/gf/genesis-4/>Часть IV: Создавая Bit Gold, Сабо был в двух шагах от изобретения Биткоина</a></li><li><a href=/gf/genesis-5/>Часть V: Как поиски цифровой наличности привели Хэла Финни к созданию RPOW (и не только)</a></li></ul></li><li><a href=/hal-finney/>Хэл Финни — жизнь и смерть легенды движения шифропанков</a></li><li><a href=/bitcoin-and-me/>Биткоин и я</a></li><li><a href=/bitcoin-reformaciya/>Биткоин-Реформация</a></li><li><a href=/bitcoin-forks/>Полная история консенсус-форков Биткоина</a></li><li><a href=/analyzing-2013-fork/>Анализ форка Биткоина 2013 года</a></li><li><input type=checkbox id=section-75b9ecb484c68d9cfe79cb170ea1cece class=toggle>
<label for=section-75b9ecb484c68d9cfe79cb170ea1cece class="flex justify-between"><a href=/sr/>Silk Road</a></label><ul><li><a href=/sr/silkroad-1/>Скаут, Биткоин и грибы</a></li><li><a href=/sr/silkroad-2/>Первые успехи и неудачи нарко-Amazon'a</a></li><li><a href=/sr/silkroad-3/>Ужасный Пират Робертс</a></li><li><a href=/sr/silkroad-4/>Компания, заработавшая тысячи биткоинов</a></li><li><a href=/sr/silkroad-5/>Тёмная сторона Silk Road</a></li><li><a href=/sr/silkroad-6/>Розыск и арест Росса Ульбрихта</a></li></ul></li></ul></li><li><input type=checkbox id=section-af85ae42a802ac9fce098ca6b8d6a65b class=toggle>
<label for=section-af85ae42a802ac9fce098ca6b8d6a65b class="flex justify-between"><a href=/philosophy/>Философия</a></label><ul><li><input type=checkbox id=section-d0147c75204bce6530fbcf41d2d36549 class=toggle>
<label for=section-d0147c75204bce6530fbcf41d2d36549 class="flex justify-between"><a href=/chemu-ya-nauchilsya-u-bitcoina/>Чему я научился у Биткоина?</a></label><ul><li><a href=/chemu-ya-nauchilsya-u-bitcoina/filosofskie-uroki-bitcoina/>Часть1. Философские уроки Биткоина</a></li></ul></li><li><a href=/ne-shitcoin/>Биткоин, не щиткоин</a></li><li><a href=/neotemlemye-prava-sobstvennosti/>Неотъемлемые права собственности</a></li><li><a href=/manifest-kriptoanarhista/>Манифест криптоанархиста</a></li><li><a href=/manifest-shifropanka/>Манифест шифропанка</a></li><li><a href=/tyulpannaya-lihoradka/>Биткоин — современная голландская тюльпанная лихорадка?</a></li><li><a href=/vse-moshenniki/>Все — мошенники</a></li><li><a href=/svoboda-cennosti/>Свобода ценности</a></li><li><a href=/bitcoin-meme/>Биткоин — единственный реальный мем</a></li><li><a href=/nol-i-bitcoin/>Ноль и Биткоин</a></li><li><a href=/crypto-bro/>Дорогие крипто- и фиат-бро</a></li><li><a href=/boremsya-s-poddelnymi-bitcoin/>Боремся с поддельными биткоинами</a></li><li><a href=/bit%D1%81oin-eto-micelij/>Биткоин — это мицелий</a></li><li><a href=/pochemu-bitcoin-zhivoj-organizm/>Доказательство жизни. Почему Биткоин — живой организм</a></li><li><a href=/samaya-mirnaya-revolyuciya/>Самая мирная революция</a></li><li><a href=/o-bitcoin-vselennoj/>О Биткоин-вселенной</a></li><li><a href=/bitcoin-dissidenty/>Биткоин-диссиденты</a></li><li><a href=/bitcoin-svoboda/>Биткоин = свобода</a></li></ul></li><li><input type=checkbox id=section-fdb518469e72600e21abd65af5ea6171 class=toggle>
<label for=section-fdb518469e72600e21abd65af5ea6171 class="flex justify-between"><a href=/future/>Будущее</a></label><ul><li><input type=checkbox id=section-b59a8856c56e2e0372711e9188dfebe9 class=toggle>
<label for=section-b59a8856c56e2e0372711e9188dfebe9 class="flex justify-between"><a href=/ba/>Биткоин-астрономия</a></label><ul><li><a href=/ba/1/>Постгипербиткоинизация</a></li><li><a href=/ba/2/>Миллион крошечных миров</a></li><li><a href=/ba/3/>Первый контакт</a></li></ul></li><li><a href=/ej-bitcoin-pritormozi/>Эй, Биткоин, притормози</a></li><li><a href=/apokalipsis/>Сможет ли Биткоин пережить апокалипсис?</a></li><li><a href=/bitcoin-i-teplovaya-energiya-okeanov/>Биткоин и тепловая энергия океанов</a></li></ul></li><li><input type=checkbox id=section-43599378ef9b0927116f5c672d4753eb class=toggle>
<label for=section-43599378ef9b0927116f5c672d4753eb class="flex justify-between"><a href=/lightning/>Лайтнинг</a></label><ul><li><a href=/chto-takoe-laitning/>Что такое Лайтнинг?</a></li><li><a href=/lajtning-koshelki/>Лайтнинг-кошельки</a></li><li><a href=/lajtning-adresa/>Лайтнинг-адреса</a></li><li><a href=/privatnost-v-lajtning/>Приватность в сети Lightning</a></li><li><a href=/centralizovanna-li-set-lightning/>Централизованна ли сеть Lightning?</a></li><li><a href=/mekhanizm-raboty-lightning/>Механизм работы Lightning Network</a></li><li><a href=/problema-vhodyashchej-likvidnosti/>Решение проблемы входящей ликвидности</a></li></ul></li></ul></li><li><input type=checkbox id=section-d4e0b36756ff8942d2ab4055a855ff29 class=toggle>
<label for=section-d4e0b36756ff8942d2ab4055a855ff29 class="flex justify-between"><a href=/practice/>Практика</a></label><ul><li><input type=checkbox id=section-306de2e6e6c2e950b9ae3bd383e891b8 class=toggle>
<label for=section-306de2e6e6c2e950b9ae3bd383e891b8 class="flex justify-between"><a href=/practice/buy/>Покупка</a></label><ul><li><a href=/newbie-buy/>Покупка и хранение биткоина для новичков</a></li><li><a href=/hodl-hodl/>Покупка биткоина без KYC на Hodl Hodl</a></li><li><a href=/robosats/>RoboSats: Приватный p2p обмен</a></li></ul></li><li><input type=checkbox id=section-7e507c15445415f4a6c6ff107fd5be67 class=toggle>
<label for=section-7e507c15445415f4a6c6ff107fd5be67 class="flex justify-between"><a href=/practice/hodl/>Хранение</a></label><ul><li><a href=/electrum/>Кошелек Электрум</a></li><li><a href=/blue/>Кошелек Blue</a></li><li><a href=/seedsigner/>SeedSigner: оффлайн-крепость для ваших биткоинов</a></li><li><a href=/holodnyj-koshelek-iz-starogo-smartfona/>Холодный кошелек из старого смартфона</a></li><li><a href=/coldcard/>Что такое Coldcard?</a></li></ul></li><li><input type=checkbox id=section-cc823275546413520de75cb290b6340f class=toggle>
<label for=section-cc823275546413520de75cb290b6340f class="flex justify-between"><a href=/practice/interact/>Взаимодействие</a></label><ul><li><a href=/practice/bitcoin-node/>Каждому следует запустить собственную Биткоин-ноду!</a></li><li><a href=/orangepilling-in-5-min/>Оранжпиллинг за 5 минут</a></li><li><a href=/5-tips-for-teaching-bitcoin/>5 советов по обучению Биткоину</a></li></ul></li><li><input type=checkbox id=section-15aa48ccf00c4a6077461082e56e8a87 class=toggle>
<label for=section-15aa48ccf00c4a6077461082e56e8a87 class="flex justify-between"><a href=/docs/Practice/security/>Практики безопасности</a></label><ul><li><a href=/pgp-verify/>Проверка подлинности программ с помощью PGP</a></li></ul></li><li><input type=checkbox id=section-7a6d0f6b85d630f151cfac100463320e class=toggle>
<label for=section-7a6d0f6b85d630f151cfac100463320e class="flex justify-between"><a href=/practice-privacy/>Практики приватности</a></label><ul><li><input type=checkbox id=section-0937c773447ed958013e7f991c3cfc8e class=toggle>
<label for=section-0937c773447ed958013e7f991c3cfc8e class="flex justify-between"><a href=/practice-privacy/dojo/>Установка Биткоин-узла Dojo на x86</a></label><ul><li><a href=/practice-privacy/dojo-0/>Введение</a></li><li><a href=/practice-privacy/dojo-1/>Установка Bitcoin Core и Tor</a></li><li><a href=/practice-privacy/dojo-2/>Установка индексатора Fulcrum</a></li><li><a href=/practice-privacy/dojo-3/>Установка блокчейн-обозревателя Mempool</a></li><li><a href=/practice-privacy/dojo-4/>Установка Samourai Dojo</a></li><li><a href=/practice-privacy/dojo-5/>Конфигурация межсетевого экрана</a></li><li><a href=/practice-privacy/dojo-6/>Установка обновлений пакетов</a></li></ul></li><li><a href=/practice-privacy/ronindojo/>Установка RoninDojo на x86</a></li><li><a href=/grapheneos/>GrapheneOS: Избавляемся от слежки Google на смартфоне</a></li></ul></li><li><input type=checkbox id=section-9ce9af3be32641dfee9cee88793362a5 class=toggle>
<label for=section-9ce9af3be32641dfee9cee88793362a5 class="flex justify-between"><a href=/practice/lightning/>Лайтнинг на практике</a></label><ul><li><a href=/phoenix/>Кошелек Phoenix</a></li><li><a href=/lnbits/>LNbits – швейцарский нож среди лайтнинг-приложений</a></li><li><a href=/alby-i-nostr/>Alby и Nostr</a></li><li><a href=/zapplanner/>Подписки с помощью Лайтнинг</a></li><li><a href=/zapgram/>Телеграм-бот ZapGram</a></li><li><a href=/ochishchaem-bitcoin-cherez-lajtning/>Очищаем биткоины через сеть Лайтнинг</a></li><li><a href=/likvidnost-v-lajtning/>Руководство по управлению ликвидностью в сети Lightning</a></li><li><a href=/mutiny/>Кошелек Mutiny</a></li></ul></li></ul></li><li><input type=checkbox id=section-8d344ddc25268a9861446f8e4c24f2ef class=toggle>
<label for=section-8d344ddc25268a9861446f8e4c24f2ef class="flex justify-between"><a href=/rabbithole/>Кроличья нора</a></label><ul><li><a href=/books/>Книги</a><ul></ul></li><li><a href=/videos/>Видео</a><ul></ul></li><li><a href=/audiobooks/>Аудиокниги</a><ul></ul></li><li><a href=/pods/>Подкасты</a><ul></ul></li></ul></li></ul><div class=menuSep></div><ul><li><a href=/posts/>Блог</a></li><li><a href=/glossary/>Глоссарий</a></li><li><a href=/calendar/>Биткоин-календарь</a></li><li><input type=checkbox id=section-380047aa906f67ecf269300a9eda240b class=toggle>
<label for=section-380047aa906f67ecf269300a9eda240b class="flex justify-between"><a href=/contribute/>Принять участие</a></label><ul><li><a href=/syntax/>Оформление статей</a></li><li><a href=/github/>Как добавить статью?</a></li><li><a href=/obsidian/>Публикация статей через Obsidian</a></li></ul></li><li><a href=/feedback/>Обратная связь</a></li></ul><div class=menuBlock><div id=metrics-container class=metrics-container><div id=metrics-label></div><div id=metrics-value></div></div></div></nav><footer><br><a class=menuSocialButton href=https://t.me/bitcoin21ideas target=_blank title=Telegram><svg viewBox="0 0 25 25"><path d="m12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12c0-6.627-5.373-12-12-12zm5.894 8.221-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002.0-.003.0-.005.0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121L8.32 13.617l-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=https://github.com/21ideas-org/21ideas.org target=_blank title=GitHub><svg viewBox="0 0 820 820"><path d="M4e2 9.9C179.11 9.9.0 189 0 409.94.0 585.6 113.24 734.86 270.71 788.61l2.83.83c20 3.76 27.34-8.59 27.34-19.24.0-9.49-.32-34.68-.5-68-111.27 24.14-134.75-53.68-134.75-53.68a106.58 106.58.0 00-44.09-58.26l-.43-.24c-36.23-24.81 2.8-24.3 2.8-24.3A84.06 84.06.0 01185 606.54l.22.4a85.24 85.24.0 00116.92 33l-.43.21A85.16 85.16.0 01327 586.7C238.19 576.67 144.8 542.25 144.8 389c0-.72.0-1.55.0-2.38a153.82 153.82.0 0141.27-105l-.08.11a139.82 139.82.0 01-8.56-48.58 141.91 141.91.0 0112.4-58.21l-.37.91s33.51-10.72 110 41c30-8.56 64.43-13.5 1e2-13.5a378.09 378.09.0 01102.68 14.14l-2.67-.64c76-51.72 109.51-41 109.51-41a144 144 0 0112 58.07 145.56 145.56.0 01-8.35 48.82l.32-1a154.37 154.37.0 0141 105c0 .83.0 1.63.0 2.43V389c0 153.68-93.5 187.51-182.52 197.35a95.48 95.48.0 0127.27 66.93c0 2.48-.11 5-.3 7.42v-.32c0 53.54-.51 96.54-.51 109.53.0 10.51 7 23 27.51 19C686.25 734.78 8e2 585.39 8e2 409.41 8e2 188.74 621.11 9.87 400.47 9.87H4e2z"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=https://njump.me/npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l target=_blank title=Nostr><svg viewBox="0 0 820 820"><path d="M4e2 797.5c219.53.0 397.5-178 397.5-397.5S619.53 2.5 4e2 2.5 2.5 180.47 2.5 4e2 180.47 797.5 4e2 797.5zM598.23 242.15c6.82 8.46 10.35 18.14 11.45 28.86 1.7 16.37-2.68 31.17-11.2 45-14.19 23.62-43.17 39.63-45.85 41-5.42 2.86-7.42 7.12-7.06 13.34s-1.21 37.19-20 50.83c-9.68 7-48.64 16-66.6 19.05a28.61 28.61.0 00-13.18 5.37c-1 .67-2 1.36-3.2 2.06-6.82 4.27-31.23 38-35.31 45.48l10.66-3.27c21.2-6.53 66.85-20.6 69.52-21 9-1.4 15.89 1.22 20.34 7.79 3.63 5.41 7.18 10.81 10.75 16.25.61.94 1.23 1.87 1.85 2.81 1 1.54 2 3.08 2.93 4.62.48.78 1 1.55 1.45 2.32l1.52 2.38c.09.14.19.29.28.45a10.65 10.65.0 011.37 2.83c.24 1 .91 4.14-.92 6.09-1.7 1.77-4.63 1.77-6.21 1.34a15.65 15.65.0 01-5.6-2.8l-2.49-2.13c-2-1.71-5.73-2.56-8.71-2.44-3.41.13-8-1-10.11-2.37-4.2-2.74-5.35-9.56-5.35-9.68a3.51 3.51.0 00-3.72-2.86 18.58 18.58.0 00-6.28 1.15l-.78.25q-15 4.56-29.93 9.24h0l-14.31 4.45c-7.06 2.19-14.12 4.38-21.13 6.69a37.45 37.45.0 00-5.72 2.62c-.43.21-.84.43-1.25.64l-1.24.64h0c-.85.42-1.7.85-2.55 1.34l-.27.15a30.59 30.59.0 01-5.76 2.65c-7.12 2.13-13.39-1-16.32-8.1-1.88-4.63-.18-13.76.86-16.44 5.58-14.35 21.77-39.58 26.28-46.6.75-1.17 1.17-1.83 1.17-1.86-.36-.12-23.25 9.07-27 11.93-10.35 7.86-34.64 26.49-35 28.31A22.75 22.75.0 01331 508.13c-5.66 2.19-9.13 6.7-12.48 11.08.0.0-60.88 83.83-65 88.34l-.68.74c-2.83 3-12.28 13.16-15 18.13-.46.83-1.61 3.27-2.58 5.33-.6 1.26-1.13 2.38-1.38 2.89.0.05-.05.11-.08.17-.59 1.21-1.91 3.9-6.31 3.66s-4.79-6.12-5-9.09v-.4c-.54-6.88 1-13.7 4.63-20.82a6.46 6.46.0 01.31-.58c1-1.8 3.93-7 2.61-11.36s-2.61-11.14-.6-14.61c2.84-4.77 7.62-5.48 13.92-6.41l2.64-.41c5.29-.85 9.13-3.53 12.84-8.88 4.66-6.84 17-24.51 27.65-39.67C293.62 516 3e2 507 302.66 503.09a25.55 25.55.0 003.77-9.08c1.89-9.74 7.85-16.49 18.14-20.7 2.25-.85 43.17-35.06 43.17-39.45.0-3.1-4.45-4.87-7.92-5.78-.48-.12-26.24-6.82-37.92-12.12A88.58 88.58.0 01305 406.41c-7.53-5.54-22.23-3.16-25.3-2.67l-.27.05c-11 1.58-19.12 6.51-28.37 12.78-1.65 1.16-10.05 4.2-14.31 1.77-1.32-.75-2.9-1.6-4.65-2.54-9.16-4.92-22.91-12.31-28.59-20.9-3.11-4.69-2.68-12.42-.49-20.94 7.07-19.73 17.48-28.56 36.77-33.91 11.39-3.95 32.41-5.33 46.84-6.28 2.93-.19 5.59-.37 7.84-.54.12-.05.8-.09 1.94-.18 7-.51 31.32-2.27 49.13-11.39 1.61-.82 3.59-1.92 5.91-3.2 17.67-9.8 55.68-30.86 107.76-29.25 12.95.4 32.15 7.45 49.77 13.93 14.79 5.43 28.46 10.45 36.38 10.79 17.65.73 26.54-1.22 36.77-11.81 2.92-3.05 15.16-29.53 3.59-44a108.64 108.64.0 00-13.94-14.55q-2.28-1.94-4.59-3.85a183.79 183.79.0 01-15.8-14.29c-13.82-14.61-18.09-34.58-11.51-50.17 4.14-10.9 13-15.65 25.63-13.15 6.22 1.24 11.28 5.49 15.95 9.41a73.24 73.24.0 005.84 4.59c3.6 2.38 9.56 3.78 13.46 4.69 4.93 1.16 8.65 4.93 8.4 7.49s-6.7 4.75-13 4.26c-7.36-.49-20.09-.55-27.7 2-5.05 1.83-7.3 7.49-5.84 13 1.22 4.57 10.9 12.66 14.55 15.65 1.64 1.35 3.3 2.67 5 4C587.86 231.81 593.56 236.34 598.23 242.15z" fill-rule="evenodd"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=/rss title=RSS><svg viewBox="-143 145 525 525"><path d="M113 145c-141.4.0-256 114.6-256 256s114.6 256 256 256 256-114.6 256-256S254.4 145 113 145zM43.1 518.7c-6.2 6.2-14.7 9.9-24.1 9.9-9.4.0-17.8-3.8-24-9.9-6.2-6.2-10-14.6-10-23.9.0-9.4 3.8-17.8 10-24s14.6-10 24-10 17.9 3.8 24 10c6.2 6.2 10 14.6 10 24C53 504.2 49.2 512.6 43.1 518.7zM104.8 529c-.1-32.1-12.5-62.3-35.1-84.9-22.6-22.6-52.8-35.2-84.7-35.2V360c46.6.0 88.7 19 119.3 49.6s49.5 72.8 49.6 119.4H104.8zm87.2.0c-.1-114.2-92.8-207.1-206.9-207.1V273c70.6.0 134.5 28.7 180.8 75.1 46.3 46.4 75 110.3 75.1 180.9H192z"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=https://www.youtube.com/@21ideas target=_blank title=YouTube><svg viewBox="0 0 25 25"><path d="M12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12S18.627.0 12 0zm4.441 16.892c-2.102.144-6.784.144-8.883.0C5.282 16.736 5.017 15.622 5 12c.017-3.629.285-4.736 2.558-4.892 2.099-.144 6.782-.144 8.883.0C18.718 7.264 18.982 8.378 19 12c-.018 3.629-.285 4.736-2.559 4.892zM10 9.658l4.917 2.338L10 14.342V9.658z"/></svg></a></footer><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class="book-page book-page-page"><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Понимание и использование CoinJoin</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#coinjoin-и-смешивание-биткоинов>CoinJoin и смешивание биткоинов</a></li><li><a href=#различные-реализации-coinjoin>Различные реализации CoinJoin</a><ul><li><a href=#joinmarket>JoinMarket</a></li><li><a href=#wasabi-20>Wasabi 2.0</a></li></ul></li><li><a href=#теория-работы-whirlpool>Теория работы Whirlpool</a><ul><li><a href=#модель-whirlpool>Модель Whirlpool</a></li><li><a href=#пулы-и-комиссии>Пулы и комиссии</a></li><li><a href=#аккаунты-whirlpool>Аккаунты Whirlpool</a></li><li><a href=#tx0>Tx0</a></li><li><a href=#аккаунт-doxxic-change>Аккаунт Doxxic Change</a></li><li><a href=#аккаунт-premix>Аккаунт Premix</a></li><li><a href=#аккаунт-postmix>Аккаунт Postmix</a></li><li><a href=#уровни-анонимности-anon-sets>Уровни анонимности (Anon Sets)</a></li><li><a href=#whirlpool-stats-tool-wst>Whirlpool Stats Tool (WST)</a></li><li><a href=#использование-калькулятора-больцмана>Использование калькулятора Больцмана</a></li><li><a href=#утечка-xpub>Утечка xpub?</a></li></ul></li><li><a href=#руководство-whirlpool-в-кошельке-sparrow>Руководство: Whirlpool в кошельке Sparrow</a></li><li><a href=#руководство-whirlpool-cli-на-сервере-dojo-и-whirlpool-gui>Руководство: Whirlpool CLI на сервере Dojo и Whirlpool GUI</a><ul><li><a href=#шаг-1-подготовка-dojo>Шаг 1: Подготовка Dojo</a></li><li><a href=#шаг-2-подготовка-кошелька>Шаг 2: Подготовка кошелька</a></li><li><a href=#шаг-3-подготовка-whirlpool-gui>Шаг 3: Подготовка Whirlpool GUI</a></li><li><a href=#шаг-4-смешивание>Шаг 4: Смешивание!</a></li></ul></li><li><a href=#лучшие-практики-для-utxo-после-смешивания>Лучшие практики для UTXO после смешивания</a><ul><li><a href=#utxo-после-смешивания>UTXO после смешивания</a></li><li><a href=#utxo-doxxic-сдачи>UTXO Doxxic-сдачи</a></li></ul></li><li><a href=#инструменты-для-траты-utxo>Инструменты для траты UTXO</a><ul><li><a href=#payjoin--stowaway>PayJoin — Stowaway</a></li><li><a href=#stonewall>Stonewall</a></li><li><a href=#stonewallx2>StonewallX2</a></li><li><a href=#ricochet>Ricochet</a></li></ul></li><li><a href=#можно-ли-смешивать-биткоины>Можно ли смешивать биткоины?</a><ul><li><a href=#внешние-источники>Внешние источники:</a></li></ul></li></ul></li></ul></nav></aside></header><div class=pageCover><picture><img src=/img/coinjoin-pandul/cjp-01.jpg alt=Cover></picture></div><h1>Понимание и использование CoinJoin в сети Биткоин</h1><div class=pageDate>19 июля 2022 г.</div><article class=markdown><p>В этой статье мы рассмотрим, что такое CoinJoin, как он работает и как правильно его использовать. Мы поговорим в основном о Whirlpool, самой эффективной, на мой взгляд, реализации CoinJoin на сегодняшний день, но также рассмотрим и другие существующие реализации.</p><blockquote class="book-hint btc"><p>Перевод <a href=https://www.pandul.fr/post/comprendre-et-utiliser-le-coinjoin-sur-bitcoin>статьи</a> <a href=https://twitter.com/Loic_Pandul>Лоика Мореля</a></p><p><a href=/contribute/>Поддержать проект</a></p></blockquote><p>Одна из первоначальных проблем любой одноранговой платежной системы — двойные траты. Как предотвратить злоупотребление платежной сетью со стороны злоумышленников, которые могут потратить одни и те же средства несколько раз, не обращаясь при этом к центральному органу?</p><p>Сатоши Накамото решил эту проблему с помощью своего протокола Биткоин — одноранговой электронной платежной сети, работающей без вмешательства какого-либо центрального органа. В своей <a href=/whitepaper>&ldquo;Белой книге&rdquo;</a> он объясняет, что единственный способ подтвердить происхождение транзакции, а значит, и убедиться в отсутствии попытки двойного расходования средств, — это быть в курсе всех транзакций, проводимых в распределенной платежной сети.</p><p>Чтобы каждый пользователь был в курсе транзакций, те должны быть публично объявлены. Таким образом, одноранговая система платежей, предлагаемая протоколом Биткоин, стала возможной благодаря полностью прозрачной и распределенной инфраструктуре. Это означает, что любой обладатель узла может проверить цепочку электронных подписей и историю каждой монеты, начиная с момента ее создания майнером.</p><blockquote class="book-hint info">Этот принцип распределения реестра и публичного объявления о новых транзакциях уже применялся в более ранних моделях криптовалюты, таких как b-money, изобретенной <a href=/gf/genesis-3>Вэй Даем</a> в 1998 году.</blockquote><p>Такая прозрачность и распределенность означает, что каждый пользователь сети Биткоин может отслеживать и наблюдать за транзакциями всех остальных пользователей. Поэтому приватность невозможна на уровне платежей. Вместо этого она обеспечивается на уровне персональной идентификации.</p><p>Вместо того чтобы связывать каждую учетную единицу с персональным идентификатором (фамилией, именем и т. д.), как в традиционной банковской системе, биткоины ассоциируются с парой ключей. Таким образом, пользователи анонимно представлены криптографическим идентификатором.</p><p>Потеря приватности в Биткоине происходит, когда наблюдатель может установить связь между определенными UTXO (грубо говоря, монетами) и определенными пользователями. Когда такая связь устанавливается между пользователем и его UTXO, появляется возможность отслеживать его платежи и анализировать историю передвижения его биткоинов.</p><p>CoinJoin — это способ разорвать историю UTXO, чтобы повысить уровень приватности пользователей сети Биткоин.</p><p>В этой статье мы рассмотрим, что такое CoinJoin, как он работает и как правильно его использовать. Мы поговорим в основном о Whirlpool, самой эффективной, на мой взгляд, реализации CoinJoin на сегодняшний день, но также рассмотрим и другие существующие реализации. Я также расскажу о показателях, которые можно использовать для расчета уровня приватности ваших биткоинов. Чтобы не увязнуть в теории, я покажу вам на практике, как провести CoinJoin-транзакцию различными способами. Наконец, мы рассмотрим лучшие практики, которых следует придерживаться, чтобы не потерять приватность, заработанную после серии CoinJoin-транзакций, и я познакомлю вас с различными инструментами в кошельке Samourai, которые позволят вам это сделать.</p><p>Если вам понравилась эта статья, пожалуйста, поделитесь ею в социальных сетях и со своими знакомыми.</p><blockquote class="book-hint info"><em>Если вы начинающий пользователь Биткоин, то перед прочтением этой статьи я настоятельно рекомендую вам разобраться в структуре Биткоин-транзакции (UTXO, входы и выходы), прочитав <a href=/izobretaem-bitkoin/glava-7/#%d0%be%d1%82%d1%81%d0%bb%d0%b5%d0%b6%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%be%d1%81%d1%82%d0%b0%d1%82%d0%ba%d0%be%d0%b2>раздел</a> из книги &ldquo;Изобретаем Биткоин&rdquo;.</em></blockquote><blockquote class="book-hint btc"><p><em>Использование CoinJoin может представлять косвенные риски для его пользователя. Некоторые поставщики услуг могут заблокировать ваши средства и/или ваш счет в результате ваших действий и попросить вас обосновать происхождение этих средств. Информация, содержащаяся в этой статье, не является советом по компьютерным системам и программному обеспечению, а также не побуждает вас к проведению CoinJoin.</em></p><p><em>CoinJoin требует использования программного кошелька, подключенного к Интернету (известного как &ldquo;горячий кошелек&rdquo;). Существует вероятность того, что ваши средства могут быть потеряны и/или украдены.</em></p><p><em>Я советую провести собственное исследование возможных рисков. Данная статья — далеко не единственный источник информации по этим вопросам.</em></p></blockquote><blockquote class="book-hint info"><p><em>В 2023 году компанией Trezor в сотрудничестве с Wasabi Wallet была произведена первая в истории реализация CoinJoin с использованием аппаратного кошелька.</em></p><p><em>— Прим. переводчика</em></p></blockquote><h2 id=coinjoin-и-смешивание-биткоинов>CoinJoin и смешивание биткоинов
<a class=anchor href=#coinjoin-%d0%b8-%d1%81%d0%bc%d0%b5%d1%88%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b1%d0%b8%d1%82%d0%ba%d0%be%d0%b8%d0%bd%d0%be%d0%b2>#</a></h2><p>Прежде чем приступить к работе, важно понять разницу между CoinJoin и смешиванием.</p><p>Смешивание (также известное как &ldquo;<em>mixer</em>&rdquo;, &ldquo;<em>blender</em>&rdquo; или &ldquo;<em>tumbler</em>&rdquo;) — это техника, используемая для смешивания UTXO (т. е. смешивания биткоинов), чтобы разорвать их историю и запутать процесс отслеживания. Цель этого типа операций — псевдонимизировать UTXO, чтобы пользователь получил бо́льшую приватность. Псевдонимизация происходит, когда UTXO входит в группу из нескольких других неотличимых друг от друга UTXO.</p><p>Смешивание и CoinJoin — это две техники с одинаковой целью, но работают они по-разному. Смешивание опирается на доверенную третью сторону, которой мы доверяем свои биткоины для смешивания, в то время как CoinJoin опирается исключительно на координатора, который синхронизирует действия пользователей, но никогда не имеет контроля над средствами.</p><p>Смешивание быстро потеряло популярность, когда появился CoinJoin, по сей день привлекающий все больше и больше пользователей. До сих пор существует несколько сервисов смешивания, такие как ChipMixer, однако сегодня эта техника существует лишь на периферии.</p><p>В повседневном языке биткоинеров многие используют слово &ldquo;миксер&rdquo; для обозначения CoinJoin. Даже если эта семантика изначально неверна, она стала общепринятой среди пользователей. Термин &ldquo;смешанные биткоины&rdquo; используется для обозначения UTXO, выпущенных в результате CoinJoin-транзакции.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-02.jpg></div><p>CoinJoin — это техника для разрыва истории UTXO. Она основана на совместной транзакции с особой структурой — CoinJoin-транзакции. Этот тип транзакции был предложен Грегори Максвеллом в 2013 году на форуме Bitcoin Talk: <a href="https://bitcointalk.org/index.php?topic=279249.0">https://bitcointalk.org/index.php?topic=279249.0</a>.</p><p>Общая схема работы такова: разные пользователи, желающие смешать UTXO, вносят определенную сумму в качестве входов в транзакцию. Эти входы преобразуются в выходы с одинаковой суммой (возможно, со сдачей, но об этом мы поговорим позже). Поэтому в результате транзакции невозможно определить, какой выход принадлежит тому или иному пользователю. Технически, между входами и выходами CoinJoin-транзакции нет никакой связи. Связь между каждым пользователем и каждым UTXO нарушена, как и история каждой монеты.</p><p>Чтобы участники имели контроль над своими средствами в любой момент, транзакция сначала создается координатором, а затем передается каждому пользователю. Затем каждый пользователь самостоятельно подписывает транзакцию, проверяя, соответствует ли она его требованиям, после чего все подписи добавляются к транзакции. Если кто-то из пользователей или координатор попытается украсть средства у других, изменив выходные данные в CoinJoin-транзакции, то подписи будут недействительными, и транзакция будет отклонена узлами.</p><p>Если использовать аналогию, то CoinJoin можно представить как погоню вертолета за автомобилем. Представим себе вертолет, пытающийся преследовать белый автомобиль. Вертолет представляет человека, который хочет проанализировать ваши платежи, а белая машина — ваш UTXO. Вертолет может легко преследовать машину, пролетая над ней.</p><p>Представим, что по этой дороге в непосредственной близости от преследуемого автомобиля движутся еще четыре таких же белых автомобиля. Вертолет по-прежнему может следовать за белым автомобилем, за которым он первоначально следил.</p><p>Теперь представим, пять автомобилей въезжают в туннель, что на некоторое время лишает вертолет возможности видеть эти машины. Когда они выедут из туннеля, вертолет не сможет определить, какая из пяти белых машин является той, за которой он изначально следовал. В этом примере туннель действует как CoinJoin. Ваш UTXO, выходящий из CoinJoin-транзакции, будет скрыт среди группы других UTXO. Потенциальный наблюдатель будет знать, что ваш UTXO находится в этой группе, но не сможет с уверенностью определить, какой из них ваш.</p><p>Технической задачей пользователей CoinJoin является получение максимально возможного уровня анонимности для их UTXO. Это понятие очень важно усвоить для дальнейшего изложения. Уровни анонимности (<em>Anonymity Sets</em>, или <em>Anon Sets</em>) являются параметрами, используемыми для оценки приватности UTXO. Их два: перспективный и ретроспективный.</p><p>Перспективная оценка показывает размер группы UTXO, в которой скрывается принадлежащий нам UTXO. Например, если я совершу CoinJoin с четырьмя другими пользователями, то сразу после CoinJoin-транзакции моя перспективная оценка будет равна 5.</p><p>Если вернуться к примеру с вертолетом, то каждый белый автомобиль, выезжающий из туннеля, имеет перспективную оценку, равную 5. Вертолет знает, что его цель находится среди этой группы из пяти машин, но он не может определить, какая машина является его первоначальной целью.</p><p>Более подробно я объясню эти два параметра в разделе: <a href=/privacy/coinjoin/#%d1%83%d1%80%d0%be%d0%b2%d0%bd%d0%b8-%d0%b0%d0%bd%d0%be%d0%bd%d0%b8%d0%bc%d0%bd%d0%be%d1%81%d1%82%d0%b8-anon-sets>&ldquo;Уровни анонимности&rdquo;</a>. Пока же просто запомните, что чем выше уровни анонимности для смешанного UTXO, тем сложнее наблюдателю будет его выследить.</p><h2 id=различные-реализации-coinjoin>Различные реализации CoinJoin
<a class=anchor href=#%d1%80%d0%b0%d0%b7%d0%bb%d0%b8%d1%87%d0%bd%d1%8b%d0%b5-%d1%80%d0%b5%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d0%b8-coinjoin>#</a></h2><p>CoinJoin-транзакцию вполне можно провести вручную, напрямую с другими пользователями Биткоина. Однако, помимо того, что это очень утомительно, такое решение не очень эффективно. Для того чтобы CoinJoin-транзакция была эффективной, быстрой и охватывала всю сеть, необходимо, чтобы вы могли найти общий язык с любым другим пользователем в мире. Вместо этого мы пользуемся услугами координатора, роль которого заключается в формировании модели транзакции и реализации ее механизма, обеспечении связи различных пользователей друг с другом и передаче информации, необходимой для проведения совместной транзакции.</p><p>Существует 3 основные реализации CoinJoin в Биткоине:</p><ul><li><p><a href=https://github.com/JoinMarket-Org/joinmarket-clientserver>JoinMarket</a>;</p></li><li><p><a href=https://docs.wasabiwallet.io/using-wasabi/CoinJoin.html>Wasabi</a>;</p></li><li><p><a href=https://samouraiwallet.com/whirlpool>Whirlpool</a>.</p></li></ul><p>Несмотря на то что конечная цель этих трех реализаций одинакова – разорвать историю UTXO путем проведения CoinJoin-транзакций – работают они совершенно по-разному. Поэтому важно понять, как работает каждая из них, чтобы вы могли выбрать ту реализацию, которая лучше всего подходит для ваших нужд.</p><p>Как вы, возможно, поняли, следя за мной в <a href=https://twitter.com/Loic_Pandul>Twitter</a>, лично я предпочитаю использовать реализацию Whirlpool. Поэтому я вкратце расскажу вам о том, как теоретически работают два других решения и почему я считаю их менее подходящими. Затем мы более подробно рассмотрим, как работает Whirlpool — реализация, разработанная командой Samourai Wallet, которая, по моему мнению, является лучшим решением для CoinJoin на данный момент.</p><p><em>Характеристики, указанные для каждой реализации, актуальны на момент написания. Они могут измениться к тому времени, когда вы будете читать эту статью.</em></p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-05.gif></div><h3 id=joinmarket>JoinMarket
<a class=anchor href=#joinmarket>#</a></h3><p>JoinMarket отличается от других основных реализаций благодаря своей модели подбора пользователей. Она основана на рынке обмена между пользователями, которые предоставляют средства для смешивания, и пользователями, которые берут средства для смешивания.</p><p>Когда вы хотите сделать CoinJoin в JoinMarket, вы должны выбрать между тем, чтобы предоставить свои биткоины другим пользователям для смешивания за определенную плату, или взять средства у других пользователей для смешивания напрямую, заплатив необходимую комиссию. Таким образом, есть &ldquo;мейкеры&rdquo;, которые предоставляют свои биткоины, и &ldquo;тейкеры&rdquo;, которые используют средства. Тейкеры платят мейкерам за их услуги.</p><p>Таким образом, мы говорим о полностью свободном рынке, без каких-либо условий использования.</p><p>Главный недостаток этого сервиса заключается в том, что он довольно сложен в освоении. Для его правильного использования необходимо минимальное знание командной строки Linux. Такая реализация относительно эффективна, но она явно не подходит для широкой публики.</p><p>С точки зрения функциональности CoinJoin-транзакций, JoinMarket имеет несколько слабых мест по сравнению с Whirlpool. Например, структура CoinJoin-транзакции предполагает, что между входами и выходами не может быть 0% детерминированных связей. Также следует отметить, что JoinMarket не включает в себя инструмент для предотвращения нового CoinJoin между монетами, которые уже встречались в прошлом.</p><p>Что касается дополнительных услуг, предлагаемых пользователю, JoinMarket не включает в себя инструмент для легкого расчета уровней анонимности UTXO. Что касается инструментов для траты смешанных UTXO, то здесь предлагается только PayJoin.</p><p>В итоге, JoinMarket — это интересная реализация CoinJoin, но она не для всех. Если вам удобно работать с командной строкой, вы хорошо понимаете, как работает CoinJoin, и вам нравится модель тейкер/мейкер, то эта реализация вам подойдет.</p><blockquote class="book-hint warning">Примерно через год после написания статьи JoinMarket выпустил версию с пользовательским интерфейсом. Версия доступна для держателей биткоин-узлов, в том числе в магазинах приложений таких операционных систем как <a href=https://umbrel.com/>Umbrel OS</a>, <a href=https://start9.com>StartOS</a> и других .</blockquote><h3 id=wasabi-20>Wasabi 2.0
<a class=anchor href=#wasabi-20>#</a></h3><p>В теории сервис CoinJoin от Wasabi работает так же, как и Whirlpool. В отличие от JoinMarket, организованного в виде свободного рынка, Wasabi выступает в роли координатора, который автоматически смешивает биткоины всех пользователей сервиса.</p><p>Однако структура самой CoinJoin-транзакции сильно отличается от Whirlpool. Как мы увидим в следующем разделе, увеличение оценки перспективного уровня анонимности UTXO, смешанного в Whirlpool, основано на множестве CoinJoin с небольшим количеством пользователей каждый раз. В отличие от этого, уровень анонимности UTXO, смешанных в Wasabi, основан на нескольких транзакциях с большим числом пользователей.</p><p>Пример Coinjoin, возможно, сделанный в Wasabi 1.0: <a href=https://kycp.org/#/b994a9cbdc20e971207bde4f800b9ce99dba35478a2a997bc48e7f9f80bd2d02>https://kycp.org/#/b994a9cbdc20e971207bde4f800b9ce99dba35478a2a997bc48e7f9f80bd2d02</a>.</p><p>Пример Coinjoin, сделанный в Whirlpool: <a href=https://kycp.org/#/323df21f0b0756f98336437aa3d2fb87e02b59f1946b714a7b09df04d429dec2>https://kycp.org/#/323df21f0b0756f98336437aa3d2fb87e02b59f1946b714a7b09df04d429dec2</a>.</p><p>Эти две реализации также отличаются друг от друга способом управления сдачей. В Whirlpool сдача изолирована от остальных UTXO до CoinJoin благодаря Tx0 (об этом я расскажу в следующем разделе). В Wasabi сдача является выходом в CoinJoin-транзакции. Выбор такой структуры CoinJoin в Wasabi означает, что между входами и определенными выходами сохраняются детерминированные связи.</p><p>В версии 2.0 Wasabi полностью изменила свою политику комиссий за CoinJoin. Теперь комиссия координатора составляет 0,3 % для UTXO с суммой выше 0,01 BTC и бесплатна для UTXO, сумма которых ниже или равна 0,01 BTC. Более мелкие UTXO также получают бесплатные ремиксы. Следует отметить, что, несмотря на комиссию координатора, пользователям все равно придется платить комиссию майнерам за все транзакции, включая ремикс-транзакции.</p><p>Поэтому, в отличие от Whirlpool, чем более высокую оценку уровня анонимности вы хотите получить для вашего UTXO, тем больше вам придется заплатить. Это справедливо как для Wasabi версии 1.0, так и для версии 2.0. Даже несмотря на то, что последняя версия убирает комиссию координатора для небольших UTXO, комиссия за майнинг все равно остается. Более того, при использовании версии 2.0 у меня сложилось впечатление, что максимально возможный перспективный уровень анонимности в Wasabi составляет 300. В Whirlpool вы можете легко достичь пятизначного показателя за несколько месяцев, и этот показатель не ограничен.</p><p>Помимо самой структуры CoinJoin, на мой взгляд, Wasabi очень не хватает инструментов, дополняющих CoinJoin, особенно для правильной траты смешанных UTXO. В версии 1.0 нет такого инструмента для траты. В версии 2.0 Wasabi все же включила инструмент для расходования смешанных UTXO, который автоматически настраивает входы и выходы, чтобы максимизировать приватность за счет исключения сдачи. Хотя эта функция может быть полезной, она кажется гораздо менее эффективной и удобной в использовании, чем огромное количество инструментов, предлагаемых в Samourai и Sparrow Wallet для правильной траты UTXO, смешанных с помощью Whirlpool. Обо всех этих инструментах я расскажу позже в статье, в разделе <a href=/privacy/coinjoin/#%d0%b8%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d1%8b-%d0%b4%d0%bb%d1%8f-%d1%82%d1%80%d0%b0%d1%82%d1%8b-utxo>&ldquo;Инструменты для траты UTXO&rdquo;</a>.</p><p>В отличие от Whirlpool, Wasabi не разделяет счета для смешанных UTXO, несмешанных UTXO и UTXO сдачи. Такая структура портфеля означает, что возможно повторное использование адресов между смешанными UTXO и другими UTXO. Если это произойдет, это может полностью разрушить результат CoinJoin.</p><p>Наконец, после опробования версии 2.0 у меня осталось впечатление, что я не контролирую свой Coinjoin, когда использую Wasabi. Все упрощено и автоматизировано, пользовательский интерфейс великолепен, но разве это то, что мы ожидаем от реализации CoinJoin?</p><h2 id=теория-работы-whirlpool>Теория работы Whirlpool
<a class=anchor href=#%d1%82%d0%b5%d0%be%d1%80%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-whirlpool>#</a></h2><p>В отличие от других упомянутых реализаций, Whirlpool отличается построением &ldquo;ZeroLink&rdquo; CoinJoin-транзакций, то есть строго без возможной внутренней связи между всеми входами и всеми выходами.</p><p>Это возможно благодаря CoinJoin-транзакции, в которой каждый пользователь вносит одинаковую сумму на входах, которые преобразуются в такое же количество выходов с одинаковыми суммами.</p><p>При такой ограничительной конструкции для входов/выходов, CoinJoin-транзакция в Whirlpool является единственной, которая позволяет пользователям иметь 0% детерминированных связей между входами и выходами. Это означает, что каждый выход имеет точно такую же вероятность принадлежать пользователю, как и все остальные выходы в транзакции.</p><p>Количество участников в каждом миксе ограничено 5: 2 новых участника и 3 ремиксера (подробнее об этом мы узнаем позже). Таким образом, любая CoinJoin-транзакция в Whirlpool всегда имеет 5 входов и 5 выходов.</p><blockquote class="book-hint info"><p><em>В мае 2023 года обновление <a href=https://medium.com/samourai-wallet/introducing-whirlpool-surge-cycles-b5b484a1670f>Surge Cycles</a> позволило осуществлять CoinJoin-транзакции в Whirlpool с бо́льшим количеством участников: 6, 7 и 8 входов/выходов. В январе 2024 года, благодаря Surge Cycles, была проведена транзакция из 15 участников.</em></p><p><em>— Прим. переводчика</em></p></blockquote><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-03.png><p><em>Схематическое изображение CoinJoin-транзакции в Whirlpool</em></p></div><h3 id=модель-whirlpool>Модель Whirlpool
<a class=anchor href=#%d0%bc%d0%be%d0%b4%d0%b5%d0%bb%d1%8c-whirlpool>#</a></h3><p>Таким образом, модель, предложенная Whirlpool, основана на очень маленьких транзакциях. В отличие от Wasabi и JoinMarket, высокий показатель уровня анонимности достигается не количеством пользователей, участвующих в CoinJoin, а последовательностью нескольких небольших CoinJoin по 5 участников каждый раз.</p><p>Пользователей попросят заплатить всего один раз, когда они присоединяются к пулу, а затем они смогут делать бесплатные ремиксы столько раз, сколько захотят. При этом новые участники будут платить комиссию майнерам.</p><p>Уровень анонимности будет расти в геометрической прогрессии по мере того, как пользователь и другие участники будут делать ремиксы. Цель состоит в том, чтобы максимально использовать бесплатные ремиксы, которые каждый раз увеличивают уровень анонимности UTXO.</p><p>Whirlpool был разработан в соответствии с 2 основными критериями:</p><ul><li>Реализация должна быть удобной для использования на мобильном телефоне.</li><li>Циклы ремиксов должны быть быстрыми.</li></ul><p>По этим двум причинам команда Samourai решила ограничить количество пользователей до 5 за цикл. Меньшее число не позволило бы CoinJoin быть достаточно эффективным и слишком сильно сократило бы показатель уровня анонимности за цикл. Большее число не было бы приемлемым на мобильных клиентах и уменьшило бы количество циклов.</p><p>Наконец, в Whirlpool нет необходимости иметь большое количество участников в CoinJoin-транзакции, поскольку уровень анонимности основан на накоплении нескольких циклов смешивания.</p><h3 id=пулы-и-комиссии>Пулы и комиссии
<a class=anchor href=#%d0%bf%d1%83%d0%bb%d1%8b-%d0%b8-%d0%ba%d0%be%d0%bc%d0%b8%d1%81%d1%81%d0%b8%d0%b8>#</a></h3><p>Для того чтобы многократные циклы CoinJoin увеличивали уровень анонимности UTXO, необходимо установить определенные рамки, ограничивающие сумму каждого UTXO. В Whirlpool существует несколько различных пулов.</p><p>Пул — это группа пользователей, желающих смешивать UTXO, которые договорились о сумме UTXO для оптимизации работы CoinJoin. Каждый пул определяет фиксированную сумму UTXO, который пользователь должен предоставить, чтобы войти в него. С практической точки зрения, когда вы хотите совершить CoinJoin, вам нужно выбрать пул, в который вы хотите войти, чтобы начать смешивание. В настоящее время в Whirlpool доступны следующие пулы:</p><ul><li>0,5 BTC</li><li>0,05 BTC</li><li>0,01 BTC</li><li>0,001 BTC (100 000 сат)</li></ul><p>Так что здесь найдется место для каждого.</p><p>Каждый пул имеет максимальную сумму, которую можно ввести:</p><table><thead><tr><th style=text-align:center>Пул (BTC)</th><th style=text-align:center>Максимальная сумма (BTC)</th></tr></thead><tbody><tr><td style=text-align:center>0,5</td><td style=text-align:center>35</td></tr><tr><td style=text-align:center>0,05</td><td style=text-align:center>3,5</td></tr><tr><td style=text-align:center>0,01</td><td style=text-align:center>0,7</td></tr><tr><td style=text-align:center>0,001</td><td style=text-align:center>0,025</td></tr></tbody></table><p>Чтобы присоединиться к пулу, необходимо заплатить комиссию. Эта комиссия фиксирована для каждого пула и предназначена для выплаты вознаграждения команде, которая разрабатывает и управляет Whirlpool. Комиссия списывается только один раз, когда вы присоединяетесь к пулу. Как только вы вступите в пул, вы сможете делать ремиксы бесплатно столько раз, сколько захотите.</p><p>Здесь указаны текущие комиссии для каждого пула:</p><table><thead><tr><th style=text-align:center>Пул (BTC)</th><th style=text-align:center>Комиссия (BTC)</th></tr></thead><tbody><tr><td style=text-align:center>0,5</td><td style=text-align:center>0,0175</td></tr><tr><td style=text-align:center>0,05</td><td style=text-align:center>0,00175</td></tr><tr><td style=text-align:center>0,01</td><td style=text-align:center>​0,0005 (50 000 сат)</td></tr><tr><td style=text-align:center>0,001</td><td style=text-align:center>​0,00005 (5 000 сат)</td></tr></tbody></table><p>На этом сайте вы можете легко рассчитать расходы на смешивание в Whirlpool: <a href=https://bitcoiner.guide/wpfees/>https://bitcoiner.guide/wpfees/</a></p><p>Обратите внимание, что эти комиссии являются &ldquo;входным билетом&rdquo; в пул. Таким образом, входите ли вы в пул номиналом 0,01 с 0,01 BTC или с 0,5 BTC, комиссии будут абсолютно одинаковыми. Поэтому перед смешиванием пользователь должен спросить себя, хочет ли он платить меньше в маленьком пуле, в этом случае он получит много маленьких UTXO, или же он предпочитает использовать более крупный пул, платя больше, но получая меньше UTXO.</p><p>В конце нескольких циклов смешивания, как правило, не рекомендуется объединять несколько смешанных UTXO вместе. Это может нарушить с таким трудом достигнутую приватность. Поэтому иногда лучше использовать больший пул, даже если за это придется заплатить больше, чтобы в итоге получить меньше UTXO большего размера.</p><p>Другая комиссия, которую следует учитывать, — это комиссия за майнинг, присущая любой биткоин-транзакции. Как пользователю Whirlpool, вам придется заплатить за майнинг Tx0 и за майнинг начального микса. Все остальные ремиксы будут для вас бесплатными, так как модель оплаты Whirlpool основана на привлечении новых участников.</p><p>Каждый CoinJoin состоит из 5 пользователей. Из них 2 новых участника (премиксера) и 3 ремикера. Таким образом, два участника в каждом миксе будут оплачивать майнинг за всех 5 пользователей, а затем эти два участника, в свою очередь, смогут воспользоваться бесплатными ремиксами.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-04.png></div><p>Эта модель оплаты отличает Whirlpool от других сервисов CoinJoin тем, что уровень анонимности UTXO непропорционален комиссии, которую платит пользователь. Поэтому вы можете получить очень высокий уровень анонимности, просто заплатив комиссию пула и комиссию майнерам за две транзакции (Tx0 и начальный микс).</p><p>Конечно, пользователю также придется заплатить за майнинг, когда он захочет забрать UTXO из пула после того, как сделает множество ремиксов.</p><blockquote class="book-hint info">Как объяснялось выше, считается, что UTXO находится в пуле, когда он доступен для смешивания. Это не означает, что пользователь теряет право собственности. На протяжении всех CoinJoin-транзакций в Whirlpool вы полностью контролируете свои ключи, а значит, и свои биткоины.</blockquote><h3 id=аккаунты-whirlpool>Аккаунты Whirlpool
<a class=anchor href=#%d0%b0%d0%ba%d0%ba%d0%b0%d1%83%d0%bd%d1%82%d1%8b-whirlpool>#</a></h3><p>Чтобы организовать этот тип CoinJoin-транзакции, кошелек, использующий Whirlpool, должен иметь несколько аккаунтов.</p><p>Аккаунт — это подраздел HD-кошелька. Это разделение происходит на глубине 3 HD-кошелька, то есть на уровне xpub/xprv.</p><p>Если вам не очень понятна концепция аккаунтов в HD-кошельке, я рекомендую вам прочитать мою электронную книгу на эту тему, которую вы можете бесплатно скачать по этой <a href=https://www.pandul.fr/_files/ugd/23ab18_12775dad704646e09933bce00e4fc7c4.pdf>ссылке</a>. Я также написал отдельную <a href=https://www.pandul.fr/post/comprendre-les-chemins-de-d%C3%A9rivation-d-un-portefeuille-bitcoin>статью</a> о том, как работают пути деривации.</p><p>Вам, конечно, не нужно понимать все это, чтобы использовать Whirlpool, но просто помните, что аккаунт — это подраздел HD-кошелька, который полностью отделен от других аккаунтов и имеет свой собственный xpub/zpub.</p><blockquote class="book-hint info">Такое строгое разделение аккаунтов делает невозможным повторное использование адресов между несмешанными и смешанными в Whirlpool биткоинами.</blockquote><p>Для каждого HD-кошелька может быть создано до 2^(32/2) разных аккаунтов. Первый аккаунт, который вы используете по умолчанию в своем кошельке (даже не подозревая об этом), — это аккаунт 0'.</p><p>Когда вы используете кошелек, адаптированный для Whirlpool, он автоматически создает 5 аккаунтов:</p><ul><li>Аккаунт Deposit, имеющий индекс 0'.</li><li>Аккаунт Bad Bank (или Doxxic Change), индекс 2 147 483 644'.</li><li>Аккаунт Premix, индекс 2 147 483 645'.</li><li>Аккаунт Postmix, индекс 2 147 483 646.</li><li>Аккаунт Ricochet, индекс 2 147 483 647&rsquo; — этот аккаунт не используется непосредственно в протоколе Whirlpool, но он связан с ним. Я поделюсь подробностями ниже, в разделе, посвященном <a href=/privacy/coinjoin/#%d0%b8%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d1%8b-%d0%b4%d0%bb%d1%8f-%d1%82%d1%80%d0%b0%d1%82%d1%8b-utxo>инструментам для траты</a>.</li></ul><p>Каждый аккаунт имеет свое предназначение и будет использоваться для выполнения определенной задачи.</p><p>Все аккаунты построены из одной и той же <a href=/seed>сид-фразы</a>. Поэтому в случае проблем пользователи могут легко <a href=bezopasnost-seed-fraz/>восстановить доступ</a> ко всем своим средствам с помощью мнемонической фразы восстановления и <a href=/passphrase>парольной фразы</a>. Программному обеспечению для восстановления нужно будет сообщить, какие индексы аккаунтов используются.</p><p>Теперь давайте рассмотрим различные этапы CoinJoin в Whirlpool на этих аккаунтах.</p><h3 id=tx0>Tx0
<a class=anchor href=#tx0>#</a></h3><p>В CoinJoin все начинается с аккаунта депозита. Этот аккаунт используется по умолчанию при создании нового Биткоин-кошелька. На этот аккаунт должны быть зачислены биткоины, которые пользователь хочет смешать.</p><p>Tx0 — это первая транзакция в процессе смешивания Whirlpool. Ее цель — подготовить UTXO, подлежащие смешиванию, перед отправкой их в первый микс. Эта транзакция разделит входной UTXO на несколько UTXO, соответствующих номиналу выбранного пула. Все эти равные UTXO будут отправлены на Premix аккаунт. Оставшаяся сдача, которая не может быть включена в выбранный пул, будет отправлена на специальный аккаунт: Bad Bank (или Doxxic Change).</p><p>Tx0 также будут использована для оплаты услуг координатора.</p><p>За Tx0 вам придется заплатить комиссию майнерам.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-06.png><p><em>Источник: <a href=https://kycp.org/#/a126e48d4a6eb8d19682ec0e23ad45e76cd52b45f6c17be5068ae051d4b2cc24>KYCP.org</a></em></p></div><p>В этом примере транзакции Tx0 мы видим вход 2,2550 биткоинов с депозитного аккаунта пользователя, инициирующего Tx0. Этот вход делится на несколько UTXO, которые представляют собой:</p><ul><li>Комиссия координатора, здесь: 0,0250 ₿.</li><li>Четыре UTXO, готовые к смешиванию, которые поступают на Premix аккаунт пользователя. Эти UTXO также регистрируются у координатора.</li><li>Разница, которая не может быть включена в пул, потому что она слишком мала — это Doxxic-сдача<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, которая поступает на собственный специальный аккаунт.</li></ul><blockquote class="book-hint info">Комиссии здесь отличаются от тех, что я привел в таблице выше, потому что команда Samourai снизила комиссию в Whirlpool в марте 2021 года.</blockquote><h3 id=аккаунт-doxxic-change>Аккаунт Doxxic Change
<a class=anchor href=#%d0%b0%d0%ba%d0%ba%d0%b0%d1%83%d0%bd%d1%82-doxxic-change>#</a></h3><p>Сдача, которая не может быть введена в пул, отправляется на аккаунт Doxxic Change (также известный как &ldquo;Bad Bank&rdquo;), чтобы держать ее полностью изолированной от остальных аккаунтов.</p><p>Этот UTXO опасен для приватности пользователей, поскольку он не только все еще привязан к своему прошлому, а значит, возможно, и к личности своего владельца, но и отмечен как принадлежащий владельцу, совершившему CoinJoin.</p><p>Если этот UTXO будет объединен со смешанными UTXO, последние потеряют всю ранее полученную приватность. Если его объединить с другими Doxxic-сдачами, пользователь так же рискует потерять приватность. Поэтому к нему следует относиться с осторожностью. В <a href=/privacy/coinjoin/#utxo-doxxic-%d1%81%d0%b4%d0%b0%d1%87%d0%b8>этом разделе</a> я объясню, как именно следует поступать с этим &ldquo;токсичным&rdquo; UTXO.</p><h3 id=аккаунт-premix>Аккаунт Premix
<a class=anchor href=#%d0%b0%d0%ba%d0%ba%d0%b0%d1%83%d0%bd%d1%82-premix>#</a></h3><p>Аккаунт Premix содержит UTXO, разделенные на равные суммы во время осуществления транзакции Tx0 и готовые к смешиванию. Эти UTXO немного больше, чем номинал пула, так как они должны заплатить комиссию за майнинг их начального микса.</p><p>Как только эти UTXO перейдут в начальный микс, аккаунт Premix опустеет, и новые UTXO появятся на следующем аккаунте.</p><h3 id=аккаунт-postmix>Аккаунт Postmix
<a class=anchor href=#%d0%b0%d0%ba%d0%ba%d0%b0%d1%83%d0%bd%d1%82-postmix>#</a></h3><p>В аккаунте Postmix хранятся UTXO, смешанные в результате первоначального смешивания. В нем также хранятся все остальные UTXO, которые все еще доступны для ремиксов.</p><p>Если клиент Whirlpool запущен, UTXO в аккаунте Post Mix доступны для ремиксов. Они будут случайным образом выбраны для ремиксов.</p><p>Когда пользователи захотят потратить ремикшированные UTXO, они смогут сделать это прямо с аккаунта Postmix. Рекомендуется оставлять UTXO на этом аккаунте не только для того, чтобы их можно было бесплатно ремикшировать, но и для того, чтобы они не покидали контур Whirlpool, иначе они рискуют потерять свою приватность.</p><h3 id=уровни-анонимности-anon-sets>Уровни анонимности (Anon Sets)
<a class=anchor href=#%d1%83%d1%80%d0%be%d0%b2%d0%bd%d0%b8-%d0%b0%d0%bd%d0%be%d0%bd%d0%b8%d0%bc%d0%bd%d0%be%d1%81%d1%82%d0%b8-anon-sets>#</a></h3><p>Как объяснялось выше, уровни анонимности — это два параметра, которые позволяют рассчитать, насколько приватным является UTXO, и, следовательно, насколько эффективна ваша сессия CoinJoin.</p><p>Первый параметр — это перспективный уровень анонимности (<em>Forward-looking Anon Set</em>). Несмотря на неправильную семантику, этот показатель часто называют просто &ldquo;уровень анонимности&rdquo; для краткости.</p><p>Перспективная оценка представляет собой размер группы, в которой UTXO скрывается в данный момент времени.</p><p>Чтобы дать вам представление, перспективная оценка — это количество UTXO, которые могут соответствовать данному UTXO в будущем. Например, представим себе наблюдателя, анализирующего цепочку Биткоин в попытке отследить принадлежащий вам UTXO прежде чем он попадет в пул CoinJoin. После того как ваша монета прошла через несколько миксов, наблюдатель задается вопросом, куда она делась. Тогда он начинает отслеживать различные возможные пути и, благодаря природе CoinJoin, натыкается на несколько UTXO, которые потенциально могут совпадать с вашим. Это количество потенциальных UTXO и есть перспективная оценка вашего UTXO среди них.</p><p>Таким образом, когда будет произведена первая CoinJoin-транзакция в Whirlpool, один UTXO будет иметь перспективную оценку равную 5. Другими словами, он будет спрятан в вероятной группе из 5 UTXO:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-07.png></div><p>Если кто-то следит за моим входным UTXO, он не сможет определить, какой из 5 выходных UTXO принадлежит мне.</p><p>Эта перспективная оценка увеличивается по мере роста количества ремиксов пользователя, а также ремиксов других участников, с которыми он встретился во время предыдущих миксов. Давайте вернемся к нашему примеру с UTXO, который в настоящее время имеет перспективную оценку 5. Если этот UTXO, принадлежащий нам, будет ремикширован, то его оценка вырастет до 9.</p><p>Что действительно интересно в Whirlpool, так это то, что даже если мой UTXO не будет ремикширован, поскольку он входит в группу, в которой он неотличим от других, его оценка будет расти в соответствии с ремиксами других участников, встречавшихся в прошлом.</p><p>Представим, что наш UTXO прошел через начальный микс и поэтому имеет оценку 5. Если UTXO, присутствующий в этом же миксе, пройдет через новый микс, то оценка моего UTXO увеличится до 9, хотя он не двигался с момента первого микса:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-08.png></div><p>Это увеличение перспективной оценки происходит по экспоненте, поскольку, если UTXO, который я встретил в своем первом ремиксе, будет смешан еще раз, то мой уровень анонимности снова увеличивается:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-09.png></div><p>Такой экспоненциальный рост возможен благодаря уникальной модели Whirlpool, состоящей из множества последовательных небольших CoinJoin-транзакций.</p><p>Напоминаю, что все ремиксы бесплатны, поэтому имеет смысл позволить своим UTXO смешиваться снова и снова с UTXO других участников, пока вам не нужно тратить принадлежащие вам UTXO.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-10.gif></div><p>Второй показатель, который можно определить для оценки уровня приватности данного UTXO — это ретроспективный уровень анонимности (<em>Backward-looking Anon Set</em>).</p><p>Этот показатель, ориентированный на прошлое, представляет собой наследие, оставленное вам смешиваниями, предшествовавшими вашему начальному миксу. Он определяет количество Tx0, которые могут соответствовать вашему смешанному UTXO.</p><p>Таким образом, по нему можно судить о степени приватности UTXO в случае попытки отслеживания, противоположной рассмотренной выше.</p><p>Перспективный уровень используется для оценки того, насколько мы приватны в случае попытки отслеживания от UTXO в начале цикла CoinJoin до нашего UTXO в конце. Ретроспективный уровень используется для оценки того, насколько конфиденциальным является входной UTXO, если в качестве отправной точки для отслеживания взять выходной UTXO. Другими словами, мы идем в обратном направлении.</p><p>Например, представим, что наблюдатель цепочки Биткоин знает о неком UTXO и хотел бы проследить, откуда он взялся, чтобы попытаться определить его происхождение. Затем он увидит, что этот UTXO пересек CoinJoin, и он столкнется с множеством UTXO на входах в CoinJoin, которые потенциально могут быть тем, что он ищет. Это количество потенциальных UTXO и есть ретроспективная оценка отслеживаемого UTXO.</p><p>Чтобы рассчитать этот ретроспективный показатель, сначала нужно подсчитать все входные UTXO из Tx0 в транзакции, содержащей целевой UTXO. Затем нам нужно проанализировать UTXO для ремикса на входе этой транзакции и отследить их до 3 предыдущих транзакций CoinJoin, из которых они произошли. Для каждой из этих трех транзакций мы выполним аналогичный расчет. Мы продолжаем в том же духе, пока не достигнем генезис-транзакции CoinJoin, то есть первой CoinJoin-транзакции в пуле.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-11.png></div><p>На приведенной выше диаграмме расчет ретроспективной оценки одного из UTXO, выходящего из CoinJoin на самом верху, сводится к подсчету количества Tx0 (синих пузырьков), присутствующих в CoinJoin-транзакциях, поднимающихся к целевому CoinJoin от генезис-транзакции.</p><p>В отличие от перспективного уровня анонимности UTXO, который начинается с 5 после первого микса и затем увеличивается, ретроспективный показатель UTXO сразу же становится очень высоким после того, как вы сделали свой первый микс. Чем больше UTXO смешивали до вас, тем выше его ретроспективная оценка. Вы получаете выгоду от наследия предыдущих миксов в выбранном пуле.</p><h3 id=whirlpool-stats-tool-wst>Whirlpool Stats Tool (WST)
<a class=anchor href=#whirlpool-stats-tool-wst>#</a></h3><p>Чтобы легко рассчитать уровни анонимности одного из ваших смешанных UTXO в Whirlpool, вы можете воспользоваться программой <a href=https://code.samourai.io/whirlpool/whirlpool_stats>Whirlpool Stats Tool (WST)</a>. Это инструмент, специально разработанный для подсчета ваших уровней анонимности в Whirlpool.</p><p>Если вы являетесь пользователем RoninDojo, этот инструмент уже предустановлен на вашей ноде. Чтобы получить доступ к нему из RoninCLI, перейдите по ссылке:</p><pre tabindex=0><code>Samourai Toolkit &gt; Whirlpool Stat Tool
</code></pre><p><strong>Если у вас нет RoninDojo, вы можете установить инструмент WST на машину под управлением Linux следующим образом:</strong></p><p>Вам понадобится: Tor Browser (или Tor), Python 3.4.4 или выше, git и pip3.</p><p>Чтобы проверить версию установленных программ, введите команды:</p><pre tabindex=0><code>python --version
git --version
pip --version
</code></pre><p>Установите зависимости:</p><pre tabindex=0><code>pip install PySocks
pip install requests[sock5]
pip install plotly
pip install datasketch
pip install numpy
</code></pre><p>Установите программу Whirlpool Stats Tool:</p><pre tabindex=0><code>#Клонируйте репозиторий:
git clone https://code.samourai.io/whirlpool/whirlpool_stats.git

#Перейдите в каталог whirlpool_stats:
cd whirlpool_stats

#Установите зависимости с помощью pip:
pip3 install -r ./requirements.txt
</code></pre><blockquote class="book-hint info">У меня лично возникло несколько проблем с последней версией WST. Если она у вас не работает, вы можете клонировать предыдущую версию с github, которая отлично работает: <a href=https://github.com/Samourai-Wallet/whirlpool_stats>https://github.com/Samourai-Wallet/whirlpool_stats</a>. Следующие шаги будут такими же. Только учтите, что пула на 100 000 сатов в то время не существовало, поэтому вам придется добавить его в код вручную, если вы используете старый релиз.</blockquote><p>Затем создайте рабочий каталог для хранения данных транзакций и запустите WST:</p><pre tabindex=0><code>#Перейдите в нужную директорию, например, домашнюю (ваш home):
cd ~

#Создайте специальный каталог, например, с именем &#34;wst&#34;:
mkdir wst

#Перейдите в поддиректорию whirlpool_stats:
cd whirlpool_stats/whirlpool_stats/

#Запустите WST:
python3 wst.py
</code></pre><p><strong>После установки и запуска WST вы можете рассчитать уровни анонимности. Эти шаги одинаковы как на обычной машине, так и на RoninDojo:</strong></p><p>Введите следующую команду, чтобы запустить прокси в Tor (для RoninDojo это должна быть именно эта команда):</p><pre tabindex=0><code>socks5 127.0.0.1:9050
</code></pre><p>Если вы используете Tor Browser, он должен быть запущен, и команда будет выглядеть так:</p><pre tabindex=0><code>socks5 127.0.0.1:9150
</code></pre><p>Затем используйте команду <em>workdir</em> для доступа к рабочему каталогу, созданному на предыдущем шаге. Если вы находитесь в RoninDojo, пропустите этот шаг:</p><pre tabindex=0><code>workdir /home/psyduck/wst

#Замените имя пользователя в вашем пути к каталогу.
</code></pre><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-12.png></div><p>Затем скачайте данные из пула, содержащего вашу транзакцию:</p><pre tabindex=0><code>download 0001

#Замените 0001 на интересующий вас код пула.
</code></pre><p>Коды пулов в WST следующие:</p><ul><li>Пул 0,5 BTC: 05</li><li>Пул 0,05 BTC: 005</li><li>Пул 0,01 BTC: 001</li><li>Пул 0,001 BTC: 0001</li></ul><p>После скачивания данных загрузите их с помощью команды:</p><pre tabindex=0><code>load 0001

#Замените 0001 на интересующий вас код пула.
</code></pre><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-13.png></div><p>После загрузки данных введите команду <em>score</em>, а затем свой TXID (идентификатор транзакции), чтобы получить свои уровни анонимности:</p><pre tabindex=0><code>score TXID

#Замените TXID на ваш идентификатор транзакции.
</code></pre><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-14.png></div><p>WST отобразит оценку уровня анонимности, ориентированного на прошлое (<em>Backward-looking metrics</em>), и оценку уровня, ориентированного на будущее (<em>Forward-looking metrics</em>). Помимо оценок уровней анонимности, WST также рассчитывает коэффициент распространения вашего UTXO в пуле (<em>spread</em>) в соответствии с уровнем анонимности.</p><blockquote class="book-hint info"><p><em>Значение спреда позволяет нам понять, есть ли еще возможность значительно увеличить уровни анонимности или мы приближаемся к максимуму, который может предложить этот пул.</em></p><p><em>Приведем пример: если всего в пуле 100 UTXO, ожидающих ремикса, и ваш UTXO имеет перспективный уровень 70, то спред этого UTXO составляет 70%.</em></p><p><em>— Прим. переводчика</em></p></blockquote><p>Обратите внимание, что перспективная оценка для вашего UTXO рассчитывается на основе TXID вашего начального микса, а не последнего. В отличие от этого, ретроспективный показатель UTXO рассчитывается по TXID последнего цикла.</p><h3 id=использование-калькулятора-больцмана>Использование калькулятора Больцмана
<a class=anchor href=#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%ba%d0%b0%d0%bb%d1%8c%d0%ba%d1%83%d0%bb%d1%8f%d1%82%d0%be%d1%80%d0%b0-%d0%b1%d0%be%d0%bb%d1%8c%d1%86%d0%bc%d0%b0%d0%bd%d0%b0>#</a></h3><blockquote class="book-hint btc">Данный раздел взят из другой <a href=https://www.pandul.fr/post/installer-et-utiliser-son-n%C5%93ud-bitcoin-ronindojo>статьи</a> <a href=https://twitter.com/Loic_Pandul>Лоика Мореля</a></blockquote><p>Калькулятор Больцмана - это инструмент, позволяющий легко рассчитать различные расширенные показатели Биткоин-транзакции, в том числе уровень ее энтропии. Все эти данные позволят вам оценить уровень приватности транзакции и обнаружить любые ошибки. Этот инструмент предустановлен на ноде RoninDojo.</p><p>Чтобы получить доступ к нему из RoninCLI, подключитесь по SSH, затем перейдите в меню:</p><pre tabindex=0><code>Samourai Toolkit &gt; Boltzmann Calculator
</code></pre><blockquote class="book-hint info"><p><strong>Если у вас нет RoninDojo, вы можете установить калькулятор Больцмана на машину под управлением Linux следующим образом:</strong></p><p>Вам понадобится: Python 3.3.3 или выше, git и pip3.</p><pre tabindex=0><code>#Клонируйте репозиторий:
git clone https://code.samourai.io/oxt/boltzmann.git

#Перейдите в каталог boltzmann:
cd boltzmann

#Установите зависимости с помощью pip:
pip3 install -r ./requirements.txt
</code></pre><p>Для запуска программы перейдите в подкаталог boltzmann, который находится внутри папки склонированного репозитория:</p><pre tabindex=0><code>cd boltzmann
</code></pre><p>Запустите программу с параметром --help, чтобы получить список поддерживаемых параметров:</p><pre tabindex=0><code>python3 ludwig.py --help
</code></pre><p>По умолчанию калькулятор использует API blockchain.info. Вы можете использовать API от Blockstream с помощью опции --blockstream или, для большей приватности, свою собственную ноду, указав параметр --rpc.</p><p>Кроме того, для использования вашего Биткоин-узла, необходимо задать переменные окружения, чтобы калькулятор мог к нему подключиться: BOLTZMANN_RPC_USERNAME, BOLTZMANN_RPC_PASSWORD, BOLTZMANN_RPC_HOST, BOLTZMANN_RPC_PORT. Например:</p><pre tabindex=0><code>export BOLTZMANN_RPC_USERNAME=myusername
export BOLTZMANN_RPC_PASSWORD=mysecretpassword
#Используйте значение &#34;127.0.0.1&#34;, если запускаете калькулятор непосредственно на машине с Биткоин-нодой
export BOLTZMANN_RPC_HOST=127.0.0.1
export BOLTZMANN_RPC_PORT=8332
</code></pre><p>В вашем bitcoin.conf должны быть указаны следующие параметры:</p><pre tabindex=0><code>rpcuser=myusername
#Используйте надежный пароль
rpcpassword=mysecretpassword
rpcport=8332
txindex=1
</code></pre><p>Запустите программу с идентификаторами интересующих вас транзакций, указав их в параметре --txids через запятую, например:</p><pre tabindex=0><code>python3 ludwig.py --blockstream --txids=8e56317360a548e8ef28ec475878ef70d1371bee3526c017ac22ad61ae5740b8,812bee538bd24d03af7876a77c989b2c236c063a5803c720769fc55222d36b47
</code></pre><p><em>— Прим. переводчика</em></p></blockquote><p>Прежде чем рассказать, как использовать этот инструмент, я объясню, что представляют собой эти метрики, как они рассчитываются и для чего используются.</p><p>Эти показатели можно использовать для любой Биткоин-транзакции, но они особенно интересны для изучения качества Coinjoin-транзакции.</p><p><strong>Первый показатель</strong>, рассчитываемый этой программой, - количество возможных комбинаций. В калькуляторе он обозначен как <em>&ldquo;Nb combinations&rdquo;</em>. Учитывая суммы UTXO, этот показатель представляет собой количество возможных сопоставлений входов с выходами.</p><p>Другими словами, этот показатель представляет собой количество возможных интерпретаций для данной транзакции. Например, для CoinJoin со структурой Whirlpool 5x5 количество возможных комбинаций будет равно 1496:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-67.png><p><em>Источник: <a href=https://kycp.org/#/fe5e5abab7ea452f87603f7ebc2fa4e77380eafcc927e1cb51e1a72401ab073d>https://kycp.org/#/fe5e5abab7ea452f87603f7ebc2fa4e77380eafcc927e1cb51e1a72401ab073d</a></em></p></div><p><strong>Второй показатель</strong> — энтропия транзакции (<em>&ldquo;Tx entropy&rdquo;</em>). Учитывая, что количество возможных комбинаций для транзакции может быть очень большим, мы можем использовать энтропию. Энтропия представляет собой двоичный логарифм числа возможных комбинаций. Ее формула выглядит следующим образом:</p><ul><li>E: энтропия транзакции.</li><li>C: количество возможных комбинаций для транзакции.</li></ul><pre tabindex=0><code>E = log2(C)
</code></pre><p>В математике двоичный логарифм (основание 2) — это функция , обратная возведению в степень числа 2. Другими словами, двоичный логарифм <em>x</em> — это степень, в которую нужно возвести число 2, чтобы получить значение <em>x</em>.</p><p>Поэтому:</p><pre tabindex=0><code>E = log2(C)
C = 2^E
</code></pre><p>Этот показатель выражается в битах. Например, вот расчет энтропии транзакции CoinJoin со структурой Whirlpool 5x5, число возможных комбинаций которой, как мы видели ранее, равно 1496:</p><pre tabindex=0><code>C = 1496
E = log2(1496)
E = 10.5469 бит
</code></pre><p>Таким образом, энтропия этой Coinjoin-транзакции составляет 10.5469 бит, что очень хорошо.</p><p>Чем выше этот показатель, тем больше различных интерпретаций транзакции, а значит, тем более она приватна.</p><p>Давайте рассмотрим другой пример. Вот &ldquo;классическая&rdquo; транзакция с одним входом и двумя выходами:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-68.png><p><em>Источник: <a href=https://oxt.me/graph/transaction/tiid/9815286>https://oxt.me/graph/transaction/tiid/9815286</a></em></p></div><p>Существует только одна возможная интерпретация этой транзакции:</p><pre tabindex=0><code>[(Вход 0) &gt; (Выход 0 ; Выход 1)]
</code></pre><p>Поэтому ее энтропия будет равна 0:</p><pre tabindex=0><code>C = 1
E = log2(C)
E = 0
</code></pre><p><strong>Третий показатель</strong>, рассчитываемый калькулятором Больцмана, — эффективность кошелька (<em>&ldquo;Wallet efficiency&rdquo;</em>) Этот показатель просто сравнивает введенную транзакцию с наилучшей возможной транзакцией в той же конфигурации.</p><p>Поэтому мы введем понятие максимальной энтропии, которая представляет собой максимально достижимую энтропию для данной структуры транзакций. Например, структура Whirlpool 5x5 будет иметь максимальную энтропию, равную 10.5469. Показатель эффективности сравнивает максимальную энтропию с фактической энтропией введенной транзакции. Его формула выглядит следующим образом:</p><ul><li>ER: реальная энтропия, выраженная в битах.</li><li>EM: Максимальная энтропия с той же структурой, выраженная в битах.</li><li>Ef: Эффективность, выраженная в битах.</li></ul><pre tabindex=0><code>Ef = ER - EM
Ef = 10.5469 - 10.5469
Ef = 0 бит
</code></pre><p>Этот показатель также выражается в процентах, поэтому формула выглядит следующим образом:</p><ul><li>CR: Количество реальных возможных комбинаций.</li><li>CM: Максимальное количество возможных комбинаций при той же структуре транзакции.</li><li>Ef: Эффективность, выраженная в процентах.</li></ul><pre tabindex=0><code>Ef = CR/CM
Ef = 1496/1496
Ef = 100%
</code></pre><p>Эффективность 100% означает, что данная транзакция максимально приватна с точки зрения ее структуры.</p><p><strong>Четвертый показатель</strong> — плотность энтропии (<em>&ldquo;Entropy density&rdquo;</em>). Он представляет собой расчет энтропии для каждого входа или выхода. Этот показатель можно использовать для сравнения эффективности нескольких транзакций разного размера.</p><p>Расчет очень прост: мы делим энтропию транзакции на количество присутствующих входов и выходов. Например, для CoinJoin-тпанзакции Whirlpool 5x5 мы будем иметь:</p><ul><li>ED: плотность энтропии, выраженная в битах.</li><li>E: энтропия транзакции, выраженная в битах.</li><li>T: общее количество входов и выходов в транзакции.</li></ul><pre tabindex=0><code>T = 5 + 5 = 10
ED = E / T
ED = 10.5469 / 10
ED = 1.054 бит
</code></pre><p><strong>Пятая категория</strong> информации, предоставляемая калькулятором Больцмана, — это таблица вероятностей связей между входами и выходами: <em>&ldquo;Linkability Matrix (probabilities)&rdquo;</em>. Эта таблица просто показывает вам вероятность (коэффициент Больцмана) того, что данный вход соответствует данному выходу.</p><p>Если мы вернемся к нашему примеру с Whirlpool, то таблица вероятностей будет выглядеть так:</p><table><thead><tr><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center></th></tr></thead><tbody><tr><td style=text-align:center>%</td><td style=text-align:center>Выход 0</td><td style=text-align:center>Выход 1</td><td style=text-align:center>Выход 2</td><td style=text-align:center>Выход 3</td><td style=text-align:center>Выход 4</td></tr><tr><td style=text-align:center>Вход 0</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td></tr><tr><td style=text-align:center>Вход 1</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td></tr><tr><td style=text-align:center>Вход 2</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td></tr><tr><td style=text-align:center>Вход 3</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td></tr><tr><td style=text-align:center>Вход 4</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td><td style=text-align:center>34%</td></tr></tbody></table><p>Очевидно, что каждый вход имеет одинаковую вероятность быть связанным с каждым выходом.</p><p>С другой стороны, если мы возьмем пример транзакции с одним входом и двумя выходами, то результат будет следующим:</p><table><thead><tr><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center></th></tr></thead><tbody><tr><td style=text-align:center>%</td><td style=text-align:center>Выход 0</td><td style=text-align:center>Выход 1</td></tr><tr><td style=text-align:center>Вход 0</td><td style=text-align:center>100%</td><td style=text-align:center>100%</td></tr></tbody></table><p>В этом примере мы видим, что вероятность того, что каждый выход придет с входа 0, равна 100%.</p><p>Чем меньше эта вероятность, тем выше будет приватность.</p><p><strong>Шестым показателем</strong> является количество детерминированных связей. Вам также будет представлен коэффициент детерминированных связей. Этот показатель отражает количество связей между входами и выходами данной транзакции, которые имеют вероятность 100%, то есть являются неоспоримыми.</p><p>Коэффициент <em>&ldquo;Deterministic link ratio&rdquo;</em> представляет собой количество детерминированных связей в транзакции по отношению к общему количеству связей.</p><p>Например, Coinjoin-транзакция Whirlpool не имеет детерминированных связей между входами и выходами. Поэтому показатель будет равен нулю, а коэффициент — 0%.</p><p>С другой стороны, для второй исследуемой транзакции (1 вход и 2 выхода) показатель равен 2, а коэффициент равен 100%.</p><p>Таким образом, если этот показатель равен нулю, это говорит о хорошей приватности.</p><p>Теперь, когда мы рассмотрели показатели, давайте посмотрим, как рассчитать их с помощью этой программы. В RoninCLI перейдите в меню:</p><pre tabindex=0><code>Samourai Toolkit &gt; Boltzmann Calculator
</code></pre><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-69.png></div><p>После запуска программы введите идентификатор транзакции, которую вы хотите изучить. Вы можете ввести несколько транзакций одновременно, разделяя их запятой, затем нажмите клавишу Enter:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-70.png></div><p>Затем калькулятор отобразит все показатели, которые мы рассматривали ранее:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-71.png></div><p>Введите команду &ldquo;Quit&rdquo;, чтобы выйти из программы и вернуться в меню RoninCLI.</p><h3 id=утечка-xpub>Утечка xpub?
<a class=anchor href=#%d1%83%d1%82%d0%b5%d1%87%d0%ba%d0%b0-xpub>#</a></h3><p>Существует много дезинформации о том, как работает Whirlpool. Самой распространенной, безусловно, является критика того, что Samourai имеет доступ к пользовательским xpub на своем сервере.</p><p>На самом деле протокол Whirlpool работает без необходимости доступа к xpub пользователей. Необходимость в xpub находится на уровне кошелька, как и во всем остальном программном обеспечении, и ограничена очень специфическим использованием:</p><ul><li>Если вы используете Whirlpool в кошельке Samourai без использования собственного Dojo, то да, Dojo-сервер Samourai знает ваш xpub.</li><li>Если вы используете Whirlpool в кошельке Samourai с собственным Dojo, утечки xpub не будет.</li><li>Если вы используете Whirlpool в кошельке Sparrow без использования собственной ноды, сторонний узел, к которому вы подключены, видит, какие транзакции вы производите.</li><li>Если вы используете Whirlpool в кошельке Sparrow с собственной нодой, утечки не происходит.</li></ul><p>Как и в случае с любым другим Биткоин-кошельком, вам необходимо использовать <a href=/practice/bitcoin-noda/>свою собственную ноду</a>. В противном случае вы теряете независимость и приватность, а также становитесь вынужденными доверять другим операторам нод. Но в конечном итоге это не имеет никакого отношения к протоколу Whirlpool. В этом вопросе Samourai Wallet ведет себя так же, как и все остальные существующие кошельки.</p><hr><p>Теперь, когда мы ознакомились с теорией и тем, как это работает в целом, давайте попробуем применить это на практике!</p><h2 id=руководство-whirlpool-в-кошельке-sparrow>Руководство: Whirlpool в кошельке Sparrow
<a class=anchor href=#%d1%80%d1%83%d0%ba%d0%be%d0%b2%d0%be%d0%b4%d1%81%d1%82%d0%b2%d0%be-whirlpool-%d0%b2-%d0%ba%d0%be%d1%88%d0%b5%d0%bb%d1%8c%d0%ba%d0%b5-sparrow>#</a></h2><p>Существует множество вариантов использования Whirlpool. Первый, который я хотел бы представить, — это использование Sparrow Wallet, программного обеспечения для управления Биткоин-кошельком на ПК с открытым исходным кодом.</p><p>Преимущества этого метода в том, что он довольно прост в освоении, быстро настраивается и не требует никакого оборудования, кроме компьютера и подключения к Интернету. С другой стороны, у этого метода есть одно существенное ограничение:</p><blockquote class="book-hint danger">Смешивание будет происходить только тогда, когда кошелек Sparrow запущен и подключен. Это означает, что если вы хотите смешивать и ремикшировать свои биткоины 24 часа в сутки, вам придется постоянно оставлять компьютер включенным.</blockquote><p>Единственное решение этой проблемы — использовать свой собственный сервер Dojo. Об этом я расскажу в <a href=/privacy/coinjoin/#%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE-whirlpool-cli-%D0%BD%D0%B0-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B5-dojo-%D0%B8-whirlpool-gui>следующем разделе</a>.</p><p>Если вы никогда раньше не использовали Whirlpool и хотите сделать это на данный момент скорее для понимания, чем для практических целей, я бы посоветовал вам начать со Sparrow, пока вы полностью не разберетесь с механизмами.</p><p>Итак, давайте приступим:</p><p>Чтобы начать, вам, очевидно, понадобится кошелек Sparrow. Вы можете скачать его прямо с официального сайта Sparrow Wallet или с их GitHub:</p><ul><li><a href=https://sparrowwallet.com/download/>https://sparrowwallet.com/download/</a></li><li><a href=https://github.com/sparrowwallet/sparrow/releases>https://github.com/sparrowwallet/sparrow/releases</a></li></ul><p>Перед установкой программы важно проверить подпись и целостность исполняемого файла, который вы только что загрузили.</p><p>После установки программы вам нужно будет создать Биткоин-кошелек. Обратите внимание, что для смешивания у вас должен быть программный кошелек (известный как &ldquo;горячий&rdquo; кошелек). Вы не сможете смешивать с использованием аппаратного кошелька.</p><p>Это не обязательно, но если вы планируете смешивать большие суммы, я настоятельно советую вам использовать надежную <a href=/passphrase>парольную фразу</a> в этом кошельке.</p><p>После того как кошелек создан, отправьте в него саты для смешивания. Просто нажмите &ldquo;Receive&rdquo; и отправьте их на выбранный вами адрес, как вы обычно это делаете.</p><p>Здесь вы можете видеть, что я только что создал кошелек и отправил в него чуть более 199 000 сат:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-15.png></div><p>На данный момент вы используете классический аккаунт. Этот аккаунт с индексом 0&rsquo; станет вашим депозитным аккаунтом для смешивания.</p><p>Чтобы смешать только что полученные UTXO, перейдите к списку UTXO в аккаунте, нажав на &ldquo;UTXOs&rdquo; в левой части интерфейса:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-16.png></div><p>Затем выберите UTXO, которые вы хотите смешать, щелкнув на них. Если вы хотите выбрать несколько, удерживайте клавишу Ctrl и щелкайте на каждом из них. После того как вы выберете UTXO, он будет выделен синим цветом.</p><p>Затем нажмите на кнопку &ldquo;Mix Selected&rdquo; в нижней части интерфейса:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-17.png></div><p>Откроется окно с описанием работы Whirlpool. Это упрощенное объяснение того, что я рассказал в предыдущем разделе.</p><p>После прочтения нажмите кнопку &ldquo;Next&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-18.png></div><p>Далее также объясняется, как работают аккаунты. После прочтения нажмите кнопку &ldquo;Next&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-19.png></div><p>На следующей странице вы можете ввести SCODE, если он у вас есть. SCODE — это код скидки, который применяется к комиссии за вход в пул. Samourai Wallet иногда дарит их своим пользователям по особым случаям (например, на Рождество). Не забудьте следить за ними в Twitter, чтобы не пропустить следующие SCODE: <a href=https://twitter.com/SamouraiWallet>https://twitter.com/SamouraiWallet</a>.</p><p>Далее выберите комиссию за майнинг, которую вы хотите распределить между Tx0 и начальным миксом. Это повлияет на скорость подтверждения вашего первого микса. Напоминаю, что вы платите за майнинг Tx0 и начального микса, но не платите за майнинг для следующих ремиксов.</p><p>Выбрав размер комиссии, нажмите &ldquo;Next&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-20.png></div><p>В следующем окне вы можете выбрать, в какой пул вступить, нажав на выпадающий список. В окне также будет указана комиссия пула и количество UTXO, которые войдут в этот пул. Затем нажмите на кнопку &ldquo;Preview Premix&rdquo;.</p><p>В моем примере UTXO составлял 199 000 сат, поэтому я собираюсь войти только с одним UTXO в пул 100 000 сат:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-21.png></div><p>Затем Sparrow попросит вас ввести пароль вашего кошелька, который вы задали при его создании в программе.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-22.png></div><p>Откроется окно обзора вашего Tx0.</p><p>Прежде всего, вы можете увидеть, что Sparrow отобразил <a href=/privacy/coinjoin/#%d0%b0%d0%ba%d0%ba%d0%b0%d1%83%d0%bd%d1%82%d1%8b-whirlpool>несколько аккаунтов</a>, необходимых для использования Whirlpool. Вы можете увидеть их в левой части экрана.</p><p>Вы также можете увидеть структуру вашей транзакции с несколькими выходами:</p><ul><li>Комиссия пула (координатора).</li><li>Премикс-UTXO.</li><li>Doxxic-сдача.</li></ul><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-23.png></div><p>Если транзакция вас устраивает, нажмите на кнопку &ldquo;Broadcast Premix Transaction&rdquo; для трансляции вашего Tx0. Если нет, вы также можете изменить параметры этого Tx0, нажав на кнопку &ldquo;Clear&rdquo; и перезапустив построение этой транзакции.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-24.png></div><p>После трансляции Tx0 вы можете найти свой UTXO, готовый к смешиванию, в аккаунте Premix. Теперь ваш UTXO зарегистрирован координатором и будет отправлен в начальный микс.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-25.png></div><p>Здесь вы можете видеть, что мой UTXO из Tx0 был подтвержден один раз. Вы также можете увидеть начальный микс, который был создан и отправлен в сеть, но ожидает подтверждения:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-26.png></div><p>Если вы зайдете в аккаунт Postmix, то увидите, что UTXO из первоначального микса уже появился, но еще не подтвержден. Как только транзакция подтвердится, он автоматически станет доступным для будущих ремиксов, за которые не будет удерживаться комиссия.</p><p>В колонке &ldquo;Mixes&rdquo; вы можете увидеть количество ремиксов ваших UTXO. Помните, что важно не столько количество ремиксов, сколько значения Anon Set, хотя эти два показателя частично связаны.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-27.png></div><p>Вот и все, ваш UTXO был смешан. В настоящее время он находится в пуле и ждет ремиксов. Если вы хотите прекратить смешивание, просто нажмите на кнопку &ldquo;Stop Mixing&rdquo;. Вы можете возобновить его, нажав на кнопку &ldquo;Start Mixing&rdquo;.</p><p>Если вы хотите оставить UTXO доступным для ремикширования, вы должны оставить программу Sparrow Wallet открытой, а компьютер включенным (не в режиме ожидания).</p><p>Вы можете отключить режим ожидания в настройках операционной системы. В Sparrow также есть опция, которую можно выбрать, чтобы предотвратить переход машины в режим ожидания:</p><pre tabindex=0><code>Tools &gt; Prevent Computer Sleep
</code></pre><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-28.png></div><p>Кнопка &ldquo;Mix to&rdquo; в вашем аккаунте Postmix в разделе UTXO позволяет настроить автоматическую отправку вашего смешанного UTXO в выбранный вами кошелек. Вы можете выбрать количество ремиксов, которые будут выполнены перед отправкой в этот кошелек.</p><p>Эта опция позволяет, например, автоматически отправлять смешанные UTXO на аппаратный кошелек. Однако имейте в виду, что обычно использовать эту опцию не рекомендуется. Я объясню почему в разделе: &ldquo;<a href=/privacy/coinjoin/#%d0%bb%d1%83%d1%87%d1%88%d0%b8%d0%b5-%d0%bf%d1%80%d0%b0%d0%ba%d1%82%d0%b8%d0%ba%d0%b8-%d0%b4%d0%bb%d1%8f-utxo-%d0%bf%d0%be%d1%81%d0%bb%d0%b5-%d1%81%d0%bc%d0%b5%d1%88%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f>Лучшие практики для UTXO после смешивания</a>&rdquo;.</p><p>Это лишь один из вариантов смешивания в Whirlpool, но есть и другие. Например, вы можете смешивать прямо со своего смартфона, используя приложение <a href=https://samouraiwallet.com/>Samourai Wallet</a> для Android. Смешивание работает так же, как и описано в этом разделе.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-29.webp></div><h2 id=руководство-whirlpool-cli-на-сервере-dojo-и-whirlpool-gui>Руководство: Whirlpool CLI на сервере Dojo и Whirlpool GUI
<a class=anchor href=#%d1%80%d1%83%d0%ba%d0%be%d0%b2%d0%be%d0%b4%d1%81%d1%82%d0%b2%d0%be-whirlpool-cli-%d0%bd%d0%b0-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5-dojo-%d0%b8-whirlpool-gui>#</a></h2><p>Если вы хотите выйти на новый уровень, вы можете смешивать в Whirlpool на своем собственном сервере Dojo.</p><p>Dojo — это реализация узла Биткоина, разработанная командой кошелька Samourai. Если вы используете собственный Dojo для CoinJoin в Samourai, xpub-ключи ваших аккаунтов не будут передаваться на сторонние серверы. Таким образом, вы выиграете в приватности, устранив один из рисков, присущих Whirlpool.</p><p>Более того, в Dojo интегрирован Whirlpool CLI, так что вы сможете ремикшировать 24/7 без необходимости постоянно оставлять свой кошелек открытым на другом устройстве.</p><p>Это решение требует наличия работающего узла Биткоина и несколько сложнее в настройке, чем в предыдущем примере. Тем не менее, оно позволяет вам наслаждаться CoinJoin в Whirlpool с минимальными рисками.</p><p>Чтобы запустить свой собственный Dojo, вы можете либо установить узел Dojo напрямую, либо использовать Dojo на другой реализации Биткоин-узла. В настоящее время это позволяют сделать следующие системы:</p><ul><li>RoninDojo, который представляет собой Dojo с дополнительными инструментами и включает в себя мастер установки и мастер администрирования.</li><li>Umbrel с помощью приложения &ldquo;Samourai Server&rdquo;.</li><li>MyNode с помощью приложения &ldquo;Dojo&rdquo;.</li><li>Nodl с помощью приложения &ldquo;Dojo&rdquo;.</li></ul><p>В нашем примере мы будем использовать три разных интерфейса:</p><ul><li>Samourai Wallet.</li><li>Whirlpool GUI.</li><li>Whirlpool CLI.</li></ul><p>Whirlpool CLI будет работать на сервере Dojo, чтобы воспользоваться вышеупомянутыми преимуществами. Он будет отвечать за связь с координатором и управление миксами.</p><p>Whirlpool GUI — это графический интерфейс, который мы будем использовать, чтобы видеть, что происходит в Whirlpool CLI, и инициировать миксы удаленно. GUI будет установлен на другом компьютере, отличном от Dojo, чтобы им можно было легко управлять.</p><p>Samourai Wallet будет содержать наш кошелек для CoinJoin. Это бесплатное приложение с открытым исходным кодом, которое можно скачать на Android или запустить на эмуляторе. Благодаря этому приложению вы всегда будете держать под контролем свой кошелек для миксов и сможете легко тратить свои постмиксы, находясь вне дома.</p><h3 id=шаг-1-подготовка-dojo>Шаг 1: Подготовка Dojo
<a class=anchor href=#%d1%88%d0%b0%d0%b3-1-%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0-dojo>#</a></h3><p>Первым шагом будет настройка Dojo. Вам нужно будет получить URL для подключения к Dojo, который является адресом Tor. Вы также можете использовать QR-код. Этот адрес позволит вам подключить кошелек Samourai к ноде через Dojo.</p><p>Если вы используете Umbrel, перейдите в App Store в левом меню и установите &ldquo;Samourai Server&rdquo;. Запустив приложение, вы увидите QR-код для подключения к Dojo.</p><p>Если вы используете RoninDojo, зайдите в RoninUI через браузер, авторизуйтесь, затем нажмите на ссылку &ldquo;<em>Manage</em>&rdquo; в нижней части окна &ldquo;Dojo&rdquo;. Вы можете получить доступ к QR-коду Dojo, нажав на &ldquo;Display values&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-30.png></div><h3 id=шаг-2-подготовка-кошелька>Шаг 2: Подготовка кошелька
<a class=anchor href=#%d1%88%d0%b0%d0%b3-2-%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0-%d0%ba%d0%be%d1%88%d0%b5%d0%bb%d1%8c%d0%ba%d0%b0>#</a></h3><p>В качестве кошелька мы будем использовать Samourai Wallet. Вы можете загрузить его из Google Play Store или скачать APK-файл на их официальном сайте.</p><p>Запустите приложение и подключитесь к своему Dojo, используя QR-код из предыдущего шага. После подключения нажмите на кнопку &ldquo;Create a new wallet&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-31.png></div><p>Затем Samourai попросит вас создать парольную фразу. Если вы не знаете, что такое парольная фраза и как ее правильно создать, настоятельно советую прочитать статью на эту тему: <a href=/passphrase>&ldquo;Насколько надежна ваша парольная фраза?&rdquo;</a>.</p><p>Выберите надежную парольную фразу и сделайте физическую резервную копию. Нажмите &ldquo;Далее&rdquo;, чтобы продолжить.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-32.png></div><p>Далее вам нужно будет выбрать PIN-код для доступа к приложению. Этот PIN-код очень важен, но он не имеет никакого отношения к вашему Биткоин-кошельку. Он необходим для работы приложения Samourai. Он понадобится вам для доступа к кошельку в приложении Samourai. Однако если вам понадобится восстановить кошелек, потребуется только ваша парольная фраза и фраза восстановления (мнемоника). Выберите надежный PIN-код, сделайте резервную копию и нажмите &ldquo;Далее&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-33.png></div><p>Вам будет предложено подтвердить этот PIN-код второй раз. После этого вы сможете получить доступ к мнемонической фразе для восстановления вашего кошелька Samourai. Как и парольная фраза, эта информация должна быть сохранена на физическом, защищенном носителе, иначе в случае проблем вы можете навсегда потерять доступ к своим биткоинам.</p><p>После подтверждения вы попадете в свой новый кошелек Samourai. Прежде чем делать что-либо еще, начните с проверки своих резервных копий. Перед этим получите xpub из вашего кошелька, чтобы потом убедиться, что вы восстановили правильный кошелек:</p><pre tabindex=0><code>Настройки &gt; Кошелек &gt; Показать BIP44 XPUB
</code></pre><p>Вам будет выдан QR-код со значением xpub. Просто запишите последние 8 символов этого xpub на листе бумаги. Например:</p><pre tabindex=0><code>X2GGWaLt
</code></pre><p>Это позволит вам убедиться, что вы находитесь в нужном кошельке и не ошиблись при вводе парольной фразы.</p><p>Затем переустановите приложение Samourai и попробуйте восстановить его, используя созданные ранее резервные копии. Для этого, после подключения к Dojo, нажмите на &ldquo;Restore an existing wallet&rdquo;.</p><p>Введите фразу восстановления и парольную фразу, указанные в ваших физических резервных копиях, выберите тот же PIN-код, что и раньше, а затем восстановите этот кошелек. Если это не сработает, значит, ваша резервная копия не верна. Повторите <a href=/privacy/coinjoin/#%d1%88%d0%b0%d0%b3-2-%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0-%d0%ba%d0%be%d1%88%d0%b5%d0%bb%d1%8c%d0%ba%d0%b0>шаг 2</a> с самого начала.</p><p>Если вам удалось получить доступ к кошельку, проверьте, что XPUB BIP44 остался прежним. Перейдите:</p><pre tabindex=0><code>Настройки &gt; Кошелек &gt; Показать BIP44 XPUB
</code></pre><p>Убедитесь, что последние 8 символов совпадают с теми, которые вы записали на листе бумаги ранее. Если нет, значит, ваша парольная фраза была сохранена неправильно (или вы допустили опечатку). Повторите <a href=/privacy/coinjoin/#%d1%88%d0%b0%d0%b3-2-%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0-%d0%ba%d0%be%d1%88%d0%b5%d0%bb%d1%8c%d0%ba%d0%b0>шаг 2</a> с самого начала.</p><p>Если резервное копирование работает правильно, вы можете спокойно переходить к следующему шагу.</p><blockquote class="book-hint info">Обратите внимание, что тест резервной копии нового кошелька должен быть выполнен и для любого другого кошелька, а не только для Samourai.</blockquote><h3 id=шаг-3-подготовка-whirlpool-gui>Шаг 3: Подготовка Whirlpool GUI
<a class=anchor href=#%d1%88%d0%b0%d0%b3-3-%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0-whirlpool-gui>#</a></h3><p>Сейчас мы установим Whirlpool GUI, графический интерфейс, который позволит вам управлять CoinJoin. Перейдите к персональному компьютеру.</p><p>Прежде всего, вам нужно будет установить Java Developer Kit (JDK). Вы можете, например, бесплатно установить OpenJDK с этого сайта: <a href=https://adoptopenjdk.net/>https://adoptopenjdk.net/</a>. Это позволит вам компилировать и запускать программы, разработанные на Java.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-34.png></div><p>После установки OpenJDK вы можете установить Whirlpool GUI с официального сайта Samourai Wallet: <a href=https://samouraiwallet.com/download/whirlpool>https://samouraiwallet.com/download/whirlpool</a>.</p><p>Запустите Whirlpool GUI. Чтобы Whirlpool GUI мог подключиться, на вашем компьютере должны быть запущены в фоновом режиме Tor Daemon или Tor Browser. Вам нужно будет не забывать запускать их перед каждым использованием Whirlpool GUI на этом компьютере. Если у вас не установлен Tor, перед началом работы установите его с официального сайта: <a href=https://www.torproject.org/download/>https://www.torproject.org/download/</a>.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-35.png></div><p>В Whirlpool GUI нажмите на &ldquo;Advanced: remote CLI&rdquo;, чтобы подключиться к вашему Whirlpool CLI на сервере Dojo. Вам понадобится Tor-адрес вашего Whirlpool CLI.</p><ul><li>Чтобы найти его в Umbrel: просто запустите приложение Samourai Server, вы найдете его на странице приложения.</li><li>Чтобы найти его в RoninDojo: зайдите в главное меню RoninCLI, а затем перейдите в раздел Credentials > Whirlpool.</li></ul><p>В Whirlpool GUI введите адрес Tor, который вы нашли ранее, в поле &ldquo;CLI address&rdquo;. Оставьте &ldquo;http://&rdquo;, но не ставьте &ldquo;:8899&rdquo;. Просто вставьте полученный адрес.</p><p>В следующем поле введите 9050, если вы используете Tor Daemon, или 9150, если вы используете Tor Browser. Если вы впервые подключаетесь к Whirlpool CLI через графический интерфейс Whirlpool, можете оставить поле API-ключа пустым. В противном случае заполните его.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-36.png></div><p>Нажмите кнопку &ldquo;Connect&rdquo;, чтобы выполнить сопряжение Whirlpool GUI с Whirlpool CLI. Будьте терпеливы, установка соединения может занять несколько минут.</p><p>Теперь вы можете выполнить сопряжение со своим кошельком Samourai. Нажмите на символ QR-кода в правой части экрана для сканирования.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-37.png></div><p>В кошельке Samourai перейдите в раздел :</p><pre tabindex=0><code>Настройки &gt; Транзакции &gt; Связать с Whirlpool GUI
</code></pre><p>Отсканируйте QR-код из вашего кошелька Samourai в Whirlpool GUI.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-38.png></div><p>Убедитесь, что соединение установлено в Whirlpool GUI. На следующей странице активируйте опцию &ldquo;Use Dojo as wallet backend&rdquo;. Затем нажмите на кнопку &ldquo;Initialize GUI&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-39.png></div><p>Затем вам будет предложено подтвердить парольную фразу вашего кошелька Samourai. По окончании нажмите на кнопку &ldquo;Sign in&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-40.png></div><p>Подождите несколько минут. После завершения настройки вы попадете в графический интерфейс Whirlpool:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-41.png></div><h3 id=шаг-4-смешивание>Шаг 4: Смешивание!
<a class=anchor href=#%d1%88%d0%b0%d0%b3-4-%d1%81%d0%bc%d0%b5%d1%88%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5>#</a></h3><p>Все готово, и вы готовы смешивать ваши биткоины. Для этого отправьте саты, которые нужно смешать, на счет Deposit в кошельке Samourai. Вы также можете сделать это прямо из графического интерфейса Whirlpool.</p><p>Нажмите на кнопку &ldquo;Deposit&rdquo;, чтобы сгенерировать адрес получения.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-42.png></div><p>На этой странице вы можете увидеть минимальные суммы, которые необходимо внести для участия в том или ином пуле. Всегда пополняйте счет на сумму, немного превышающую указанную, иначе ваш UTXO не сможет войти в желаемый пул до тех пор, пока комиссия за майнинг не снизится.</p><p>Отправьте свои биткоины на сгенерированный адрес. Вы можете сгенерировать новый адрес, нажав на кнопку &ldquo;Renew address&rdquo;.</p><p>Для большей безопасности вносите средства через кошелек Samourai. Просто нажмите на синий &ldquo;+&rdquo; в правом нижнем углу приложения, а затем на &ldquo;Получить&rdquo;.</p><p>Как только депозит будет подтвержден, вы увидите, что он появился на счету &ldquo;Deposit&rdquo; в Whirlpool GUI. Чтобы начать серию CoinJoin, выберите UTXO, которые будут отправлены в микс, и нажмите на кнопку &ldquo;Premix&rdquo;. Обратите внимание, что если вы выберете несколько UTXO одновременно, они будут объединены во время Tx0. Это может привести к потере приватности, особенно если источники UTXO разные.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-43.png></div><p>Откроется страница конфигурации Whirlpool. Выберите пул, в который вы хотите войти. Выберите комиссию за майнинг, выделенную на Tx0, и начальный CoinJoin. Внизу страницы вы увидите сумму сдачи, а также сумму и количество выровненных по сумме UTXO. Если вас устраивает конфигурация, нажмите на кнопку &ldquo;Premix&rdquo;, чтобы начать процесс CoinJoin.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-44.png></div><p>После создания Tx0 вы можете увидеть выровненные по сумме UTXO в аккаунте &ldquo;Premix&rdquo;, ожидающие подтверждения. Если вы хотите, чтобы ваш премикс автоматически смешивался, а ваши будущие постмиксы автоматически ремикшировались 24/7, активируйте опцию &ldquo;Automatically mix premix & postmix&rdquo; на вкладке &ldquo;Configuration&rdquo; в левой части окна.</p><p>Теперь вы можете выйти из Whirlpool GUI, ваши UTXO доступны для CoinJoin 24/7 благодаря Whirlpool CLI на вашем сервере Dojo.</p><p>Вы можете просмотреть свои UTXO из аккаунта &ldquo;Postmix&rdquo; в Whirlpool GUI или из интерфейса Whirlpool в Samourai Wallet. Для этого нажмите на маленький белый логотип Samourai в левом верхнем углу экрана. Аккаунты Whirlpool легко отличить в Samourai Wallet по светло-голубому цвету:</p><blockquote class="book-hint info"><p><em>В новом интерфейсе Samourai Wallet необходимо нажать ⋮ в правом верхнем углу экрана и выбрать &ldquo;Postmix transactions&rdquo;.</em></p><p><em>— Прим. переводчика</em></p></blockquote><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-45.png></div><p>Чтобы потратить UTXO после смешивания, просто нажмите на &ldquo;+&rdquo; в правом нижнем углу экрана, а затем выберите <a href=/privacy/coinjoin/#%d0%b8%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d1%8b-%d0%b4%d0%bb%d1%8f-%d1%82%d1%80%d0%b0%d1%82%d1%8b-utxo>подходящий инструмент</a> для траты.</p><p>Чтобы легко отслеживать автоматические миксы, я также рекомендую настроить кошелек только для просмотра с помощью приложения <a href=https://sentinel.watch/>Sentinel</a> для Android. Введите ZPUB вашего аккаунта Postmix (после смешивания) и отслеживайте ваши CoinJoin в режиме реального времени.</p><h2 id=лучшие-практики-для-utxo-после-смешивания>Лучшие практики для UTXO после смешивания
<a class=anchor href=#%d0%bb%d1%83%d1%87%d1%88%d0%b8%d0%b5-%d0%bf%d1%80%d0%b0%d0%ba%d1%82%d0%b8%d0%ba%d0%b8-%d0%b4%d0%bb%d1%8f-utxo-%d0%bf%d0%be%d1%81%d0%bb%d0%b5-%d1%81%d0%bc%d0%b5%d1%88%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f>#</a></h2><p>После смешивания важно соблюдать несколько правил, если вы не хотите потерять всю приватность, над которой так долго работали.</p><h3 id=utxo-после-смешивания>UTXO после смешивания
<a class=anchor href=#utxo-%d0%bf%d0%be%d1%81%d0%bb%d0%b5-%d1%81%d0%bc%d0%b5%d1%88%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f>#</a></h3><p>Лучший вариант после смешивания — оставить UTXO на аккаунте Postmix и ждать, когда их нужно будет потратить. Вы даже можете оставить их для ремиксов без ограничений, пока они не понадобятся вам для покупки чего-либо.</p><p>Некоторые пользователи предпочитают перевести свои смешанные биткоины на аппаратный кошелек. Вы можете сделать это, но будьте очень осторожны и следуйте рекомендациям от Samourai Wallet. В противном случае вы рискуете потерять всю ранее достигнутую приватность.</p><p>Самая распространенная ошибка — это консолидация UTXO. Очень важно не объединять, то есть не включать в одну транзакцию смешанные и несмешанные UTXO. Это означает, что нужно управлять своими UTXO в рамках кошелька и маркировать их, чтобы не допустить ошибку. Помимо CoinJoin, объединение UTXO — это вообще плохая практика, которая часто приводит к потере приватности, если их не контролировать.</p><p>Также нужно быть осторожным с консолидацией смешанных UTXO. Можно делать небольшие консолидации, если ваши смешанные UTXO имеют высокие уровни анонимности, но это снизит уровень приватности ваших биткоинов.</p><p>Будьте очень внимательны, чтобы консолидация не была слишком большой или чтобы она не происходила после слишком малого количества ремиксов, иначе простым вычислением можно будет установить связь между вашими UTXO до CoinJoin и после CoinJoin. Если вы плохо разбираетесь в этих понятиях, то самое безопасное — не консолидировать UTXO после ремикса, а отправлять их по одному на аппаратный кошелек, каждый раз указывая новый пустой адрес. И снова не забывайте маркировать каждый полученный UTXO.</p><p>Я бы также не советовал переводить UTXO после смешивания на кошелек, использующий редко используемые типы скриптов адреса. Например, если вы заходите в Whirlpool с мультисиг-кошелька, использующего скрипты P2WSH, то вероятность того, что вы будете смешаны с другими пользователями, у которых изначально был такой же тип кошелька, очень мала. Если вы отправите свои UTXO после смешивания на этот же мультисиг-кошелек, уровень приватности ваших смешанных биткоинов значительно снизится.</p><p>Как и при любой другой Биткоин-транзакции, вы не должны повторно использовать адреса получения. Напоминаю, что адреса получения предназначены только для одноразового использования. Любая новая входящая транзакция требует генерации нового пустого адреса.</p><blockquote class="book-hint btc">1 UTXO = 1 адрес</blockquote><p>Самое простое и безопасное решение — оставить смешанные UTXO в покое, на аккаунте Postmix. Вы можете оставить их для автоматических ремиксов и трогать только тогда, когда захотите с ними расстаться, то есть когда захотите их потратить.</p><h3 id=utxo-doxxic-сдачи>UTXO Doxxic-сдачи
<a class=anchor href=#utxo-doxxic-%d1%81%d0%b4%d0%b0%d1%87%d0%b8>#</a></h3><p>Во-вторых, вы должны быть осторожны в обращении с &ldquo;Doxxic Change&rdquo; — сдачей, которая не попала в пул для смешивания. Эти UTXO, созданные в результате использования Whirlpool, опасны для вашей приватности, потому что они создают связь между вами и использованием CoinJoin. Поэтому не используйте их просто так и не объединяйте с другими UTXO. Вот что вы можете сделать с ними:</p><ul><li>Смешивайте их в пулах меньшего номинала: если ваш UTXO достаточно велик, чтобы самостоятельно поместиться в пул меньшего номинала, смешивайте его. Это, безусловно, одно из лучших решений. С другой стороны, вы никогда не должны объединять несколько Doxxic-сдач вместе, чтобы они попали в один пул. Это плохая идея, которая создаст связь между различными входами в Whirlpool.</li><li>Пометьте их как &ldquo;нерасходуемые&rdquo; (&ldquo;Do not spend&rdquo;) и оставьте на специальном аккаунте: еще одно хорошее решение — просто не трогать их и пометить как &ldquo;нерасходуемые&rdquo;, чтобы вы были уверены, что не будете их использовать. Если цена биткоина вырастет, наверняка будут созданы новые, более мелкие пулы, которые позволят вам смешивать ваши маленькие Doxxic-сдачи.</li><li>Пожертвования: очень важно делать небольшие пожертвования, по мере своих возможностей, различным разработчикам, работающим над Биткоин и связанным с ним программным обеспечением, а также производителям контента, которые помогают нам понять, как использовать это программное обеспечение. Вы также можете сделать пожертвование в различные ассоциации, которые принимают платежи в биткоинах. Если ваша Doxxic-сдача является для вас обузой, пожертвуйте её, например <a href=/contribute>проекту 21 идея</a> или переводчику этого труда.</li><li>Используйте их для покупки подарочных карт: некоторые сайты, например, площадка RoboSats (<a href=/robosats>гид</a>) позволяют покупать подарочные карты в обмен на биткоины, чтобы вы могли совершать покупки в различных известных торговых точках. Покупая подарочные карты такого типа, вы можете избавиться от Doxxic-сдачи.</li></ul><p>Безусловно, существуют и другие методы избавления от Doxxic-сдачи. Некоторые люди говорят об анонимизации с помощью <a href=/chto-takoe-laitning/>сети лайтнинг</a>, другие используют обмен с Monero. Возможно, это хорошие методы, но я не буду рассматривать их в этой статье, потому что не знаю их досконально. Я приглашаю вас провести собственное исследование на эту тему.</p><blockquote class="book-hint info"><p><em>В январе 2024 года разработчики Samourai Wallet и <a href=https://twitter.com/pokkst>разработчик</a> Monero-кошелька Mysu выпустили тестовую бета-версию приложения <a href=https://code.samourai.io/wallet/comit-swaps-java>Samourai Swaps</a>, для атомарных p2p-обменов BTC/XMR, что также позволит вам эффективно потратить Doxxic-сдачу.</em></p><p><em>— Прим. переводчика</em></p></blockquote><h2 id=инструменты-для-траты-utxo>Инструменты для траты UTXO
<a class=anchor href=#%d0%b8%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d1%8b-%d0%b4%d0%bb%d1%8f-%d1%82%d1%80%d0%b0%d1%82%d1%8b-utxo>#</a></h2><p>Как вы уже поняли, самая безопасная практика для UTXO после смешивания — оставить смешанные UTXO на специальном аккаунте и не трогать их до тех пор, пока вы не захотите с ними расстаться.</p><p>Однако важно закончить работу на высокой ноте и использовать инструменты, специально разработанные для оптимизации приватности, в момент траты своих смешанных UTXO.</p><p>Наличие этих инструментов зависит от программного обеспечения кошелька, выбранного пользователем. Кошелек Samourai выделяется среди аналогов благодаря разнообразию и эффективности предлагаемых им инструментов. Некоторые из этих инструментов также доступны в кошельке Sparrow. Давайте рассмотрим эти инструменты и способы их использования.</p><h3 id=payjoin--stowaway>PayJoin — Stowaway
<a class=anchor href=#payjoin--stowaway>#</a></h3><p>PayJoin — это CoinJoin между двумя людьми с определенной структурой. Он используется для траты биткоинов. Он может быть использован для траты как смешанных, так и несмешанных биткоинов.</p><p>Эта специфическая структура транзакций была впервые реализована в кошельке Samourai с помощью инструмента Stowaway. За ней последовал <a href=https://github.com/bitcoin/bips/blob/master/bip-0078.mediawiki>BIP</a>, который взял идею PayJoin и переименовал ее в P2EP (Pay-to-End-Point).</p><p>Особенность PayJoin заключается в том, что производится транзакция, которая кажется банальной, но на самом деле является мини-CoinJoin между двумя пользователями. Для этого структура транзакции включает получателя транзакции на входе наряду с фактическим отправителем. Таким образом, получатель включает в состав транзакции платеж на свой адрес, который позволяет ему получить оплату.</p><p>Например, если вы покупаете багет у пекаря за 4 000 сатов с UTXO в 10 000 сатов и хотите совершить PayJoin, пекарь добавит к транзакции UTXO в 15 000 сатов на входе, который он полностью вернет на выходе, чтобы запутать эвристический анализ:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-46.png></div><p>В этом примере мы видим, что пекарь вложил 15 000 и получил 19 000. Разница составляет 4 000 сатов — цену его багета. Если вы хотите купить багет за 4 000 сатов, то вы вложили 10 000, а получили 6 000. Разница составляет 4 000 сатов — цена багета. В этом примере я намеренно не учитываю стоимость майнинга для простоты.</p><p>Благодаря такой структуре PayJoin разрушает <a href=/privacy/oxt-2/#%d0%ba%d0%bb%d0%b0%d1%81%d1%82%d0%b5%d1%80%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d0%ba%d0%be%d1%88%d0%b5%d0%bb%d1%8c%d0%ba%d0%be%d0%b2--%d1%8d%d0%b2%d1%80%d0%b8%d1%81%d1%82%d0%b8%d0%ba%d0%b0-%d0%b2%d0%bb%d0%b0%d0%b4%d0%b5%d0%bd%d0%b8%d1%8f-%d1%81%d0%be%d0%b2%d0%bc%d0%b5%d1%81%d1%82%d0%bd%d1%8b%d0%bc%d0%b8-%d0%b2%d1%85%d0%be%d0%b4%d0%b0%d0%bc%d0%b8>эвристику владения совместными входами</a> Биткоин-транзакции. Когда кто-то посмотрит на этот платеж, он подумает, что вы просто объединили 2 своих UTXO, чтобы купить что-то за 19 000 сатов, и получили 6 000 сатов обратно в виде сдачи. В действительности, как мы видели, ситуация совершенно иная. Поэтому анализ цепочки размыт, а параметры платежа трудно понять внешнему наблюдателю.</p><p>Этот тип транзакций может стать отличным решением для того, чтобы потратить только что смешанные биткоины без потери приватности.</p><p>JoinMarket также включает в себя инструмент PayJoin для трат, с которым вы можете ознакомиться, <a href=https://github.com/JoinMarket-Org/joinmarket-clientserver/blob/master/docs/PAYJOIN.md>перейдя по ссылке</a>.</p><p>Как мы видели ранее, у Samourai Wallet есть собственный инструмент PayJoin — <strong>Stowaway</strong>. Вы можете использовать его либо в Sparrow Wallet, либо из приложения Samourai Wallet.</p><p>Stowaway принадлежит к типу транзакций, который разработчики называют &ldquo;Cahoots&rdquo; (в переводе с англ. — &ldquo;сговор&rdquo;), то есть совместная транзакция между несколькими пользователями, требующая обмена информацией вне блокчейна Биткоина. В настоящее время в Samourai существует два инструмента Cahoots — Stowaway и <strong>StonewallX2</strong>, который мы рассмотрим позже.</p><p>Совместные транзакции Cahoots требуют обмена частично подписанными транзакциями между участниками. Это может занять много времени, особенно если вы работаете с другим человеком удаленно. Однако всегда есть возможность сделать это вручную с другим пользователем Samourai Wallet, что может быть хорошим вариантом, если вы физически находитесь рядом с ним. Ручной процесс состоит из обмена 5 QR-кодами, которые нужно сканировать по очереди.</p><p>На расстоянии этот процесс становится слишком сложным. Поэтому Samourai разработала отличное решение: собственный зашифрованный протокол связи на основе Tor — <strong>Soroban</strong>. С помощью Soroban пользователям больше не нужно обмениваться QR-кодами. Обмен происходит автоматически в фоновом режиме, скрытый за удобным пользовательским интерфейсом.</p><p>Зашифрованный обмен информацией требует определенной формы связи и аутентификации между участниками Cahoots. Поэтому транзакции с использованием Soroban основаны на PayNym пользователей. Если вы не знаете, что такое PayNym, я расскажу вам о них в этой статье: &ldquo;<a href=/bip47-ili-gadkij-utenok>BIP47, или гадкий утенок</a>&rdquo;.</p><p>Проще говоря, PayNym — это своего рода идентификатор, привязанный к вашему кошельку и позволяющий вам выполнять целый ряд функций, включая обмен зашифрованными сообщениями. PayNym представлен идентификатором и рисунком робота. Вот, например, мой (в Testnet):</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-47.png></div><p>Чтобы провести удаленную Cahoots-транзакцию, в нашем примере — PayJoin в Samourai или Sparrow, вам нужно &ldquo;соединиться&rdquo; (Follow) с другим пользователем через его PayNym. В данном случае, чтобы совершить Stowaway (PayJoin), вам нужно соединиться с человеком, которому вы хотите отправить биткоины.</p><p>Чтобы сделать это в Sparrow Wallet, просто введите PayNym или отсканируйте QR-код получателя в поле &ldquo;Find Contact&rdquo;, см. предыдущий скриншот.</p><p>В кошельке Samourai нажмите на синий &ldquo;+&rdquo; в правом нижнем углу экрана, а затем на значок &ldquo;PayNym&rsquo;ы&rdquo; фиолетового цвета. Если у вас еще нет PayNym, вы можете сгенерировать свой собственный, следуя инструкциям.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-48.png><p><em>Транзакции производятся в Testnet — это не настоящие биткоины.</em></p></div><p>Оказавшись в интерфейсе PayNym, снова нажмите на синий &ldquo;+&rdquo;. Затем вы можете соединиться с PayNym вашего коллеги, вставив его идентификатор (Payment Code) или отсканировав QR-код.</p><p>Затем нажмите на кнопку &ldquo;Соединять&rdquo;:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-49.png></div><p>Затем вас спросят, хотите ли вы &ldquo;подключиться&rdquo; к нему. Эта функция позволит вам впоследствии использовать BIP47. За это взимается небольшая комиссия. В нашем случае она нам не нужна, поэтому мы не будем подключаться.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-50.png></div><p>В моем примере я создал PayJoin между кошельком Samourai и кошельком Sparrow. Чтобы получить доступ к PayNym в Sparrow Wallet, просто нажмите на &ldquo;Tools&rdquo;, а затем на &ldquo;Show PayNym&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-51.png></div><p>Здесь вы можете видеть, что мой оранжевый PayNym получил запрос Follow от моего белого PayNym (в Samourai). Я соединился с ним в ответ:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-52.png></div><p>Теперь, когда PayNym&rsquo;ы подключены, они смогут общаться друг с другом через Soroban в зашифрованном виде. Поэтому мы можем запустить Cahoots-транзакцию.</p><p>Чтобы совершить Stowaway в кошельке Samourai, вам нужно создать транзакцию. Если вы хотите потратить смешанные UTXO, перейдите в аккаунт Postmix перед запуском транзакции.</p><p>Нажмите на синий &ldquo;+&rdquo;, затем на &ldquo;Отправить&rdquo;. Вы также можете выбрать, какие именно UTXO вы хотите отправить:</p><blockquote class="book-hint info"><p><em>В новом интерфейсе Samourai Wallet необходимо нажать на ваш PayNym-аватар в левом верхнем углу экрана, выбрать Collaborate > Initiate > Transaction type > Stowaway > Online > Collaborator > Set up transaction.</em></p><p><em>— Прим. переводчика</em></p></blockquote><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-48.png></div><p>Затем введите сумму, которую вы хотите отправить. В моем примере я отправляю 45 000 сатов в Testnet:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-53.png></div><p>Затем нажмите на кнопку &ldquo;Cahoots&rdquo;. Откроется окно, в котором вы можете выбрать, что создать: StonewallX2 или Stowaway. В данном случае мы хотим сделать Stowaway:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-54.png></div><p>Как объяснялось выше, вы можете выполнить PayJoin вручную или удаленно. Удаленный способ быстрее и проще, но для этого вам нужно быть соединенным через PayNym. В нашем случае мы выберем вариант &ldquo;Online&rdquo;:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-55.png></div><p>Затем вам предлагается выбрать второго участника из PayNym-контактов. Здесь я выбрал &ldquo;luckyfrost&rdquo;, который является моим оранжевым PayNym в Sparrow:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-56.png></div><p>Затем нажмите &ldquo;Просмотр транзакции&rdquo; для подтверждения.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-57.png></div><p>Затем вы можете выбрать комиссию за майнинг, назначенную для этой транзакции. Обратите внимание, что эта комиссия будет оплачена инициатором транзакции. Нажмите на кнопку &ldquo;Запуск Stowaway&rdquo;.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-58.png></div><p>Затем вам предлагается подождать, пока ваш коллега подтвердит свое согласие на выполнение этой совместной операции.</p><p>Чтобы подтвердить Cahoots-запрос в Samourai, нажмите на синий &ldquo;+&rdquo;, а затем на зеленую кнопку &ldquo;Получить&rdquo;. Появится адрес. В правом верхнем углу нажмите на три маленькие точки, а затем на &ldquo;Receive online Cahoots&rdquo;.</p><blockquote class="book-hint info"><p><em>В новом интерфейсе Samourai Wallet необходимо нажать на ваш PayNym-аватар в левом верхнем углу экрана, выбрать Collaborate > Participate > Выбрать аккаунт (Deposit или Postmix) > Listen for Cahoots requests.</em></p><p><em>— Прим. переводчика</em></p></blockquote><p>Для подтверждения в Sparrow Wallet перейдите на вкладку &ldquo;Tools&rdquo;, затем на &ldquo;Find Mix Partner&rdquo;. Откроется окно, нажмите на &ldquo;Next&rdquo;, а затем снова на &ldquo;Next&rdquo;, чтобы подтвердить совместную транзакцию.</p><p>Cahoots-транзакция находится в процессе. Ваши два кошелька обмениваются частично подписанными транзакциями через Tor в зашифрованном виде благодаря Soroban.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-59.png></div><p>Как только транзакция Stowaway будет создана, вы можете транслировать ее на узлы сети Биткоин.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-60.png></div><p>Транзакция Stowaway завершена. Поздравляю.</p><p>Если вы посмотрите на транзакцию, то увидите входы и выходы двух пользователей. Разница между выходом и входом для белого PayNym составляет -45 000 сатов, а разница для оранжевого PayNym — +45 000 сатов, то есть сумма, которую я в итоге отправил.</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-61.png></div><h3 id=stonewall>Stonewall
<a class=anchor href=#stonewall>#</a></h3><p>Stonewall — это особая структура транзакции, имитирующая CoinJoin между двумя людьми, но не являющаяся таковой на самом деле.</p><p>Эта транзакция не является совместной — в ней участвуют только UTXO, принадлежащие инициатору транзакции. Поэтому вы можете создать транзакцию Stonewall, не согласовывая ее с кем-либо еще.</p><p>Работает она довольно просто: вы вводите несколько UTXO, принадлежащих вам, и получаете 4 выхода. 2 из этих выходов будут абсолютно одинаковыми, остальные будут сдачей. Из двух одинаковых выходов только один будет действительно отправлен получателю.</p><p>Такая структура вносит бо́льшую энтропию в транзакцию и запутывает процесс отслеживания. Глядя на это со стороны, вы можете подумать, что эта транзакция — CoinJoin между двумя людьми. В действительности же это платеж. Поэтому она вызывает сомнения при анализе цепочки.</p><p>Инструмент Stonewall используется по умолчанию в кошельке Samourai, если ваш кошелек соответствует необходимым условиям. Давайте рассмотрим, как создать Stonewall. Для этого я отправлю 50 125 сатов с помощью этого инструмента:</p><center><video src=/img/coinjoin-pandul/cjp-62.mp4 controls style=width:100%></video></center><p>Как видно из этого видео, опция Stonewall выбрана по умолчанию.</p><p>Вот как выглядит транзакция Stonewall, которую я только что выполнил на видео:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-63.png></div><p>Мы видим, что Samurai объединил 2 UTXO, принадлежащие мне, на входе:</p><ul><li>130 450 сат</li><li>454 504 сат</li></ul><p>И мы видим 4 выхода транзакции Stonewall:</p><ul><li>50 125 сат, который является фактическим платежом, который я только что совершил.</li><li>50 125 сат, который отправляется на другой адрес, принадлежащий мне.</li><li>Две сдачи: 80 168 сат и 404 222 сат, которые также возвращаются мне.</li></ul><p>Таким образом, мой контрагент получил только 50 125 сат — сумма платежа, который я хотел произвести.</p><p>Очевидно, что если вы хотите потратить средства после смешивания, вам нужно будет сначала зайти в свой кошелек Whirlpool, прежде чем инициировать транзакцию.</p><p>Samourai не взимает с вас никаких комиссий за создание транзакции Stonewall. Разумеется, вам придется заплатить комиссию за майнинг. Она будет выше, чем у &ldquo;классической&rdquo; транзакции, поскольку в ней больше входов и выходов.</p><p>Если вы хотите использовать этот инструмент в Sparrow, я отсылаю вас к этому руководству, в котором подробно объясняется, как выполнить эту операцию: <a href=https://sparrowwallet.com/docs/spending-privately.html#paying-to-a-paynym>https://sparrowwallet.com/docs/spending-privately.html#paying-to-a-paynym</a>.</p><h3 id=stonewallx2>StonewallX2
<a class=anchor href=#stonewallx2>#</a></h3><p>StonewallX2 работает точно так же, как и Stonewall, за исключением того, что входы для транзакции принадлежат не только отправителю, но и третьей стороне. Таким образом, StonewallX2 — это совместная транзакция между двумя пользователями Samourai. Как и в Stowaway (PayJoin), связь между участниками может осуществляться вручную (если вы находитесь в одном месте) или удаленно с помощью Soroban через Tor.</p><p>Разница между Stowaway и StonewallX2 заключается в роли второго участника. В Stowaway ваш коллега обязательно является получателем платежа. В случае StonewallX2 второй участник просто предоставляет свои биткоины для микса, но не является получателем платежа.</p><p>Например, если вы хотите совершить приватную трату, но продавец, которому вы хотите отправить биткоины, не поддерживает Stowaway, то вы можете просто сделать StonewallX2 с другим человеком, который не имеет никакого отношения к транзакции. Получателем по-прежнему будет продавец, но ему не нужно будет выполнять все операции, связанные со Stowaway.</p><p>Таким образом, StonewallX2 — это мини-CoinJoin между двумя людьми, который включает в себя выход платежа. Это придает транзакции бо́льшую энтропию. Эта специфическая структура вызывает сомнения в связи между отправителем и получателем.</p><p>Если посмотреть на транзакцию StonewallX2 со стороны, то ее структура будет точно такой же, как и у транзакции Stonewall. Это вызывает еще больше сомнений.</p><p>Чтобы провести транзакцию StonewallX2 удаленно, вам нужно соединиться (Follow) с PayNym второго участника, как и в случае с <a href=/privacy/coinjoin/#payjoin--stowaway>Stowaway</a>. Как только вы соединитесь с ним, давайте вместе посмотрим, как провести удаленную транзакцию StonewallX2. В этом примере я работаю со своим вторым PayNym в Sparrow Wallet. Я не покажу вам в видео, но коллега по Cahoots должен подтвердить в своем кошельке, что он хочет принять участие в данной транзакции.</p><blockquote class="book-hint info"><p><em>В новом интерфейсе Samourai Wallet необходимо нажать на ваш PayNym-аватар в левом верхнем углу экрана, выбрать Collaborate > Initiate > Transaction type > StonewallX2 > Online > Collaborator > Set up transaction.</em></p><p><em>— Прим. переводчика</em></p></blockquote><center><video src=/img/coinjoin-pandul/cjp-64.mp4 controls style=width:100%></video></center><p>Вот как выглядит транзакция StonewallX2 из видео:</p><div class=imageWrapper><img src=/img/coinjoin-pandul/cjp-65.png></div><p>Первая сумма 102 588 сат поступила из моего кошелька Samourai. Второй вход 104 255 сат — с кошелька моего коллеги. Есть 4 выхода, 2 из которых на одну и ту же сумму, чтобы запутать анализ цепочки:</p><ul><li>50 125 сат, которые идут получателю моего платежа.</li><li>52 306 сат, представляют собой мою сдачу и, следовательно, идут на адрес в моем кошельке.</li><li>50 125 сат отправляются моему коллеге.</li><li>53 973 сат возвращаются в виде сдачи моему коллеге.</li></ul><p>При транзакциях StonewallX2 затраты на майнинг делятся между двумя участниками. Если мы подсчитаем баланс каждого после транзакции, то получим:</p><ul><li>Второй участник, который вошел с 104 255 сат, а вышел с 104 098 сат. Разница представляет собой его долю в комиссии за майнинг. Если мы не будем учитывать эти расходы, то участник совершил пустую транзакцию.</li><li>Что касается отправителя, то я вошел с 102 588 сат, а вышел с 52 306 сат. Разница в 50 282 сат представляет собой сумму, которую я должен получателю (50 125 сат), плюс моя доля в комиссии за майнинг.</li><li>Получатель не входил в транзакцию и вышел с 50 125 сат — это сумма, которую я ему заплатил.</li></ul><p>Samourai не будет взимать с вас плату за создание транзакции StonewallX2. Разумеется, вам придется платить комиссию за майнинг вашей транзакции. Она будут выше, чем у &ldquo;классической&rdquo; транзакции, поскольку у нее больше входов и выходов.</p><p>Если вы хотите использовать этот инструмент в Sparrow, я отсылаю вас к этому руководству, в котором подробно объясняется, как выполнить эту операцию: <a href=https://sparrowwallet.com/docs/spending-privately.html#paying-to-a-paynym>https://sparrowwallet.com/docs/spending-privately.html#paying-to-a-paynym</a>.</p><h3 id=ricochet>Ricochet
<a class=anchor href=#ricochet>#</a></h3><p>Последний инструмент, который я хотел бы представить, — это Ricochet. Этот инструмент немного отличается от предыдущих, которые были направлены на улучшение перспективного уровня приватности. Этот инструмент уменьшает след, оставляемый CoinJoin на UTXO, и, следовательно, повышает ретроспективную приватность.</p><p>Если вы проводите CoinJoin-транзакции и отправляете смешанные биткоины напрямую на биржу, поставщик услуг может заблокировать ваш счет или попросить вас обосновать происхождение ваших средств. Чтобы избежать этих лицемерных и несправедливых блокировок, вы можете использовать Ricochet для отправки смешанных средств на биржу.</p><p>Единственный случай использования Ricochet — это когда вы хотите скрыть тот факт, что в прошлом вы совершили CoinJoin с принадлежащим вам UTXO.</p><p>Чтобы уменьшить этот след, Ricochet проведет 4 транзакции, в которых вы отправите средства себе на разные адреса, а затем инструмент отправит их получателю (бирже). Цель состоит в том, чтобы увеличить расстояние между транзакцией CoinJoin и транзакцией депозита. Благодаря этому инструменты анализа блокчейна посчитают, что после CoinJoin произошла смена владельца, поэтому провайдер, скорее всего, не рискнет блокировать ваш счет или просить вас предоставить обоснование.</p><p>Этот инструмент может оказаться незаменимым, если вам нужно обменять смешанные биткоины или просто если вы хотите уменьшить &ldquo;след&rdquo; от их смешивания в прошлом.</p><p>Как мы видели ранее, аккаунт Ricochet, используемый для адресов &ldquo;отскока&rdquo;, является совершенно отдельным аккаунтом от депозитного.</p><p>Существует два варианта &ldquo;Рикошета&rdquo;:</p><ul><li>Усиленный Ricochet: также известный как &ldquo;смещенная доставка&rdquo;, этот вариант распределит комиссию, выплачиваемую Samourai, между пятью транзакциями-отскоками. Он также гарантирует, что каждый отскок будет присутствовать в отдельном блоке. Таким образом, эта опция рассчитана на медленную работу, но она оптимизирует приватность и устойчивость вашей транзакции к анализу цепочки.</li><li>Обычный Ricochet: этот вариант позволяет выполнить операцию быстро, но он будет менее приватным и устойчивым к анализу, чем предыдущий вариант. Он предпочтителен для срочных отправлений.</li></ul><p>Ricochet — это платная услуга. Вам придется заплатить Samourai 100 000 сат.</p><p>Вот как сделать Ricochet в кошельке Samourai:</p><center><video src=/img/coinjoin-pandul/cjp-66.mp4 controls style=width:100%></video></center><p>Теперь вы готовы использовать Whirlpool наилучшим образом и правильно тратить UTXO после смешивания. Инструменты траты Samourai Wallet, большинство из которых также включены в Sparrow Wallet, теперь не являются для вас секретом. Я советую вам попрактиковаться и опробовать все эти инструменты. Чтобы не рисковать своими личными средствами, не стесняйтесь сначала использовать их в Testnet! Эта сеть предназначена не только для разработчиков.</p><h2 id=можно-ли-смешивать-биткоины>Можно ли смешивать биткоины?
<a class=anchor href=#%d0%bc%d0%be%d0%b6%d0%bd%d0%be-%d0%bb%d0%b8-%d1%81%d0%bc%d0%b5%d1%88%d0%b8%d0%b2%d0%b0%d1%82%d1%8c-%d0%b1%d0%b8%d1%82%d0%ba%d0%be%d0%b8%d0%bd%d1%8b>#</a></h2><p>Альткоинеры и новички часто описывают CoinJoin как темную, сомнительную или даже опасную практику. Подобный туманный рассказ часто объясняется отсутствием технических знаний о Биткоине и выдумками о CoinJoin.</p><p>Все это, конечно же, неправда. CoinJoin — это благородное использование Биткоина, которое позволяет любому человеку вернуть контроль над приватностью своих платежей, улучшая одновременно взаимозаменяемость платежной сети и не впадая в абсолютную анонимность.</p><p>Как объяснялось выше, CoinJoin просто позволяет пользователям разорвать историю своих биткоинов, тем самым обеспечивая бо́льшую приватность платежей, особенно если в прошлом их личность была связана с UTXO.</p><p>Именно благодаря инструментам, которые позволяют каждому пользователю защитить свою приватность, мы можем добиться свободной и ничем не ограниченной платежной сети. Без уважения к частной жизни нет свободы.</p><p>Работа по обеспечению приватности пользователей Биткоина — благородное дело. Производя CoinJoin, вы не только обеспечиваете определенную степень приватности, но и помогаете многим другим людям улучшить свою приватность.</p><p>Да, CoinJoin иногда используется нечестными людьми. Но он также широко используется людьми, которые вынуждены его использовать, для которых необходимость приватности — это не удобство, а необходимость. Если бы все использовали CoinJoin только тогда, когда это становится для них обязательным, люди, вынужденные использовать этот инструмент, смешались бы с нечестными, и, следовательно, стали бы более легко обнаруживаемыми для тиранической власти.</p><p>Я также поддерживаю аргумент Грегори Максвелла, высказанный на форуме Bitcoin Talk в 2013 году, когда он <a href="https://bitcointalk.org/index.php?topic=279249.msg2983902#msg2983902">впервые представил CoinJoin</a>: &ldquo;В действительности настоящим преступникам не нужен CoinJoin, [&mldr;] они могут позволить себе купить приватность так, как обычные пользователи не могут, это просто дополнительные расходы в их (часто очень прибыльном) бизнесе&rdquo;.</p><p>В любом случае, давайте помнить, что CoinJoin — это инструмент. Как и любой другой инструмент, он может быть использован как конструктивно, так и деструктивно.</p><p>Наконец, на мой взгляд, CoinJoin идеально вписывается в изначальную идеологию и линию развития Биткоина. <a href=/manifest-shifropanka/>Шифропанки пишут код</a>. Они разрабатывают инструменты, которые позволяют каждому человеку контролировать свою приватность и суверенитет в Интернете — две характеристики, которые необходимы для свободы личности.</p><p>Сам Сатоши Накамото посвятил целый раздел своей <a href=/whitepaper/>&ldquo;Белой книги&rdquo;</a> соблюдению приватности пользователей Биткоина. В этом документе он подчеркивает риск потери приватности, если владелец пары ключей будет раскрыт. Он объясняет, что если это произойдет, то все транзакции владельца можно будет отследить. CoinJoin на данный момент является лучшим решением для разрыва связи между биткоинами и их владельцами, как и предписывал Сатоши Накамото в &ldquo;Белой книге&rdquo;.</p><p>В заключение я рекомендую вам обратиться к различным ресурсам, которые я использовал при подготовке этой статьи, которые наверняка дадут вам еще больше информации.</p><h3 id=внешние-источники>Внешние источники:
<a class=anchor href=#%d0%b2%d0%bd%d0%b5%d1%88%d0%bd%d0%b8%d0%b5-%d0%b8%d1%81%d1%82%d0%be%d1%87%d0%bd%d0%b8%d0%ba%d0%b8>#</a></h3><p>Ветка в Twitter <em><a href=https://twitter.com/SamouraiWallet/status/1489220847336308739>Why we CoinJoin</a></em> от @SamouraiWallet.</p><p>Статья <em><a href=https://bitcoinmagazine.com/guides/how-to-whirlpool-with-ronindojo>HOW TO WHIRLPOOL ON DESKTOP WITH RONINDOJO</a></em> от ECONOALCHEMIST.</p><p>Статья <em><a href=https://bitcoinmagazine.com/guides/how-to-whirlpool-bitcoin-on-mobile>THE EASIEST WAY TO WHIRLPOOL YOUR BITCOIN AND PRESERVE PRIVACY</a></em> от ECONOALCHEMIST.</p><p>Статья <em><a href=https://bitcoinmagazine.com/technical/how-to-whirlpool-bitcoin-sparrow-wallet>HOW TO WHIRLPOOL YOUR BITCOIN ON DESKTOP WITH SPARROW WALLET</a></em> от ECONOALCHEMIST.</p><p>Статья <em><a href=https://medium.com/samourai-wallet/diving-head-first-into-whirlpool-anonymity-sets-4156a54b0bc7>Diving head first into Whirlpool Anonymity Sets</a></em> от Samourai Wallet.</p><p>Ветка в Twitter от @BrotherRabbit_ о <a href=https://twitter.com/BrotherRabbit_/status/1528399310227906561>расчете перспективного уровня анонимности в Whirlpool</a>.</p><p><em>Видео <a href="https://www.youtube.com/watch?v=kS6iC_ovarQ">Tutoriel Samouraï par JohnOnChain (Vie privée)</a></em> от Youtube-канала <a href=https://www.youtube.com/c/D%C3%A9couvreBitcoin>Découvre Bitcoin</a>.</p><p>Материалы по Ricochet:</p><ul><li><a href=https://docs.samourai.io/en/wallet/features/ricochet>https://docs.samourai.io/en/wallet/features/ricochet</a></li></ul><p>Материалы по инструментам для траты UTXO в Sparrow Wallet:</p><ul><li><a href=https://sparrowwallet.com/docs/spending-privately.html>https://sparrowwallet.com/docs/spending-privately.html</a></li></ul><p>Материалы по инструментам для траты UTXO в Samourai Wallet:</p><ul><li><a href=https://docs.samourai.io/en/spend-tools>https://docs.samourai.io/en/spend-tools</a></li></ul><p>Статья об <a href=https://estudiobitcoin.com/como-instalar-y-utilizar-whirlpool-stats-tools-wst-para-los-calculos-de-los-sets-de-anonimato-de-las-transacciones-coinjoins/>установке и использовании WST</a> (на испанском языке).</p><p>Статья <em><a href=https://bitcoiner.guide/doxxic/>Dealing with Coinjoin Change Outputs</a></em> от BitcoinQ+A.</p><p>Серия из 4 статей <em><a href=/privacy/oxt>Понимание приватности в сети Биткоин с помощью OXT</a></em> от Samourai Wallet.</p><p>Материалы по Whirlpool от Samourai Wallet:</p><ul><li><a href=https://code.samourai.io/whirlpool/Whirlpool/-/blob/whirlpool/README.md>https://code.samourai.io/whirlpool/Whirlpool/-/blob/whirlpool/README.md</a></li><li><a href=https://docs.samourai.io/whirlpool/basic-concepts>https://docs.samourai.io/whirlpool/basic-concepts</a></li><li><a href=https://docs.samourai.io/en/wallet/features/whirlpool>https://docs.samourai.io/en/wallet/features/whirlpool</a></li></ul><p>Материалы по калькулятору Больцмана:</p><ul><li><a href=https://medium.com/@laurentmt/introducing-boltzmann-85930984a159>https://medium.com/@laurentmt/introducing-boltzmann-85930984a159</a></li><li><a href=https://gist.github.com/LaurentMT/e758767ca4038ac40aaf>https://gist.github.com/LaurentMT/e758767ca4038ac40aaf</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Термин &ldquo;Doxxic&rdquo; происходит от игры слов &ldquo;<a href=https://ru.wikipedia.org/wiki/%D0%94%D0%BE%D0%BA%D1%81%D0%B8%D0%BD%D0%B3>доксинг</a>&rdquo; и &ldquo;toxic&rdquo; — токсичный. Он подразумевает что-то вредное и раскрывающее вашу личность.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><hr><i>Connect to our relay to leave a comment. <a href=https://21ideas.org/en/comments/>Details</a>.<br>Подключитесь к нашему релею, чтобы оставить комментарий. <a href=https://21ideas.org/comments/>Подробнее</a>.</i>
<zap-threads anchor=https://21ideas.org/privacy/coinjoin/ author=npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l relays=wss://21ideas.nostr1.com disable=replyAnonymously legacy-url=true></zap-threads><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#coinjoin-и-смешивание-биткоинов>CoinJoin и смешивание биткоинов</a></li><li><a href=#различные-реализации-coinjoin>Различные реализации CoinJoin</a><ul><li><a href=#joinmarket>JoinMarket</a></li><li><a href=#wasabi-20>Wasabi 2.0</a></li></ul></li><li><a href=#теория-работы-whirlpool>Теория работы Whirlpool</a><ul><li><a href=#модель-whirlpool>Модель Whirlpool</a></li><li><a href=#пулы-и-комиссии>Пулы и комиссии</a></li><li><a href=#аккаунты-whirlpool>Аккаунты Whirlpool</a></li><li><a href=#tx0>Tx0</a></li><li><a href=#аккаунт-doxxic-change>Аккаунт Doxxic Change</a></li><li><a href=#аккаунт-premix>Аккаунт Premix</a></li><li><a href=#аккаунт-postmix>Аккаунт Postmix</a></li><li><a href=#уровни-анонимности-anon-sets>Уровни анонимности (Anon Sets)</a></li><li><a href=#whirlpool-stats-tool-wst>Whirlpool Stats Tool (WST)</a></li><li><a href=#использование-калькулятора-больцмана>Использование калькулятора Больцмана</a></li><li><a href=#утечка-xpub>Утечка xpub?</a></li></ul></li><li><a href=#руководство-whirlpool-в-кошельке-sparrow>Руководство: Whirlpool в кошельке Sparrow</a></li><li><a href=#руководство-whirlpool-cli-на-сервере-dojo-и-whirlpool-gui>Руководство: Whirlpool CLI на сервере Dojo и Whirlpool GUI</a><ul><li><a href=#шаг-1-подготовка-dojo>Шаг 1: Подготовка Dojo</a></li><li><a href=#шаг-2-подготовка-кошелька>Шаг 2: Подготовка кошелька</a></li><li><a href=#шаг-3-подготовка-whirlpool-gui>Шаг 3: Подготовка Whirlpool GUI</a></li><li><a href=#шаг-4-смешивание>Шаг 4: Смешивание!</a></li></ul></li><li><a href=#лучшие-практики-для-utxo-после-смешивания>Лучшие практики для UTXO после смешивания</a><ul><li><a href=#utxo-после-смешивания>UTXO после смешивания</a></li><li><a href=#utxo-doxxic-сдачи>UTXO Doxxic-сдачи</a></li></ul></li><li><a href=#инструменты-для-траты-utxo>Инструменты для траты UTXO</a><ul><li><a href=#payjoin--stowaway>PayJoin — Stowaway</a></li><li><a href=#stonewall>Stonewall</a></li><li><a href=#stonewallx2>StonewallX2</a></li><li><a href=#ricochet>Ricochet</a></li></ul></li><li><a href=#можно-ли-смешивать-биткоины>Можно ли смешивать биткоины?</a><ul><li><a href=#внешние-источники>Внешние источники:</a></li></ul></li></ul></li></ul></nav></div></aside></main><script>"use strict";const METRICS={FEE:"fee",BLOCK:"block",PRICE:"price",SATS:"sats",BTC:"btc"};let currentMetric=METRICS.FEE,lastKnownValues={fee:{label:"Комиссия",value:"0 sat/vB"},block:{label:"Высота блока",value:"0"},price:{label:"Цена",value:"$0"},sats:{label:"Московское время",value:"00:00"},btc:{label:"",value:"1 BTC = 1 BTC"}};function formatSatsAsTime(e){const t=Math.round(e).toString().padStart(4,"0"),n=t.slice(0,-2),s=t.slice(-2);return`${n}:${s}`}function formatNumber(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function updateDisplay(){const n=document.getElementById("metrics-label"),e=document.getElementById("metrics-value");if(!n||!e)return;const t=lastKnownValues[currentMetric];n.textContent=t.label,e.textContent=t.value,e.style.paddingTop=t.label?"0":"0.7rem"}async function updateMetrics(){try{const[t,n,e]=await Promise.all([fetch("https://mempool.space/api/v1/fees/recommended").then(e=>e.json()),fetch("https://mempool.space/api/blocks/tip/height").then(e=>e.json()),fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd").then(e=>e.json())]);lastKnownValues.fee.value=`${t.fastestFee} sat/vB`,lastKnownValues.block.value=formatNumber(n),lastKnownValues.price.value=`$${formatNumber(e.bitcoin.usd)}`;const s=Math.round(1e8/e.bitcoin.usd);lastKnownValues.sats.value=formatSatsAsTime(s),updateDisplay()}catch(e){console.error("Error fetching metrics:",e)}}function cycleMetric(){const e=Object.values(METRICS),t=e.indexOf(currentMetric);currentMetric=e[(t+1)%e.length],updateDisplay()}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("metrics-container");e&&(e.addEventListener("click",cycleMetric),updateMetrics(),setInterval(updateMetrics,6e4))})</script></body></html>