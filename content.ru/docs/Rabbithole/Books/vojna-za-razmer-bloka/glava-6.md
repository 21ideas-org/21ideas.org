---
title: "Глава 6: Сеть Lightning"
h1: "Глава 6: Сеть Lightning"
cover: /img/vrb-438.jpeg
description: "SegWit предоставил пользователям возможность создавать транзакции, которые не могли быть изменены злонамеренными третьими сторонами. Это считалось важнейшим компонентом так называемой Lightning Network — технологии масштабирования второго уровня для Биткоина."
url: vojna-za-razmer-bloka/glava-6
date: 2021-03-11
bookFlatSection: false
weight: 6
---

{{< expand "Оглавление" "..." >}}

[Главная страница](/vojna-za-razmer-bloka)

[Глава 1: Первый удар](/vojna-za-razmer-bloka/glava-1)

[Глава 2: Начало](/vojna-za-razmer-bloka/glava-2)

[Глава 3: Масштабирование I Монреаль](/vojna-za-razmer-bloka/glava-3)

[Глава 4: Масштабирование II Гонконг](/vojna-za-razmer-bloka/glava-4)

[Глава 5: SegWit](/vojna-za-razmer-bloka/glava-5)

[Глава 6: Сеть Lightning](/vojna-za-razmer-bloka/glava-6)

[Глава 7: Bitcoin Classic](/vojna-za-razmer-bloka/glava-7)

[Глава 8: Круглый стол в Гонконге](/vojna-za-razmer-bloka/glava-8)

[Глава 9: Фейковый Сатоши](/vojna-za-razmer-bloka/glava-9)

[Глава 10: DAO](/vojna-za-razmer-bloka/glava-10)

[Глава 11: Масштабирование III Милан](/vojna-za-razmer-bloka/glava-11)

[Глава 12: Bitcoin Unlimited](/vojna-za-razmer-bloka/glava-12)

[Глава 13: Биржи](/vojna-za-razmer-bloka/glava-13)

[Глава 14: ASICBoost](/vojna-za-razmer-bloka/glava-14)

[Глава 15: Логово драконов](/vojna-za-razmer-bloka/glava-15)

[Глава 16: Litecoin](/vojna-za-razmer-bloka/glava-16)

[Глава 17: UASF – Активируемый пользователями софтфорк](/vojna-za-razmer-bloka/glava-17)

[Глава 18: Нью-Йоркское соглашение](/vojna-za-razmer-bloka/glava-18)

[Глава 19: Bitcoin Cash](/vojna-za-razmer-bloka/glava-19)

[Глава 20: SegWit2x](/vojna-za-razmer-bloka/glava-20)

[Глава 21: Победа](/vojna-za-razmer-bloka/glava-21)

{{< /expand >}}

{{< youtube I8YsSMsJsvw >}}
_Помимо YouTube с аудиокнигой можно ознакомиться на популярных подкаст-площадках: [https://www.21ideas.org/audio-audiobooks/](https://www.21ideas.org/audio-audiobooks/)_
{{< /youtube >}}

SegWit предоставил пользователям возможность создавать транзакции, которые не могли быть изменены злонамеренными третьими сторонами (решена проблема уязвимости транзакций для третьих лиц, transaction malleability). Это считалось важнейшим компонентом так называемой Lightning Network — технологии масштабирования второго уровня для Биткоина. Без этого исправления реализовать Lightning было бы слишком сложно.

Сеть Lightning была впервые представлена в статье Джозефа Пуна и Тадеуша Дрийи в феврале 2015 года. Несколькими месяцами позже схожая статья с описанием этих решений второго уровня была опубликована Кристианом Декером [^1]. В статьях описывался механизм платежной сети второго уровня поверх Биткоина. Подобные концепции обсуждались в биткоин-пространстве в течение многих лет. В сущности, эта идея, похоже, озвучивалась еще от Сатоши [^2]. Смысл работы Lightning состоит в объединении нескольких платежей в меньшее количество биткоин-транзакций. Биткоин-транзакции используются для открытия платежных каналов, которые, будучи единожды настроенными, обеспечивают поток повторяющихся платежей. У компаний могут быть каналы с множеством разных контрагентов, образующие в результате единую сеть. Платежи могут двигаться по цепочке связанных между собой каналов, пока не достигнут конечного получателя (это называется маршрутизацией или роутингом платежей, прим. пер).

Для некоторых сторонников малых блоков эта архитектура второго уровня имела огромное значение как основа высокопроизводительной и дешевой глобальной платежной системы. Платежные системы, основанные на блокчейне, обычно работают в режиме "оповещение для всех", то есть при совершении платежа необходимо транслировать транзакцию всем участникам сети. Затем все участники должны обработать эту транзакцию, чтобы убедиться, не для них ли этот платеж. Эта система считается крайне неэффективной, особенно для небольших платежей. Если кто-то покупает кофе во Франции с помощью биткоинов, зачем продавцу билетов на концерты в Японии нужно проверять эту транзакцию? По сути, именно так всегда работали криптовалютные ончейн-платежи, и с точки зрения сторонников малых блоков для небольших платежей эта архитектура не имела большого смысла; она была нужна только как базовый слой денежной системы. Сеть Lightning обеспечивает повышение эффективности, поскольку использует более логичную структуру платежной сети. Транзакция, вместо того, чтобы транслироваться всем, может быть отправлена ​​напрямую получателю платежа, в рамках более или менее одноранговой архитектуры. Если одна из сторон транзакции нечестна и пытается украсть деньги, другая сторона может транслировать транзакцию в блокчейн Биткоина и вернуть средства. Таким образом, блокчейн и механизм биткоин-консенсуса Proof-of-Work используются в качестве службы разрешения споров. Пока обе стороны честны, все нюансы, неэффективность и ограничения масштабируемости PoW могут быть оставлены за кадром.

Основное беспокойство сторонников крупных блоков было в том, что им казалось, будто Lightning используют просто в качестве предлога, лишь бы не увеличивать лимит размера блока. Для них это было совершенно недопустимо. Внедрение сети Lightning представлялось очень сложным, негарантированным и, в лучшем случае, ее можно было бы всерьез использовать лишь спустя годы, между тем проблема размера блока требовала срочного решения. Крупноблочники рассчитывали на широкомасштабное принятие биткоина в торговле, и 2015 год стал в этом плане периодом огромного успеха. В 2015 году Expedia, Overstock, TigerDirect, Newegg, Dell, Rakuten и Microsoft начали в той или иной форме позволять клиентам оплачивать покупки биткоинами. В апреле 2016 года начал принимать платежи в биткоинах магазин видеоигр Steam. Эти магазины не использовали Lightning, они использовали транзакции ончейн. Если Биткоин пойдет по пути внедрения Lightning, платежное решение, которое выбрали эти магазины, станет ненадежным из-за высоких комиссий и длительного времени подтверждения. Это окажется катастрофой для сети, магазины, скорее всего, перестанут принимать биткоины и никогда не вернутся к этой практике из-за неудачного опыта. Хотя у Lightning была технически превосходная архитектура, это не имело значения. В конце концов, многие из этих коммерческих бизнесов действительно перестали принимать биткоины, так что опасения сторонников крупных блоков оказались в значительной степени справедливыми. На ум приходит фраза "лучшее враг хорошего". Не увеличивать размер блока было явно плохим бизнес-решением. Потеря этих магазинов была огромным разочарованием для сторонников крупных блоков.

Однако для адептов малых блоков Биткоин не был ни бизнесом, ни платежной системой, претендующей на роль VISA, Paypal и Mastercard. Это была новая форма денег, нечто гораздо более амбициозное и потенциально способное куда сильнее трансформировать общество и экономику. Скорее, Биткоин бросал вызов центральным банкам. В целом, сторонники малых блоков не имели ничего против того, чтобы Биткоин стал быстрой и дешевой платежной системой; просто это пожелание не было их основным приоритетом, в отличии от стремления развить новую надежную форму денег.

Это было не просто расхождение во мнениях: для адептов малых блоков их приоритет был разумным стратегическим ходом, в то время как приоритет крупноблочников казался наивным. Платежи в биткоинах были быстрыми и дешевыми по сравнению с некоторыми другими централизованными формами платежей, такими как кредитные карты и банковские переводы. Однако, стоит Биткоину набрать обороты, эти платежные сервисы могут просто снизить комиссию и ускорить транзакции. Действительно, с точки зрения IT-архитектуры этому ничто не препятствует; централизованные платежные сети более эффективны. Централизованные IT-системы в принципе способны обрабатывать больше транзакций, быстрее и с меньшими затратами, чем Биткоин или любая другая децентрализованная система. Причина, по которой централизованные платежные системы этого не сделали, заключалась в отсутствии конкуренции и некоторых юридических проблемах, связанных с администрированием, но их можно было преодолеть. Причина заключалась не в каком-то фундаментальном недостатке технологии централизованных баз данных. Если бы Биткоин был ориентирован на то, чтобы оставаться недорогой платежной сетью, что для всех было желательно, то, конечно, в краткосрочной перспективе он бы получил долю рынка; однако в долгосрочной перспективе его преимущество оказалось бы неустойчивым. Напротив, превращение в новую форму денег, способную осуществлять цензуроустойчивые электронные транзакции, было тем, с чем традиционный финансовый истеблишмент не смог бы конкурировать. Следовательно, именно это должно было стать драйвером его долгосрочной устойчивой ценности. И вновь, таким образом, все свелось к разногласию во временных предпочтениях.

Таким образом, для тех, кто отстаивал малые блоки, проблема заключалась не в выборе между платежной сетью и надежной денежно-кредитной системой, где крупноблочники предпочитали первое, а мелкоблочники - второе. Дело в том, что идея сети быстрых и дешевых платежей не позволяла создать модель с устойчивым конкурентным преимуществом. Технология блокчейн просто не имеет характеристик, которые делают ее пригодной для этого; она не масштабируется. Единственный способ получить и то, и то - это решения второго уровня, такие как Lightning.

Поскольку идея Lightningа была очень сложной, это, конечно, привело к недопониманию, как и в случае с SegWit. Были ложные утверждения, что монеты, заблокированные внутри Lightning-каналов, подвержены кредитному риску, и что Lightning каким-то образом вызовет проблему кредитной экспансии Биткоина. Высокая степень сложности Lightningа, безусловно, была проблемой, и некоторые серьезные опасения были вполне обоснованными. Возник вопрос, как обеспечить наличие у каналов достаточной ликвидности для облегчения платежей. Lightning предполагал наличие комиссий, которые пользователи должны платить, чтобы стимулировать предоставление ликвидности, и было неясно, позволит ли существующая динамика эффективно масштабировать Lightning в дешевую и надежную платежную сеть. У Lightningа также было несколько иных проблем по сравнению с платежами в сети Биткоин, например, требовалось, чтобы получатель транзакции был в сети и взаимодействовал с отправителем, чего ончейн-транзакции не требовали. Lightning также подразумевает, что пользователи контролируют свои каналы и управляют ими, чтобы обеспечить достаточную ликвидность и предотвратить кражу средств. Эти проблемы для сторонников малых блоков были значимы. Однако предполагалось, что в долгосрочной перспективе сторонние службы или умные кошельки обеспечат те или иные автоматизированные механизмы для решения этих проблем, и пользователи не будут с ними сталкиваться. И снова мы упираемся во временные предпочтения: на развитие и созревание этих систем может уйти много лет.

Крупноблочники могут более или менее легитимно утверждать, что сторонники малых блоков — очень продвинутые компьютерные гики, склонные к сложным, технически элегантным, но непрактичным решениям. Утверждается, что им не хватает деловой хватки, и они не понимают, когда требуется более простое решение проблем. Что касается Lightningа, это одна из тем, где на сегодняшний день сторонники крупных блоков оказываются в целом правы. На момент написания, хотя Lightning набирает обороты, и технология быстро совершенствуется, освоение сети Lightning в торговле все еще невелико. Принятие магазинами биткоинов в конце 2015 года было более значительным, чем сегодняшнее распространение Lightning. Тем не менее, я по-прежнему с оптимизмом смотрю на Lightning Network, и, если размышлять в масштабе десятилетий, успех все еще возможен.

---

[Оригинал](https://blog.bitmex.com/the-blocksize-war-chapter-6-lightning-network/)

{{< expand "Оглавление" "..." >}}

[Главная страница](/vojna-za-razmer-bloka)

[Глава 1: Первый удар](/vojna-za-razmer-bloka/glava-1)

[Глава 2: Начало](/vojna-za-razmer-bloka/glava-2)

[Глава 3: Масштабирование I Монреаль](/vojna-za-razmer-bloka/glava-3)

[Глава 4: Масштабирование II Гонконг](/vojna-za-razmer-bloka/glava-4)

[Глава 5: SegWit](/vojna-za-razmer-bloka/glava-5)

[Глава 6: Сеть Lightning](/vojna-za-razmer-bloka/glava-6)

[Глава 7: Bitcoin Classic](/vojna-za-razmer-bloka/glava-7)

[Глава 8: Круглый стол в Гонконге](/vojna-za-razmer-bloka/glava-8)

[Глава 9: Фейковый Сатоши](/vojna-za-razmer-bloka/glava-9)

[Глава 10: DAO](/vojna-za-razmer-bloka/glava-10)

[Глава 11: Масштабирование III Милан](/vojna-za-razmer-bloka/glava-11)

[Глава 12: Bitcoin Unlimited](/vojna-za-razmer-bloka/glava-12)

[Глава 13: Биржи](/vojna-za-razmer-bloka/glava-13)

[Глава 14: ASICBoost](/vojna-za-razmer-bloka/glava-14)

[Глава 15: Логово драконов](/vojna-za-razmer-bloka/glava-15)

[Глава 16: Litecoin](/vojna-za-razmer-bloka/glava-16)

[Глава 17: UASF – Активируемый пользователями софтфорк](/vojna-za-razmer-bloka/glava-17)

[Глава 18: Нью-Йоркское соглашение](/vojna-za-razmer-bloka/glava-18)

[Глава 19: Bitcoin Cash](/vojna-za-razmer-bloka/glava-19)

[Глава 20: SegWit2x](/vojna-za-razmer-bloka/glava-20)

[Глава 21: Победа](/vojna-za-razmer-bloka/glava-21)

{{< /expand >}}

[^1]: https://link.springer.com/chapter/10.1007/978-3-319-21741-3_1

[^2]: https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2013-April/002417.html
