<!doctype html><html lang=ru-RU dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="До сих пор мы говорили о том, как нам удается хранить копии и обновлять записи в распределенном реестре, не допуская принуждения или коррупции, используя систему лотереи и проверку на основе консенсуса. Но что произойдет, если победитель лотереи окажется мошенником?"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=lightning content="tony@bitcoin-herald.org"><meta property="og:title" content="Глава 5: Обеспечение безопасности реестра"><meta property="og:description" content="До сих пор мы говорили о том, как нам удается хранить копии и обновлять записи в распределенном реестре, не допуская принуждения или коррупции, используя систему лотереи и проверку на основе консенсуса. Но что произойдет, если победитель лотереи окажется мошенником?"><meta property="og:type" content="article"><meta property="og:url" content="https://new.21ideas.org/izobretaem-bitkoin/glava-5/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-10-03T17:44:41+03:00"><title>Глава 5: Обеспечение безопасности реестра | 21ideas</title><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon media="(prefers-color-scheme: dark)" sizes=180x180 href=/apple-touch-icon-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=32x32 href=/favicon-32x32-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=16x16 href=/favicon-16x16-dark.png><link rel=stylesheet href=/book.min.b2a2bf3553070e6be9e4970d8e8cec229a4e090808c2856fda3997e4440a82e5.css integrity="sha256-sqK/NVMHDmvp5JcNjozsIppOCQgIwoVv2jmX5EQKguU=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/ru.search.min.c7329af9927a5683a5474f1bffc943c4f8b58073d57a71525a1abce819edeb7c.js integrity="sha256-xzKa+ZJ6VoOlR08b/8lDxPi1gHPVenFSWhq86Bnt63w=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><picture><source srcset=/svg/logo_white.svg media="(prefers-color-scheme: dark)"><img src=/svg/logo_black.svg alt=Logo></picture>
<span>21ideas</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Поиск aria-label=Поиск maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-512cd8dd047d9194f8b56568c3c961b4 class=toggle>
<label for=section-512cd8dd047d9194f8b56568c3c961b4 class="flex justify-between"><a href=/start/>Старт</a></label><ul><li><a href=/kurs/>Биткоин от А до Я</a></li></ul></li><li><input type=checkbox id=section-4f53cbff6ac5b0f9cfca5f1f9f3b991c class=toggle>
<label for=section-4f53cbff6ac5b0f9cfca5f1f9f3b991c class="flex justify-between"><a href=/theory/>Теория</a></label><ul><li><input type=checkbox id=section-c4ddad175f26bb1d35909363eff62296 class=toggle>
<label for=section-c4ddad175f26bb1d35909363eff62296 class="flex justify-between"><a href=/economics/>Экономика</a></label><ul><li><input type=checkbox id=section-a51542c01e6fb6da0be0947ec8232131 class=toggle>
<label for=section-a51542c01e6fb6da0be0947ec8232131 class="flex justify-between"><a href=/pzv/>Постепенно, затем внезапно</a></label><ul><li><a href=/pzv/postepenno-zatem-vnezapno/>Введение</a></li><li><a href=/pzv/bitkoin-nelzya-skopirovat/>Биткоин нельзя скопировать</a></li><li><a href=/pzv/bitkoin-ne-slishkom-volatilen/>Биткоин не слишком волатилен</a></li><li><a href=/pzv/bitkoin-ne-tratit-energiyu-zrya/>Биткоин не тратит энергию зря</a></li><li><a href=/pzv/bitkoin-ne-slishkom-medlennyj/>Биткоин не слишком медленный</a></li><li><a href=/pzv/bitkoin-eto-ispravit/>Биткоин это исправит</a></li><li><a href=/pzv/bitkoin-ne-blokchejn/>Биткоин, не блокчейн</a></li><li><a href=/pzv/bitkoin-nichem-ne-podkreplen/>Биткоин ничем не подкреплен?</a></li><li><a href=/pzv/bitkoin-ne-finansovaya-piramida/>Биткоин — не финансовая пирамида</a></li><li><a href=/pzv/bitkoin-ne-mozhet-byt-zabanen/>Биткоин не может быть забанен</a></li><li><a href=/pzv/bitkoin-ne-dlya-prestupnikov/>Биткоин не для преступников</a></li><li><a href=/pzv/bitkoin-obescenivaet-ostalnye-dengi/>Биткоин обесценивает остальные деньги</a></li><li><a href=/pzv/bitkoin-zov-k-edineniyu/>Биткоин — зов к единению</a></li><li><a href=/pzv/bitkoin-eto-zdravyj-smysl/>Биткоин — это здравый смысл</a></li><li><a href=/pzv/bitkoin-velikaya-definancializaciya/>Биткоин — великая дефинанcиализация</a></li></ul></li><li><input type=checkbox id=section-f77a8c77e4ac28a47562f512f5567bcb class=toggle>
<label for=section-f77a8c77e4ac28a47562f512f5567bcb class="flex justify-between"><a href=/sb/>Становление Биткоина</a></label><ul><li><a href=/sb/stanovlenie-intro/>Становление Биткоина: Краткий обзор истории от пещерных людей до сети lightning</a></li><li><a href=/sb/stanovlenie-1/>Становление Биткоина Часть 1. О времени</a></li><li><a href=/sb/stanovlenie-2/>Становление Биткоина Часть 2. О людях</a></li><li><a href=/sb/stanovlenie-3/>Становление Биткоина Часть 3. Знакомьтесь: деньги</a></li><li><a href=/sb/stanovlenie-4/>Становление Биткоина Часть 4. Поворот не туда (в поисках нового плана)!</a></li><li><a href=/sb/stanovlenie-5/>Становление Биткоина Часть 5. Цифровая редкость</a></li><li><a href=/sb/stanovlenie-6/>Становление Биткоина Часть 6. Цифровые контракты</a></li><li><a href=/sb/stanovlenie-7/>Становление Биткоина Часть 7: Недостающие части головоломки</a></li></ul></li><li><a href=/bitkoin-ne-vredit-okruzhayushej-srede/>Биткоин и окружающая среда</a></li><li><a href=/sem-setevyh-effektov-bitkoina/>Семь сетевых эффектов Биткоина</a></li><li><a href=/hozyaeva-i-raby-deneg/>Хозяева и рабы денег</a></li><li><a href=/strukturnaya-perestrojka/>Структурная перестройка</a></li><li><a href=/v-zashchitu-deflyacii/>В защиту дефляции</a></li><li><a href=/sravnenie-monetarnyh-standartov/>Сравнение монетарных стандартов</a></li><li><a href=/negativnye-effekty-neftedollara/>Негативные внешние эффекты нефтедоллара</a></li><li><a href=/raskoshelivaemsya/>Раскошеливаемся (Shelling Out): Происхождение денег</a></li><li><a href=/bitcoin-i-ritmy-istorii/>Биткоин и ритмы истории</a></li><li><a href=/bitcoin-i-internet-cikly-hopfa/>Биткоин и интернет-циклы Хопфа</a></li></ul></li><li><input type=checkbox id=section-e83ea293497a2ab861101ccfc99a8ecc class=toggle>
<label for=section-e83ea293497a2ab861101ccfc99a8ecc class="flex justify-between"><a href=/security/>Безопасность</a></label><ul><li><a href=/kak-hranit-kljuchi/>Биткоин-кошельки. Зачем и как хранить свои приватные ключи</a></li></ul></li><li><input type=checkbox id=section-e9552bdc5e196adcf41f88d9180bebda class=toggle>
<label for=section-e9552bdc5e196adcf41f88d9180bebda class="flex justify-between"><a href=/privacy/>Приватность</a></label><ul><li><a href=/privacy/luchshie-praktiki/>Как сохранить приватность?</a></li><li><a href=/privacy/no-kyc/>Никаких KYC, берегите персональные данные</a></li></ul></li><li><input type=checkbox id=section-e49feff8bdc4c8d9840548f297831fbc class=toggle>
<label for=section-e49feff8bdc4c8d9840548f297831fbc class="flex justify-between"><a href=/protocol/>Протокол</a></label><ul><li><a href=/kto-kontroliruet-bitkoin-kor/>Кто контролирует Bitcoin Core?</a></li><li><a href=/vechnaja-borba/>Вечная борьба Биткоина</a></li><li><a href=/ob-udobstve-vzaimodejstvija-s-bitcoinom/>Об удобстве взаимодействия с Биткоином</a></li><li><a href=/bitcoin-zoloto-2-0/>Биткоин: цифровое золото или пиринговая наличность?</a></li><li><a href=/upravlenie-bitcoin/>Управление Биткоином</a></li></ul></li><li><input type=checkbox id=section-8509d6019544d659ccbc67af32e91aea class=toggle>
<label for=section-8509d6019544d659ccbc67af32e91aea class="flex justify-between"><a href=/history/>История</a></label><ul><li><input type=checkbox id=section-51bacf4bb315fc63174fdbbc90ffb95d class=toggle>
<label for=section-51bacf4bb315fc63174fdbbc90ffb95d class="flex justify-between"><a href=/gf/>Генезис-файлы</a></label><ul><li><a href=/gf/genesis-intro/>Генезис-файлы. Пролог: день, когда криптография изменилась навсегда</a></li><li><a href=/gf/genesis-1/>Генезис-файлы. Часть I: eCash Дэвида Чаума и зарождение мечты шифропанков</a></li><li><a href=/gf/genesis-2/>Генезис-файлы. Часть II: Hashcash или как Адам Бэк разработал сердце Биткоина</a></li><li><a href=/gf/genesis-3/>Генезис-файлы. Часть III: Если у Биткоина был прототип, то это были b-money Вэя Дая</a></li><li><a href=/gf/genesis-4/>Генезис-файлы. Часть IV: Создавая Bit Gold, Сабо был в двух шагах от изобретения Биткоина</a></li><li><a href=/gf/genesis-5/>Генезис-файлы. Часть V: Как поиски цифровой наличности привели Хэла Финни к созданию RPOW (и не только)</a></li></ul></li><li><a href=/hal-finney/>Хэл Финни — жизнь и смерть легенды движения шифропанков</a></li><li><a href=/bitcoin-reformaciya/>Биткоин-Реформация</a></li></ul></li><li><input type=checkbox id=section-042f7e1a0906e66d4ceaeeb231b37175 class=toggle>
<label for=section-042f7e1a0906e66d4ceaeeb231b37175 class="flex justify-between"><a href=/philosophy/>Философия</a></label><ul><li><a href=/ne-shitcoin/>Биткоин, не щиткоин</a></li><li><a href=/neotemlemye-prava-sobstvennosti/>Неотъемлемые права собственности. Закон, язык, деньги и мораль Биткоина</a></li><li><a href=/manifest-kriptoanarhista/>Манифест криптоанархиста</a></li><li><a href=/manifest-shifropanka/>Манифест шифропанка</a></li><li><a href=/tyulpannaya-lihoradka/>Биткоин — современная голландская тюльпанная лихорадка?</a></li><li><a href=/vse-moshenniki/>Все — мошенники</a></li></ul></li><li><input type=checkbox id=section-66beb9b5ed04619b43509a5a9298b3a2 class=toggle>
<label for=section-66beb9b5ed04619b43509a5a9298b3a2 class="flex justify-between"><a href=/future/>Будущее</a></label><ul><li><input type=checkbox id=section-df24c55b3b01a044f159006399dd3f62 class=toggle>
<label for=section-df24c55b3b01a044f159006399dd3f62 class="flex justify-between"><a href=/ba/>Биткоин-астрономия</a></label><ul><li><a href=/ba/1/>Постгипербиткоинизация</a></li></ul></li><li><a href=/apokalipsis/>Сможет ли Биткоин пережить апокалипсис?</a></li></ul></li><li><input type=checkbox id=section-a71a3aee31fa8f939d269196bdc16bfd class=toggle>
<label for=section-a71a3aee31fa8f939d269196bdc16bfd class="flex justify-between"><a href=/lightning/>Лайтнинг</a></label><ul><li><a href=/chto-takoe-laitning/>Что такое Лайтнинг?</a></li><li><a href=/lajtning-adresa/>Лайтнинг-адреса</a></li><li><a href=/privatnost-v-lajtning/>Приватность в сети Lightning</a></li><li><a href=/likvidnost-v-lajtning/>Руководство по управлению ликвидностью в сети Lightning</a></li></ul></li></ul></li><li><input type=checkbox id=section-a6b5e5f811434cb992fdebac0e1d7718 class=toggle>
<label for=section-a6b5e5f811434cb992fdebac0e1d7718 class="flex justify-between"><a href=/practice/>Практика</a></label><ul><li><input type=checkbox id=section-5a7a56ff2c706814b0747555f55b45b2 class=toggle>
<label for=section-5a7a56ff2c706814b0747555f55b45b2 class="flex justify-between"><a href=/practice/buy/>Покупка</a></label><ul><li><a href=/hodl-hodl/>Покупка биткоина без KYC на Hodl Hodl</a></li></ul></li><li><input type=checkbox id=section-a2a499e8fa40193bb85003cabaff5d49 class=toggle>
<label for=section-a2a499e8fa40193bb85003cabaff5d49 class="flex justify-between"><a href=/practice/hodl/>Хранение</a></label><ul><li><a href=/electrum/>Кошелек Электрум</a></li><li><a href=/blue/>Кошелек Blue</a></li><li><a href=/seedsigner/>SeedSigner: оффрлайн-крепость для ваших биткоинов</a></li><li><a href=/coldcard/>Что такое Coldcard?</a></li></ul></li><li><input type=checkbox id=section-4e34fd6dae27eeab9274b5e370a300a7 class=toggle>
<label for=section-4e34fd6dae27eeab9274b5e370a300a7 class="flex justify-between"><a href=/practice/interact/>Взаимодействие</a></label><ul><li><a href=/practice/guide/>Используем биткоин</a></li><li><a href=/practice/bitcoin-noda/>Каждому следует запустить собственную Биткоин-ноду!</a></li></ul></li><li><input type=checkbox id=section-0af442a82e8087438ae3e5d932bfcd3c class=toggle>
<label for=section-0af442a82e8087438ae3e5d932bfcd3c class="flex justify-between"><a href=/practice/lightning/>Лайтнинг на практике</a></label><ul><li><a href=/phoenix/>Кошелек Phoenix</a></li><li><a href=/lnbits/>LNbits</a></li><li><a href=/alby-i-nostr/>Alby и Nostr</a></li></ul></li></ul></li><li><input type=checkbox id=section-4f9efbc916a788429edff50248f79330 class=toggle checked>
<label for=section-4f9efbc916a788429edff50248f79330 class="flex justify-between"><a href=/rabbithole/>Кроличья нора</a></label><ul><li><input type=checkbox id=section-dd34bc6fc687d6e6fb62acabc34277a6 class=toggle checked>
<label for=section-dd34bc6fc687d6e6fb62acabc34277a6 class="flex justify-between"><a href=/books/>Книги</a></label><ul><li><input type=checkbox id=section-e3198834b11fdb517332c04453209400 class=toggle checked>
<label for=section-e3198834b11fdb517332c04453209400 class="flex justify-between"><a href=/izobretaem-bitkoin/>Изобретаем Биткоин</a></label><ul><li><a href=/izobretaem-bitkoin/vstuplenie/>Вступление</a></li><li><a href=/izobretaem-bitkoin/glava-1/>Глава 1: Что такое Биткоин</a></li><li><a href=/izobretaem-bitkoin/glava-2/>Глава 2: Отказываемся от посредника</a></li><li><a href=/izobretaem-bitkoin/glava-3/>Глава 3: Proof of Work</a></li><li><a href=/izobretaem-bitkoin/glava-4/>Глава 4: Майнинг</a></li><li><a href=/izobretaem-bitkoin/glava-5/ class=active>Глава 5: Обеспечение безопасности реестра</a></li><li><a href=/izobretaem-bitkoin/glava-6/>Глава 6: Форки и атаки 51%</a></li><li><a href=/izobretaem-bitkoin/glava-7/>Глава 7: Учетные записи, не идентифицирующие личность</a></li><li><a href=/izobretaem-bitkoin/glava-8/>Глава 8: Кто устанавливает правила?</a></li><li><a href=/izobretaem-bitkoin/glava-9/>Глава 9: Что дальше?</a></li></ul></li><li><input type=checkbox id=section-f289993761aca4a4b180363fe368f984 class=toggle>
<label for=section-f289993761aca4a4b180363fe368f984 class="flex justify-between"><a href=/suverenitet-posredstvom-matematiki/>Суверенитет посредством математики</a></label><ul><li><a href=/suverenitet-posredstvom-matematiki/intro/>Предисловие</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-1/>Глава 1: ВСЯ НАША ЖИЗНЬ — ТОРГОВЛЯ</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-2/>Глава 2: ФИНАНСОВЫЙ АТЕИЗМ</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-3/>Глава 3: ДОВЕРЧИВОСТЬ</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-4/>Глава 4: НЕПОРОЧНОЕ ЗАЧАТИЕ</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-5/>Глава 5: PROOF OF WORK</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-6/>Глава 6: РЕДКОСТЬ</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-7/>Глава 7: ХОДЛ ОН</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-8/>Глава 8: ИЗМЕНЕНИЕ ПРАВИЛ</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-9/>Глава 9: ДЕНЬГИ КАК АКСЕЛЕРАТОР</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-10/>Глава 10: ОКРУЖАЮЩАЯ СРЕДА</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-11/>Глава 11: НОВАЯ ФОРМА ЖИЗНИ</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-12/>Глава 12: БУДУЩЕЕ</a></li><li><a href=/suverenitet-posredstvom-matematiki/mysli/>РАЗМЫШЛЕНИЯ</a></li></ul></li><li><input type=checkbox id=section-c0b499506f23962152d4aaeec11bead1 class=toggle>
<label for=section-c0b499506f23962152d4aaeec11bead1 class="flex justify-between"><a href=/vojna-za-razmer-bloka/>Война за размер блока</a></label><ul><li><a href=/vojna-za-razmer-bloka/glava-1/>Глава 1: Первый удар</a></li><li><a href=/vojna-za-razmer-bloka/glava-2/>Глава 2: Начало</a></li><li><a href=/vojna-za-razmer-bloka/glava-3/>Глава 3: Масштабирование I Монреаль</a></li><li><a href=/vojna-za-razmer-bloka/glava-4/>Глава 4: Масштабирование II Гонконг</a></li><li><a href=/vojna-za-razmer-bloka/glava-5/>Глава 5: SegWit</a></li><li><a href=/vojna-za-razmer-bloka/glava-6/>Глава 6: Сеть Lightning</a></li><li><a href=/vojna-za-razmer-bloka/glava-7/>Глава 7: Bitcoin Classic</a></li><li><a href=/vojna-za-razmer-bloka/glava-8/>Глава 8: Круглый стол в Гонконге</a></li><li><a href=/vojna-za-razmer-bloka/glava-9/>Глава 9: Фейковый Сатоши</a></li><li><a href=/vojna-za-razmer-bloka/glava-10/>Глава 10: DAO</a></li><li><a href=/vojna-za-razmer-bloka/glava-11/>Глава 11: Масштабирование III Милан</a></li><li><a href=/vojna-za-razmer-bloka/glava-12/>Глава 12: Bitcoin Unlimited</a></li><li><a href=/vojna-za-razmer-bloka/glava-13/>Глава 13: Биржи</a></li><li><a href=/vojna-za-razmer-bloka/glava-14/>Глава 14: ASICBoost</a></li><li><a href=/vojna-za-razmer-bloka/glava-15/>Глава 15: Логово драконов</a></li><li><a href=/vojna-za-razmer-bloka/glava-16/>Глава 16: Litecoin</a></li><li><a href=/vojna-za-razmer-bloka/glava-17/>Глава 17: UASF – Активируемый пользователями софтфорк</a></li><li><a href=/vojna-za-razmer-bloka/glava-18/>Глава 18: Нью-Йоркское соглашение</a></li><li><a href=/vojna-za-razmer-bloka/glava-19/>Глава 19: Bitcoin Cash</a></li><li><a href=/vojna-za-razmer-bloka/glava-20/>Глава 20: SegWit2x</a></li><li><a href=/vojna-za-razmer-bloka/glava-21/>Глава 21: Победа</a></li></ul></li><li><input type=checkbox id=section-e5860353bd62663c37a33bec590802ab class=toggle>
<label for=section-e5860353bd62663c37a33bec590802ab class="flex justify-between"><a href=/bychij-kejs-dlya-bitcoin/>Бычий кейс для Биткоина</a></label><ul><li><a href=/bychij-kejs-dlya-bitcoin/predislovie/>Предисловие от Майкла Сэйлора</a></li><li><a href=/bychij-kejs-dlya-bitcoin/prolog/>Пролог</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-1/>Глава 1: Генезис и происхождение денег</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-2/>Глава 2: Атрибуты хорошего средства сбережения</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-3/>Глава 3: Эволюция денег</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-4/>Глава 4: Форма монетизации</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-5/>Глава 5: Новая денежная база</a></li><li><a href=/bychij-kejs-dlya-bitcoin/epilog/>Эпилог</a></li></ul></li></ul></li><li><a href=/videos/>Видео</a><ul></ul></li></ul></li><li><input type=checkbox id=section-d90442343f58c582906ebc7e255e7116 class=toggle>
<label for=section-d90442343f58c582906ebc7e255e7116 class="flex justify-between"><a href=/contribute/>Принять участие</a></label><ul><li><a href=/syntax/>Оформление статей</a></li><li><a href=/github/>Как добавить статью?</a></li><li><a href=/obsidian/>Публикация статей через Obsidian</a></li></ul></li></ul><ul><li><a href=/posts/>Блог</a></li><li><a href=https://github.com/21ideas-org/21ideas.org target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Глава 5: Обеспечение безопасности реестра</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#глава-5-обеспечение-безопасности-реестра>Глава 5: Обеспечение безопасности реестра</a></li><li><a href=#противоречия-блоков>Противоречия блоков</a></li><li><a href=#единственная-достоверная-цепочка>Единственная достоверная цепочка</a></li><li><a href=#обратимость-транзакций>Обратимость транзакций</a></li></ul></nav></aside></header><article class=markdown><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Оглавление</span>
<span>...</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><p><a href=/izobretaem-bitkoin>Главная страница</a></p><p><a href=/izobretaem-bitkoin/vstuplenie>Вступление</a></p><p><a href=/izobretaem-bitkoin/glava-1>Глава 1: Что такое Биткоин</a></p><p><a href=/izobretaem-bitkoin/glava-2>Глава 2: Отказываемся от посредника</a></p><p><a href=/izobretaem-bitkoin/glava-3>Глава 3: Proof of Work</a></p><p><a href=/izobretaem-bitkoin/glava-4>Глава 4: Майнинг</a></p><p><a href=/izobretaem-bitkoin/glava-5>Глава 5: Обеспечение безопасности реестра</a></p><p><a href=/izobretaem-bitkoin/glava-6>Глава 6: Форки и атаки 51%</a></p><p><a href=/izobretaem-bitkoin/glava-7>Глава 7: Учетные записи, не идентифицирующие личность</a></p><p><a href=/izobretaem-bitkoin/glava-8>Глава 8: Кто устанавливает правила?</a></p><p><a href=/izobretaem-bitkoin/glava-9>Глава 9: Что дальше?</a></p></div></label></div><h1 id=глава-5-обеспечение-безопасности-реестра>Глава 5: Обеспечение безопасности реестра
<a class=anchor href=#%d0%b3%d0%bb%d0%b0%d0%b2%d0%b0-5-%d0%be%d0%b1%d0%b5%d1%81%d0%bf%d0%b5%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b1%d0%b5%d0%b7%d0%be%d0%bf%d0%b0%d1%81%d0%bd%d0%be%d1%81%d1%82%d0%b8-%d1%80%d0%b5%d0%b5%d1%81%d1%82%d1%80%d0%b0>#</a></h1><p>До сих пор мы говорили о том, как нам удается хранить копии и обновлять записи в распределенном реестре, не допуская принуждения или коррупции, используя систему лотереи и проверку на основе консенсуса.</p><p>Но что произойдет, если победитель лотереи окажется мошенником? Может ли майнер изменить исторические записи в реестре? Могут ли наши злоумышленники Ева, Дэйв и Фарра вступить в сговор, чтобы переписать историю или изменить баланс счетов, тем самым предоставив себе дополнительные монеты?</p><p>Добро пожаловать в <em>блокчейн</em>. Чаще всего этим словом маркетологи просто украшают свои проекты технологического сектора. При этом блокчейн в Биткоине — это просто способ ведения реестра, основанный на последовательной записи блоков с информацией, необходимой для обеспечения связи между предыдущим и следующим набором транзакций. Это создает линейную историю выпуска и расходования монет, начиная с <em>генезис-блока</em> Сатоши в 2009 году и по сегодняшний день.</p><p>Мы немного схитрили в предыдущей главе, чтобы упростить некоторые вещи. В процессе майнинга в массив входных данных для хеширования входят не только транзакции из очереди на подтверждение и случайное однократно используемое число. Майнер также добавляет хеш предыдущего блока, тем самым связывая свой блок с предшествующим.</p><p>Напомним, что результат хеширования непредсказуем и напрямую зависит от входных данных. Итак, мы модифицировали хеши наших блоков, включив три разных типа входных данных:</p><ol><li><p>Транзакции, которые мы хотим зафиксировать в реестре.</p></li><li><p>Случайное однократно используемое число (нонс).</p></li><li><p>Хеш предыдущего блока, который несет в себе отпечаток всей истории реестра.</p></li></ol><table><thead><tr><th style=text-align:center><img src=/img/ib-464.png alt=ib5-1></th></tr></thead><tbody><tr><td style=text-align:center><em>Входные данные, используемые при построении хеш-числа для участия в лотерее, помимо прочего, включают хеш предыдущего блока. Это создает неразрывную связь каждого следующего блока с общей историей.</em></td></tr></tbody></table><p>Это позволяет нам сохранять последовательность записи всех блоков, ведущую обратно к нулевому генезис-блоку, созданному самим Сатоши. Когда мы записываем новый блок в цепочку, мы должны удостовериться, что этот блок не содержит транзакций, которые тратят биткоины, уже потраченные в предыдущих блоках.</p><p>Если даже незначительно изменить какое-либо из вводимых значений, то хеш-код на выходе трансформируется непредсказуемым и радикальным образом. Если вы вмешаетесь в данные какого-либо записанного ранее блока, вы измените его хеш. А поскольку этот хеш-код использовался в качестве входных данных для последующих блоков, в конечном итоге вы также измените хеш-значения этих блоков. Хеш последнего блока в цепочке, связанный со всеми предыдущими хешами, является отпечатком всей истории цепочки до этого момента!</p><p>Вы не можете обмануть Proof of Work, так как каждая нода в сети знает, сколько энергии нужно потратить на каждый блок, основываясь на целевом числе, требуемом для этого блока. Если бы кто-то попытался изменить один из блоков в цепочке, ему пришлось бы пересчитать хеш-код блока, в который он вмешивается, и, помимо этого, хеш-код каждого последующего блока. Мало того, что подобная манипуляция с блокчейном очевидна для полных нод сети, это занятие еще и является <em>чрезвычайно дорогостоящим</em>.</p><p>Фактически, каждый новый блок повышает безопасность блоков, созданных до него, так как он увеличивает количество электроэнергии, необходимое для пересчета хешей Proof of Work для этой цепочки. На сегодняшний день большинство участников считают транзакцию в блоке, похороненном под 6 последующими, окончательной. Потребовалось бы огромное количество энергии, чтобы переписать последние шесть блоков, учитывая сегодняшнюю общую скоростью хеширования. А как насчет транзакций, находящихся на глубине 100 блоков? Забудьте об этом.</p><p>Когда вы загружаете копию блокчейна, каждая транзакция в каждом блоке полностью прозрачна. Таким образом, вы можете самостоятельно проверить хеши Proof of Work, чтобы убедиться, что человек, отправивший вам реестр, ничего не изменил.</p><h1 id=противоречия-блоков>Противоречия блоков
<a class=anchor href=#%d0%bf%d1%80%d0%be%d1%82%d0%b8%d0%b2%d0%be%d1%80%d0%b5%d1%87%d0%b8%d1%8f-%d0%b1%d0%bb%d0%be%d0%ba%d0%be%d0%b2>#</a></h1><p>У нашей системы консенсуса остался один нерешенный вопрос: как мы можем заставить всех вести одну и ту же линейную историю транзакций в случае, если майнеры одновременно разработают два блока и всем их разошлют?</p><p>Мы имеем дело со всемирной сетью. Люди по всему миру от США до Китая подключены к этой глобальной сети, и все они играют в лотерею Proof of Work.</p><p>Допустим, один из майнеров в Чикаго находит валидный блок. Он объявляет об этом в сети, и все компьютеры по всей Америке его принимают. Между тем, кто-то в Шанхае также находит блок в течение нескольких секунд после чикагского блока. Его соседи до сих пор не слышали об американском блоке — они сначала узнают о китайском блоке.</p><p>Оба этих блока содержат транзакцию в 1 биткоин от Элис Бобу. Но сразу же после получения этого биткоина, не дожидаясь подтверждений в сети, Боб отправляет его Чарли. Из-за ограниченной скорости распространения информации американский блок отражает эту сделку, и конечный баланс Боба равен нулю. Однако китайцы создали свой блок, прежде чем увидеть, как Боб передает деньги Чарли. Китайский блок показывает баланс Боба в 1 биткоин.</p><p>Сеть разделяется, будучи не в состоянии решить, какая цепочка блоков является правильной копией реестра, поскольку обе содержат валидные транзакции, которые связаны с историей во всех предыдущих блоках и обе цепи подкреплены Proof of Work. Это называется <em>разделением цепи</em> (на английском <em>fork</em> — прим. пер.). Вы не можете положиться на какой-либо центральный орган, который мог бы сообщить вам, какая из цепочек победит. Что делать?</p><p>Биткоин предлагает незамысловатое решение: давайте просто подождем и посмотрим. Майнеры свободны выбирать, какой блок они хотят использовать в качестве базы для продолжения майнинга. Американцы будут заниматься майнингом блоков, связанных с тем, о котором они услышали первыми, а китайцы будут майнить поверх своего собственного блока.</p><p>В течение следующего, примерно десятиминутного периода будет добыт новый блок. В коде Биткоина есть правило, согласно которому, при разветвлении цепочки, истинной считается та, на создание которой было потрачено наибольшее количество энергии. Это правило иногда называют “Консенсус Накамото”, в честь Сатоши.</p><p>Допустим, китайцы создают следующий блок. Их цепочка теперь на один блок опережает американскую и содержит наибольший объем Proof of Work. Когда они передадут эту информацию, американские ноды признают, что китайские ноды произвели более длинную цепочку, и проведут реорганизацию своей копии блокчейна (или <em>реорг</em>). Это означает, что они отвергнут один добытый ими блок в пользу двух китайских.</p><table><thead><tr><th style=text-align:center><img src=/img/ib-465.png alt=ib5-2></th></tr></thead><tbody><tr><td style=text-align:center><em>Разветвление цепи — это естественный процесс, который происходит, когда майнеры находят блоки одновременно. Цепочка, в которой следующий блок появляется раньше, признается валидной, а ответвление с теперь невостребованным блоком отвергается.</em></td></tr></tbody></table><p>Американский блок сейчас называется <em>невостребованным (orphan)</em>. Поскольку он был отклонен, майнер, который его добыл, не будет вознагражден и ни одна из транзакций в этом блоке не будет отражена в реестре. Однако отклоненные транзакции не теряются. Некоторые из них, возможно, оказались в конкурирующем китайском блоке, а те, которые не попали в созданный блок, в конечном счете, будут отражены в следующих блоках.</p><p>Майнеры хранят все транзакции, о которых они слышат, в специальном месте на своем компьютере, которое называется <em>мемпул</em>. Любые транзакции из отклоненного блока помещаются обратно в <em>мемпул</em>. Затем они подтверждаются кем-то в будущем, если не конфликтуют с новой историей реестра, созданной последним блоком.</p><p>Обратите внимание на то, что, хотя мы и называем ноды американскими и китайскими, в действительности ноды не знают ни географического местоположения, ни какой-либо другой идентифицирующей информации друг о друге. Единственное, что для них важно, – это то, какая цепочка является самой длинной и что все транзакции в этой цепи валидны (не являются двойным расходованием и т. п.).</p><p>Подобные разветвления цепи являются нормальным явлением и время от времени происходят в сети Биткоин. Они обычно разрешаются в следующем блоке. Усовершенствования в технологии распространения блоков и сетевых подключений между майнерами делают подобные инциденты менее проблемными с течением времени. На сегодняшний день (и, вероятно, в обозримом будущем), Биткоин имеет жесткое ограничение для максимального объема данных, записанных в блок.</p><p>Одна из причин, по которой Биткоин использует относительно небольшие блоки с интервалом примерно в десять минут, заключается в том, чтобы максимально сократить количество невостребованных блоков.</p><p>Майнинг во многом полагается на вероятность. Иногда блоки разнесены на десять минут, а иногда — на секунды. Если бы мы производили блоки каждую секунду или имели очень большие блоки, у нас была бы высокая вероятность того, что американские и китайские блоки будут конфликтовать, потому что майнеры географически находятся далеко друг от друга и, чтобы связаться друг с другом, им потребуется больше времени. Если бы невостребованные блоки появлялись слишком часто, блокчейн не смог бы функционировать. Невостребованные блоки создавались бы поверх других невостребованных блоков, и у нод не было бы времени согласовать последний блок до того, как был бы добыт следующий.</p><p>Важно, чтобы блоки были небольшими, чтобы увеличить вероятность того, что вся сеть успеет узнать о предыдущем блоке, прежде чем приступить к анализу следующего. Другая и, возможно, более важная причина состоит в том, чтобы поддерживать аппаратные требования для работы ноды на относительно низком уровне, с целью стимулировать с течением времени появление большего количества нод и большую децентрализацию майнинга в системе. Большие блоки будут стимулировать майнеров размещаться ближе к центрам обработки данных и, соответственно, в определенных географических регионах, с целью избежать появления невостребованных блоков, что могло бы негативно влиять на их прибыльность.</p><h1 id=единственная-достоверная-цепочка>Единственная достоверная цепочка
<a class=anchor href=#%d0%b5%d0%b4%d0%b8%d0%bd%d1%81%d1%82%d0%b2%d0%b5%d0%bd%d0%bd%d0%b0%d1%8f-%d0%b4%d0%be%d1%81%d1%82%d0%be%d0%b2%d0%b5%d1%80%d0%bd%d0%b0%d1%8f-%d1%86%d0%b5%d0%bf%d0%be%d1%87%d0%ba%d0%b0>#</a></h1><p>Давайте вернемся к нашему примеру из главы 3, где Генри впервые присоединяется к сети Биткоин.</p><p>Нода Генри подключится к нескольким другим нодам в сети и спросит их об известных им нодах, а затем также подключится к некоторым из них. Это называется обнаружением нод.</p><p>Некоторые из этих нод будут заведомо вредоносными и будут давать ему фальшивую копию реестра с неверными подписями для транзакций или поддельными и неправильно созданными биткоинами, которые не имеют валидных хешей Proof of Work. Эти копии будут отклонены, а тем нодам будет немедленно запрещено дальнейшее подключение к ноде Генри <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>Другие ноды, к которым подключается нода Генри, будут честными, но будут хранить противоречивые версии правды. Например, некоторые из них, возможно, вдруг оказались оффлайн и могут отставать на один или два блока. Если будет загружено несколько противоречивых, но одинаково валидных копий блокчейна, программное обеспечение в ноде Генри будет использовать консенсус Накамото. Единственной достоверной версией реестра будет считаться та, на производство которой было потрачено больше ресурсов.</p><p>Ноды постоянно обмениваются друг с другом информацией, чтобы убедиться, что у них есть информация о последних блоках. Поскольку все ноды следуют правилу самой тяжелой цепочки, существует единогласный консенсус о том, каково фактическое состояние реестра. Генри не обязан полагаться на большинство голосов — его будет легко обмануть, если большинство нод будут подконтрольны злоумышленникам.</p><p>Даже если Генри подключится к десяткам устаревших или недобросовестных нод и одной честной ноде, его программное обеспечение Биткоин распознает ту самую правильную копию. Именно она будет содержать наибольшее количество Proof of Work и состоять из валидных транзакций вплоть до генезис-блока. Важность этого нельзя недооценивать. Генри не нужно никому доверять; его нода выполнит все проверки, чтобы убедиться, что блокчейн, на который он смотрит, является единственной достоверной цепочкой.</p><p>Поэтому хакерам-злоумышленникам крайне сложно предоставить ноде ложную копию блокчейна. Для этого потребуется разорвать соединение этой ноды с любыми другими честными нодами и подключить ее только к тем нодам, которые контролируются злоумышленниками.</p><h1 id=обратимость-транзакций>Обратимость транзакций
<a class=anchor href=#%d0%be%d0%b1%d1%80%d0%b0%d1%82%d0%b8%d0%bc%d0%be%d1%81%d1%82%d1%8c-%d1%82%d1%80%d0%b0%d0%bd%d0%b7%d0%b0%d0%ba%d1%86%d0%b8%d0%b9>#</a></h1><p>Две конкурирующие цепочки обычно создаются случайно, и проблема быстро решается. Однако те, кто хочет атаковать сеть, могут воспользоваться консенсусом Накамото, при условии, что они контролируют более 50% хешрейта. Они могут создать самую длинную цепочку Proof of Work, содержащую транзакции на свой выбор, если они готовы потратить для этого достаточно энергии. Когда они транслируют эту цепочку, другие ноды примут ее как единственную достоверную. Это называется атакой 51%, поскольку требует контроля более половины хешрейта.</p><p>Важно понимать, что в сети Биткоин нет фактической завершенности транзакций, поскольку атаки 51% или даже случайное преобразование валидных блоков в невостребованные теоретически возможно. Из-за этого получатели транзакций обычно ждут, пока несколько блоков будут добыты поверх транзакции, чтобы считать ее окончательно закрепленной в блокчейне. К этому моменту количество энергии, необходимое для отмены транзакции, настолько высоко, что это вряд ли произойдет.</p><p>Блоки, созданные поверх блока, содержащего интересующую вас транзакцию, часто называют <em>подтверждениями</em>. Поэтому, когда вы слышите, что транзакция Биткоин имеет шесть подтверждений, это означает, что шесть блоков были добыты поверх нее. Если вы продаете цифровую книгу с минимальными затратами для себя как для продавца, вам будет достаточно лишь одного подтверждения или можно обойтись и вовсе без них; вы можете предоставлять ссылку для скачивания, как только увидите транзакцию в сети. Если вы продаете дом, возможно, вы захотите дождаться двенадцати подтверждений, что приблизительно равно двум часам майнинга. Чем дольше вы ждете, тем больше Proof of Work накапливается поверх блока, содержащего вашу транзакцию, и тем дороже становится процесс обращения транзакции вспять. Сегодня большинство людей принимают 6 подтверждений в качестве доказательства необратимости платежа.</p><p>Если скорость хеширования Биткоина значительно упадет, а это бы означало, что меньшее количество энергии защищает каждый блок, всегда можно увеличить количество подтверждений, которые вы будете требовать для окончательного расчета. Хотя незавершенность транзакций на первый взгляд может насторожить, важно помнить, что транзакции по кредитным картам обычно могут быть отменены через 120 дней после их совершения.</p><p>При этом биткоин-транзакции практически необратимы всего несколько блоков спустя. С этой точки зрения, обратимость и окончательность биткоин-транзакций — это значительное улучшение по сравнению с большинством традиционных платежных систем, по крайней мере, с точки зрения продавца.</p><p>Сегодняшние оценки показывают, что если бы в вашем распоряжении была энергия всей сети Биткоин (действительно щедрое предложение, поскольку вам бы довелось контролировать количество энергии, сопоставимое с потреблением страны средней величины), и все специализированное оборудование сети Биткоин, у вас все равно ушло бы больше года, на то, чтобы переписать всю историю цепочки. Вы можете изучить эти данные на <a href=http://bitcoin.sipa.be/>http://bitcoin.sipa.be</a>.</p><hr><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Оглавление</span>
<span>...</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><p><a href=/izobretaem-bitkoin>Главная страница</a></p><p><a href=/izobretaem-bitkoin/vstuplenie>Вступление</a></p><p><a href=/izobretaem-bitkoin/glava-1>Глава 1: Что такое Биткоин</a></p><p><a href=/izobretaem-bitkoin/glava-2>Глава 2: Отказываемся от посредника</a></p><p><a href=/izobretaem-bitkoin/glava-3>Глава 3: Proof of Work</a></p><p><a href=/izobretaem-bitkoin/glava-4>Глава 4: Майнинг</a></p><p><a href=/izobretaem-bitkoin/glava-5>Глава 5: Обеспечение безопасности реестра</a></p><p><a href=/izobretaem-bitkoin/glava-6>Глава 6: Форки и атаки 51%</a></p><p><a href=/izobretaem-bitkoin/glava-7>Глава 7: Учетные записи, не идентифицирующие личность</a></p><p><a href=/izobretaem-bitkoin/glava-8>Глава 8: Кто устанавливает правила?</a></p><p><a href=/izobretaem-bitkoin/glava-9>Глава 9: Что дальше?</a></p></div></label></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Это превосходное эссе подробно рассказывает о том, как биткоин работает с недействительными блоками: <a href=https://hackernoon.com/bitcoin-miners-beware-invalid-blocks-need-not-apply-51c293ee278b>https://hackernoon.com/bitcoin-miners-beware-invalid-blocks-need-not-apply-51c293ee278b</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#глава-5-обеспечение-безопасности-реестра>Глава 5: Обеспечение безопасности реестра</a></li><li><a href=#противоречия-блоков>Противоречия блоков</a></li><li><a href=#единственная-достоверная-цепочка>Единственная достоверная цепочка</a></li><li><a href=#обратимость-транзакций>Обратимость транзакций</a></li></ul></nav></div></aside></main></body></html>