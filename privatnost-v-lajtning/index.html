<!doctype html><html lang=ru-RU dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Помимо преимущества практически мгновенных платежей, Lightning также может улучшить приватность финансовых взаимодействий. К сожалению, есть сценарии, в которых Lightning не так хорош для обеспечения приватности, как может показаться на первый взгляд."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=lightning content="21ideas@getalby.com"><meta property="og:title" content="Приватность в сети Lightning"><meta property="og:description" content="Помимо преимущества практически мгновенных платежей, Lightning также может улучшить приватность финансовых взаимодействий. К сожалению, есть сценарии, в которых Lightning не так хорош для обеспечения приватности, как может показаться на первый взгляд."><meta property="og:type" content="article"><meta property="og:url" content="https://21ideas.org/privatnost-v-lajtning/"><meta property="og:image" content="https://21ideas.org/img/pln-216.jpeg"><title>Приватность в сети Lightning | 21ideas</title><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon media="(prefers-color-scheme: dark)" sizes=180x180 href=/apple-touch-icon-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=32x32 href=/favicon-32x32-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=16x16 href=/favicon-16x16-dark.png><link rel=alternate hreflang=en href=https://21ideas.org/en/lightning-network-privacy/ title="Lightning Network Privacy"><link rel=stylesheet href=/book.min.3ccd2c056255dd77a07f397725e829449ae55b167758de17b2708acc660f649c.css integrity="sha256-PM0sBWJV3Xegfzl3JegpRJrlWxZ3WN4XsnCKzGYPZJw=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/ru.search.min.8a35ddb84f6d420314317af4fd6b1aeafc3a3e484d09a1f06c388e3c4f356fef.js integrity="sha256-ijXduE9tQgMUMXr0/Wsa6vw6PkhNCaHwbDiOPE81b+8=" crossorigin=anonymous></script>
<script type=text/javascript src=https://unpkg.com/zapthreads@0.5.0/dist/zapthreads.iife.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><picture><source srcset=/svg/logo_white.svg media="(prefers-color-scheme: dark)"><img src=/svg/logo_black.svg alt=Logo></picture>
<span>21ideas</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Поиск aria-label=Поиск maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Русский</a></label><ul><li><a href=https://21ideas.org/en/lightning-network-privacy/>English</a></li></ul></li></ul><ul><li><input type=checkbox id=section-512cd8dd047d9194f8b56568c3c961b4 class=toggle>
<label for=section-512cd8dd047d9194f8b56568c3c961b4 class="flex justify-between"><a href=/start/>Старт</a></label><ul><li><a href=/start/start/>Что такое Биткоин?</a></li><li><a href=/start/guide/>Используем биткоин</a></li><li><a href=/course/>Биткоин от А до Я</a></li><li><a href=/bitcoin-myths/>Разрушаем мифы о Биткоине</a></li><li><a href=/shitcoin-casino/>Не играйте в щиткоин-казино</a></li></ul></li><li><input type=checkbox id=section-4f53cbff6ac5b0f9cfca5f1f9f3b991c class=toggle checked>
<label for=section-4f53cbff6ac5b0f9cfca5f1f9f3b991c class="flex justify-between"><a href=/theory/>Теория</a></label><ul><li><input type=checkbox id=section-c4ddad175f26bb1d35909363eff62296 class=toggle>
<label for=section-c4ddad175f26bb1d35909363eff62296 class="flex justify-between"><a href=/economics/>Экономика</a></label><ul><li><input type=checkbox id=section-182005e73bd80d066a67724ac5ed0bad class=toggle>
<label for=section-182005e73bd80d066a67724ac5ed0bad class="flex justify-between"><a href=/pzv/>Постепенно, затем внезапно</a></label><ul><li><a href=/pzv/postepenno-zatem-vnezapno/>Введение</a></li><li><a href=/pzv/bitkoin-nelzya-skopirovat/>Биткоин нельзя скопировать</a></li><li><a href=/pzv/bitkoin-ne-slishkom-volatilen/>Биткоин не слишком волатилен</a></li><li><a href=/pzv/bitkoin-ne-tratit-energiyu-zrya/>Биткоин не тратит энергию зря</a></li><li><a href=/pzv/bitkoin-ne-slishkom-medlennyj/>Биткоин не слишком медленный</a></li><li><a href=/pzv/bitkoin-eto-ispravit/>Биткоин это исправит</a></li><li><a href=/pzv/bitkoin-ne-blokchejn/>Биткоин, не блокчейн</a></li><li><a href=/pzv/bitkoin-nichem-ne-podkreplen/>Биткоин ничем не подкреплен?</a></li><li><a href=/pzv/bitkoin-ne-finansovaya-piramida/>Биткоин — не финансовая пирамида</a></li><li><a href=/pzv/bitkoin-ne-mozhet-byt-zabanen/>Биткоин не может быть забанен</a></li><li><a href=/pzv/bitkoin-ne-dlya-prestupnikov/>Биткоин не для преступников</a></li><li><a href=/pzv/bitkoin-obescenivaet-ostalnye-dengi/>Биткоин обесценивает остальные деньги</a></li><li><a href=/pzv/bitkoin-zov-k-edineniyu/>Биткоин — зов к единению</a></li><li><a href=/pzv/bitkoin-eto-zdravyj-smysl/>Биткоин — это здравый смысл</a></li><li><a href=/pzv/bitkoin-velikaya-definancializaciya/>Биткоин — великая дефинанcиализация</a></li></ul></li><li><input type=checkbox id=section-7f9a42e8b73c082c7ee1415fd0eae7fb class=toggle>
<label for=section-7f9a42e8b73c082c7ee1415fd0eae7fb class="flex justify-between"><a href=/sb/>Становление Биткоина</a></label><ul><li><a href=/sb/stanovlenie-intro/>Введение</a></li><li><a href=/sb/stanovlenie-1/>О времени</a></li><li><a href=/sb/stanovlenie-2/>О людях</a></li><li><a href=/sb/stanovlenie-3/>Знакомьтесь: деньги</a></li><li><a href=/sb/stanovlenie-4/>Поворот не туда</a></li><li><a href=/sb/stanovlenie-5/>Цифровая редкость</a></li><li><a href=/sb/stanovlenie-6/>Цифровые контракты</a></li><li><a href=/sb/stanovlenie-7/>Недостающие части головоломки</a></li></ul></li><li><a href=/bitkoin-ne-vredit-okruzhayushej-srede/>Биткоин и окружающая среда</a></li><li><a href=/sem-setevyh-effektov-bitkoina/>Семь сетевых эффектов Биткоина</a></li><li><a href=/hozyaeva-i-raby-deneg/>Хозяева и рабы денег</a></li><li><a href=/strukturnaya-perestrojka/>Структурная перестройка</a></li><li><a href=/v-zashchitu-deflyacii/>В защиту дефляции</a></li><li><a href=/sravnenie-monetarnyh-standartov/>Сравнение монетарных стандартов</a></li><li><a href=/negativnye-effekty-neftedollara/>Негативные внешние эффекты нефтедоллара</a></li><li><a href=/raskoshelivaemsya/>Раскошеливаемся (Shelling Out): Происхождение денег</a></li><li><a href=/bitcoin-i-ritmy-istorii/>Биткоин и ритмы истории</a></li><li><a href=/bitcoin-i-internet-cikly-hopfa/>Биткоин и интернет-циклы Хопфа</a></li><li><a href=/dengi-blokchejny-i-socialnaya-masshtabiruemost/>Деньги, блокчейны и социальная масштабируемость</a></li><li><a href=/chto-takoe-dengi/>Что такое деньги</a></li><li><a href=/vyzhivaet-silnejshij/>Выживает сильнейший</a></li><li><a href=/strategiya-dca/>Стратегия DCA</a></li><li><a href=/jevons-paradox/>Парадокс Джевонса: Обратная истина</a></li></ul></li><li><input type=checkbox id=section-e83ea293497a2ab861101ccfc99a8ecc class=toggle>
<label for=section-e83ea293497a2ab861101ccfc99a8ecc class="flex justify-between"><a href=/security/>Безопасность</a></label><ul><li><a href=/kak-hranit-kljuchi/>Биткоин-кошельки. Зачем и как хранить свои приватные ключи</a></li><li><a href=/seed/>Что такое сид-фраза?</a></li><li><a href=/seed-security/>Как обезопасить свои сид-фразы?</a></li><li><a href=/passphrase/>Насколько надежна ваша парольная фраза?</a></li><li><a href=/multisig/>Все о мультисиг</a></li><li><a href=/hwws/>Сравнение аппаратных кошельков</a></li><li><a href=/multisig-1/>Мультисиг. Часть I</a></li><li><a href=/multisig-2/>Мультисиг. Часть II: Отдельные ключи – основа мультиподписи</a></li></ul></li><li><input type=checkbox id=section-e9552bdc5e196adcf41f88d9180bebda class=toggle>
<label for=section-e9552bdc5e196adcf41f88d9180bebda class="flex justify-between"><a href=/privacy/>Приватность</a></label><ul><li><a href=/privacy/luchshie-praktiki/>Как сохранить приватность?</a></li><li><a href=/privacy/no-kyc/>Никаких KYC, берегите персональные данные</a></li><li><a href=/privatnost-v-seti-bitcoin/>Приватность в сети Биткоин</a></li><li><a href=/bitcoin-stanovitsya-kriticheski-vazhnym/>Биткоин становится критически важным</a></li><li><a href=/bip47-ili-gadkij-utenok/>BIP47, или гадкий утенок</a></li><li><input type=checkbox id=section-197d372e28cf8111d6d38339599c8c1f class=toggle>
<label for=section-197d372e28cf8111d6d38339599c8c1f class="flex justify-between"><a href=/privacy/oxt/>Понимание приватности в сети Биткоин с помощью OXT</a></label><ul><li><a href=/privacy/oxt-1/>Часть 1: Анализ цепочки и приватность транзакций</a></li><li><a href=/privacy/oxt-2/>Часть 2: Ключевые концепции анализа цепочки</a></li><li><a href=/privacy/oxt-3/>Часть 3: Защита от анализа цепочки</a></li><li><a href=/privacy/oxt-4/>Часть 4: Применение концепций анализа цепочки для улучшения приватности пользователей</a></li></ul></li><li><a href=/privacy/coinjoin/>Понимание и использование CoinJoin</a></li></ul></li><li><input type=checkbox id=section-e49feff8bdc4c8d9840548f297831fbc class=toggle>
<label for=section-e49feff8bdc4c8d9840548f297831fbc class="flex justify-between"><a href=/protocol/>Протокол</a></label><ul><li><a href=/kto-kontroliruet-bitkoin-kor/>Кто контролирует Bitcoin Core?</a></li><li><a href=/vechnaja-borba/>Вечная борьба Биткоина</a></li><li><a href=/ob-udobstve-vzaimodejstvija-s-bitcoinom/>Об удобстве взаимодействия с Биткоином</a></li><li><a href=/bitcoin-zoloto-2-0/>Биткоин: цифровое золото или пиринговая наличность?</a></li><li><a href=/upravlenie-bitcoin/>Управление Биткоином</a></li><li><a href=/doverennye-tretyi-storony/>Доверенные третьи стороны — это бреши в системе безопасности</a></li><li><a href=/21-million-ne-podlezhit-obsuzhdeniyu/>21 миллион не подлежит обсуждению</a></li><li><a href=/proof-of-work/>Proof of Work: доказательство проделанной работы</a></li><li><a href=/proof-of-stake-eto-skam/>Proof of Stake – это скам</a></li><li><a href=/byl-li-satoshi-zhadnym-majnerom/>Был ли Сатоши жадным майнером?</a></li><li><a href=/taproot/>Что такое Taproot</a></li><li><a href=/bomby-slozhnosti-ethereum/>Бомбы сложности Ethereum</a></li><li><a href=/rgb/>Разбирая протокол RGB</a></li><li><a href=/difficulty/>О корректировке сложности майнинга</a></li><li><a href=/sravnenie-tipov-bitcoin-adresov/>Типы биткоин-адресов</a></li><li><a href=/halving/>Что такое Биткоин-халвинг?</a></li><li><a href=/myths-about-halving/>Мифы о Биткоин-халвинге</a></li></ul></li><li><input type=checkbox id=section-8509d6019544d659ccbc67af32e91aea class=toggle>
<label for=section-8509d6019544d659ccbc67af32e91aea class="flex justify-between"><a href=/history/>История</a></label><ul><li><input type=checkbox id=section-aa23c48a9c39058e09f0c1d84d8ebaca class=toggle>
<label for=section-aa23c48a9c39058e09f0c1d84d8ebaca class="flex justify-between"><a href=/gf/>Генезис-файлы</a></label><ul><li><a href=/gf/genesis-intro/>Пролог</a></li><li><a href=/gf/genesis-1/>Часть I: eCash Дэвида Чаума и зарождение мечты шифропанков</a></li><li><a href=/gf/genesis-2/>Часть II: Hashcash или как Адам Бэк разработал сердце Биткоина</a></li><li><a href=/gf/genesis-3/>Часть III: Если у Биткоина был прототип, то это были b-money Вэя Дая</a></li><li><a href=/gf/genesis-4/>Часть IV: Создавая Bit Gold, Сабо был в двух шагах от изобретения Биткоина</a></li><li><a href=/gf/genesis-5/>Часть V: Как поиски цифровой наличности привели Хэла Финни к созданию RPOW (и не только)</a></li></ul></li><li><a href=/hal-finney/>Хэл Финни — жизнь и смерть легенды движения шифропанков</a></li><li><a href=/bitcoin-and-me/>Биткоин и я</a></li><li><a href=/bitcoin-reformaciya/>Биткоин-Реформация</a></li><li><a href=/bitcoin-forks/>Полная история консенсус-форков Биткоина</a></li></ul></li><li><input type=checkbox id=section-042f7e1a0906e66d4ceaeeb231b37175 class=toggle>
<label for=section-042f7e1a0906e66d4ceaeeb231b37175 class="flex justify-between"><a href=/philosophy/>Философия</a></label><ul><li><input type=checkbox id=section-1048f9a65fd469c32ebe9f1814dc2a1c class=toggle>
<label for=section-1048f9a65fd469c32ebe9f1814dc2a1c class="flex justify-between"><a href=/chemu-ya-nauchilsya-u-bitcoina/>Чему я научился у Биткоина?</a></label><ul><li><a href=/chemu-ya-nauchilsya-u-bitcoina/filosofskie-uroki-bitcoina/>Часть1. Философские уроки Биткоина</a></li></ul></li><li><a href=/ne-shitcoin/>Биткоин, не щиткоин</a></li><li><a href=/neotemlemye-prava-sobstvennosti/>Неотъемлемые права собственности</a></li><li><a href=/manifest-kriptoanarhista/>Манифест криптоанархиста</a></li><li><a href=/manifest-shifropanka/>Манифест шифропанка</a></li><li><a href=/tyulpannaya-lihoradka/>Биткоин — современная голландская тюльпанная лихорадка?</a></li><li><a href=/vse-moshenniki/>Все — мошенники</a></li><li><a href=/svoboda-cennosti/>Свобода ценности</a></li><li><a href=/bitcoin-meme/>Биткоин — единственный реальный мем</a></li><li><a href=/nol-i-bitcoin/>Ноль и Биткоин</a></li><li><a href=/crypto-bro/>Дорогие крипто- и фиат-бро</a></li><li><a href=/boremsya-s-poddelnymi-bitcoin/>Боремся с поддельными биткоинами</a></li><li><a href=/bit%D1%81oin-eto-micelij/>Биткоин — это мицелий</a></li><li><a href=/pochemu-bitcoin-zhivoj-organizm/>Доказательство жизни. Почему Биткоин — живой организм</a></li><li><a href=/samaya-mirnaya-revolyuciya/>Самая мирная революция</a></li><li><a href=/o-bitcoin-vselennoj/>О Биткоин-вселенной</a></li><li><a href=/bitcoin-dissidenty/>Биткоин-диссиденты</a></li><li><a href=/bitcoin-svoboda/>Биткоин = свобода</a></li></ul></li><li><input type=checkbox id=section-66beb9b5ed04619b43509a5a9298b3a2 class=toggle>
<label for=section-66beb9b5ed04619b43509a5a9298b3a2 class="flex justify-between"><a href=/future/>Будущее</a></label><ul><li><input type=checkbox id=section-df24c55b3b01a044f159006399dd3f62 class=toggle>
<label for=section-df24c55b3b01a044f159006399dd3f62 class="flex justify-between"><a href=/ba/>Биткоин-астрономия</a></label><ul><li><a href=/ba/1/>Постгипербиткоинизация</a></li><li><a href=/ba/2/>Миллион крошечных миров</a></li><li><a href=/ba/3/>Первый контакт</a></li></ul></li><li><a href=/ej-bitcoin-pritormozi/>Эй, Биткоин, притормози</a></li><li><a href=/apokalipsis/>Сможет ли Биткоин пережить апокалипсис?</a></li><li><a href=/bitcoin-i-teplovaya-energiya-okeanov/>Биткоин и тепловая энергия океанов</a></li></ul></li><li><input type=checkbox id=section-a71a3aee31fa8f939d269196bdc16bfd class=toggle checked>
<label for=section-a71a3aee31fa8f939d269196bdc16bfd class="flex justify-between"><a href=/lightning/>Лайтнинг</a></label><ul><li><a href=/what-is-lightning-network/>Что такое Лайтнинг?</a></li><li><a href=/lightning-wallets/>Лайтнинг-кошельки</a></li><li><a href=/lightning-addresses/>Лайтнинг-адреса</a></li><li><a href=/privatnost-v-lajtning/ class=active>Приватность в сети Lightning</a></li><li><a href=/centralizovanna-li-set-lightning/>Централизованна ли сеть Lightning?</a></li><li><a href=/mekhanizm-raboty-lightning/>Механизм работы Lightning Network</a></li><li><a href=/problema-vhodyashchej-likvidnosti/>Решение проблемы входящей ликвидности</a></li></ul></li></ul></li><li><input type=checkbox id=section-a6b5e5f811434cb992fdebac0e1d7718 class=toggle>
<label for=section-a6b5e5f811434cb992fdebac0e1d7718 class="flex justify-between"><a href=/practice/>Практика</a></label><ul><li><input type=checkbox id=section-5a7a56ff2c706814b0747555f55b45b2 class=toggle>
<label for=section-5a7a56ff2c706814b0747555f55b45b2 class="flex justify-between"><a href=/practice/buy/>Покупка</a></label><ul><li><a href=/newbie-buy/>Покупка и хранение биткоина для новичков</a></li><li><a href=/hodl-hodl/>Покупка биткоина без KYC на Hodl Hodl</a></li><li><a href=/robosats/>RoboSats: Приватный p2p обмен</a></li></ul></li><li><input type=checkbox id=section-a2a499e8fa40193bb85003cabaff5d49 class=toggle>
<label for=section-a2a499e8fa40193bb85003cabaff5d49 class="flex justify-between"><a href=/practice/hodl/>Хранение</a></label><ul><li><a href=/electrum/>Кошелек Электрум</a></li><li><a href=/blue/>Кошелек Blue</a></li><li><a href=/seedsigner/>SeedSigner: оффлайн-крепость для ваших биткоинов</a></li><li><a href=/coldcard/>Что такое Coldcard?</a></li></ul></li><li><input type=checkbox id=section-4e34fd6dae27eeab9274b5e370a300a7 class=toggle>
<label for=section-4e34fd6dae27eeab9274b5e370a300a7 class="flex justify-between"><a href=/practice/interact/>Взаимодействие</a></label><ul><li><a href=/practice/bitcoin-node/>Каждому следует запустить собственную Биткоин-ноду!</a></li><li><a href=/orangepilling-in-5-min/>Оранжпиллинг за 5 минут</a></li><li><a href=/5-tips-for-teaching-bitcoin/>5 советов по обучению Биткоину</a></li></ul></li><li><input type=checkbox id=section-ed813fe32867bdad9fbc116cfa115400 class=toggle>
<label for=section-ed813fe32867bdad9fbc116cfa115400 class="flex justify-between"><a href=/practice-privacy/>Практики приватности</a></label><ul><li><input type=checkbox id=section-20fa42a588c7405850eac56c7752c25b class=toggle>
<label for=section-20fa42a588c7405850eac56c7752c25b class="flex justify-between"><a href=/practice-privacy/dojo/>Установка Биткоин-узла Dojo на x86</a></label><ul><li><a href=/practice-privacy/dojo-0/>Введение</a></li><li><a href=/practice-privacy/dojo-1/>Установка Bitcoin Core</a></li><li><a href=/practice-privacy/dojo-2/>Установка индексатора Fulcrum</a></li><li><a href=/practice-privacy/dojo-3/>Установка блокчейн-обозревателя Mempool</a></li><li><a href=/practice-privacy/dojo-4/>Установка Samourai Dojo</a></li><li><a href=/practice-privacy/dojo-5/>Установка Whirlpool CLI и конфигурация межсетевого экрана</a></li><li><a href=/practice-privacy/dojo-6/>Установка обновлений пакетов</a></li></ul></li><li><a href=/practice-privacy/ronindojo/>Установка RoninDojo на x86</a></li><li><a href=/grapheneos/>GrapheneOS: Избавляемся от слежки Google на смартфоне</a></li></ul></li><li><input type=checkbox id=section-0af442a82e8087438ae3e5d932bfcd3c class=toggle>
<label for=section-0af442a82e8087438ae3e5d932bfcd3c class="flex justify-between"><a href=/practice/lightning/>Лайтнинг на практике</a></label><ul><li><a href=/phoenix/>Кошелек Phoenix</a></li><li><a href=/lnbits/>LNbits – швейцарский нож среди лайтнинг-приложений</a></li><li><a href=/alby-i-nostr/>Alby и Nostr</a></li><li><a href=/zapplanner/>Подписки с помощью Лайтнинг</a></li><li><a href=/lntips/>Телеграм-бот @LightningTipBot</a></li><li><a href=/ochishchaem-bitcoin-cherez-lajtning/>Очищаем биткоины через сеть Лайтнинг</a></li><li><a href=/likvidnost-v-lajtning/>Руководство по управлению ликвидностью в сети Lightning</a></li><li><a href=/mutiny/>Кошелек Mutiny</a></li></ul></li></ul></li><li><input type=checkbox id=section-4f9efbc916a788429edff50248f79330 class=toggle>
<label for=section-4f9efbc916a788429edff50248f79330 class="flex justify-between"><a href=/rabbithole/>Кроличья нора</a></label><ul><li><input type=checkbox id=section-dd34bc6fc687d6e6fb62acabc34277a6 class=toggle>
<label for=section-dd34bc6fc687d6e6fb62acabc34277a6 class="flex justify-between"><a href=/books/>Книги</a></label><ul><li><a href=/whitepaper/>Белая книга</a></li><li><input type=checkbox id=section-e3198834b11fdb517332c04453209400 class=toggle>
<label for=section-e3198834b11fdb517332c04453209400 class="flex justify-between"><a href=/izobretaem-bitkoin/>Изобретаем Биткоин</a></label><ul><li><a href=/izobretaem-bitkoin/vstuplenie/>Вступление</a></li><li><a href=/izobretaem-bitkoin/glava-1/>Глава 1: Что такое Биткоин</a></li><li><a href=/izobretaem-bitkoin/glava-2/>Глава 2: Отказываемся от посредника</a></li><li><a href=/izobretaem-bitkoin/glava-3/>Глава 3: Proof of Work</a></li><li><a href=/izobretaem-bitkoin/glava-4/>Глава 4: Майнинг</a></li><li><a href=/izobretaem-bitkoin/glava-5/>Глава 5: Обеспечение безопасности реестра</a></li><li><a href=/izobretaem-bitkoin/glava-6/>Глава 6: Форки и атаки 51%</a></li><li><a href=/izobretaem-bitkoin/glava-7/>Глава 7: Учетные записи, не идентифицирующие личность</a></li><li><a href=/izobretaem-bitkoin/glava-8/>Глава 8: Кто устанавливает правила?</a></li><li><a href=/izobretaem-bitkoin/glava-9/>Глава 9: Что дальше?</a></li></ul></li><li><input type=checkbox id=section-f289993761aca4a4b180363fe368f984 class=toggle>
<label for=section-f289993761aca4a4b180363fe368f984 class="flex justify-between"><a href=/suverenitet-posredstvom-matematiki/>Суверенитет посредством математики</a></label><ul><li><a href=/suverenitet-posredstvom-matematiki/intro/>Предисловие</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-1/>Глава 1: Вся наша жизнь — торговля</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-2/>Глава 2: Финансовый атеизм</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-3/>Глава 3: Доверчивость</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-4/>Глава 4: Непорочное зачатие</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-5/>Глава 5: Proof of Work</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-6/>Глава 6: Редкость</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-7/>Глава 7: Ходл Он</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-8/>Глава 8: Изменение правил</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-9/>Глава 9: Деньги как акселератор</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-10/>Глава 10: Окружающая среда</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-11/>Глава 11: Новая форма жизни</a></li><li><a href=/suverenitet-posredstvom-matematiki/glava-12/>Глава 12: Будущее</a></li><li><a href=/suverenitet-posredstvom-matematiki/mysli/>Размышления</a></li></ul></li><li><input type=checkbox id=section-e5860353bd62663c37a33bec590802ab class=toggle>
<label for=section-e5860353bd62663c37a33bec590802ab class="flex justify-between"><a href=/bychij-kejs-dlya-bitcoin/>Бычий кейс для Биткоина</a></label><ul><li><a href=/bychij-kejs-dlya-bitcoin/predislovie/>Предисловие от Майкла Сэйлора</a></li><li><a href=/bychij-kejs-dlya-bitcoin/prolog/>Пролог</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-1/>Глава 1: Генезис и происхождение денег</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-2/>Глава 2: Атрибуты хорошего средства сбережения</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-3/>Глава 3: Эволюция денег</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-4/>Глава 4: Форма монетизации</a></li><li><a href=/bychij-kejs-dlya-bitcoin/glava-5/>Глава 5: Новая денежная база</a></li><li><a href=/bychij-kejs-dlya-bitcoin/epilog/>Эпилог</a></li></ul></li><li><input type=checkbox id=section-4b442928210bf7bb8d82eb48c684874d class=toggle>
<label for=section-4b442928210bf7bb8d82eb48c684874d class="flex justify-between"><a href=/21-sposob/>21 способ</a></label><ul><li><a href=/21-sposob/vvedenie/>Введение</a></li><li><a href=/21-sposob/glava-0/>Глава 0</a></li><li><a href=/21-sposob/glava-01/>Глава 0.1</a></li><li><a href=/21-sposob/glava-1-bitcoin-eto-ideya/>Глава 1. Биткоин — это идея</a></li><li><a href=/21-sposob/glava-2-bitcoin-eto-vremya/>Глава 2. Биткоин — это время</a></li><li><a href=/21-sposob/glava-3-bitcoin-volshebnye-internet-dengi/>Глава 3. Биткоин — волшебные интернет-деньги</a></li><li><a href=/21-sposob/glava-6-bitcoin-eto-cifrovaya-redkost/>Глава 6. Биткоин – это цифровая редкость</a></li></ul></li><li><input type=checkbox id=section-4821edbebdbff526db8aaad627df8c2e class=toggle>
<label for=section-4821edbebdbff526db8aaad627df8c2e class="flex justify-between"><a href=/suverennaya-lichnost/>Суверенная личность</a></label><ul><li><a href=/suverennaya-lichnost/glava-1/>Глава 1: Переходный период 2000 года</a></li><li><a href=/suverennaya-lichnost/rezyume/>Резюме</a></li><li><a href=/suverennaya-lichnost/glava-2/>Глава 2: Метаполитические трансформации в исторической перспективе</a></li><li><a href=/suverennaya-lichnost/glava-3/>Глава 3: К востоку от Эдема</a></li><li><a href=/suverennaya-lichnost/glava-4/>Глава 4: Последние дни политики</a></li><li><a href=/suverennaya-lichnost/glava-5/>Глава 5: Самочувствие национального государства</a></li><li><a href=/suverennaya-lichnost/glava-6/>Глава 6: Мегаполитика информационной эпохи</a></li><li><a href=/suverennaya-lichnost/glava-7/>Глава 7: Выход за рамки локальности</a></li><li><a href=/suverennaya-lichnost/glava-8/>Глава 8: Конец уравнительной экономики</a></li><li><a href=/suverennaya-lichnost/glava-9/>Глава 9: Национализм, реакция и новые луддиты</a></li><li><a href=/suverennaya-lichnost/glava-10/>Глава 10: Сумерки демократии</a></li><li><a href=/suverennaya-lichnost/glava-11/>Мораль и преступность в “естественной экономике” информационного века</a></li></ul></li><li><input type=checkbox id=section-c0b499506f23962152d4aaeec11bead1 class=toggle>
<label for=section-c0b499506f23962152d4aaeec11bead1 class="flex justify-between"><a href=/vojna-za-razmer-bloka/>Война за размер блока</a></label><ul><li><a href=/vojna-za-razmer-bloka/glava-1/>Глава 1: Первый удар</a></li><li><a href=/vojna-za-razmer-bloka/glava-2/>Глава 2: Начало</a></li><li><a href=/vojna-za-razmer-bloka/glava-3/>Глава 3: Масштабирование I Монреаль</a></li><li><a href=/vojna-za-razmer-bloka/glava-4/>Глава 4: Масштабирование II Гонконг</a></li><li><a href=/vojna-za-razmer-bloka/glava-5/>Глава 5: SegWit</a></li><li><a href=/vojna-za-razmer-bloka/glava-6/>Глава 6: Сеть Lightning</a></li><li><a href=/vojna-za-razmer-bloka/glava-7/>Глава 7: Bitcoin Classic</a></li><li><a href=/vojna-za-razmer-bloka/glava-8/>Глава 8: Круглый стол в Гонконге</a></li><li><a href=/vojna-za-razmer-bloka/glava-9/>Глава 9: Фейковый Сатоши</a></li><li><a href=/vojna-za-razmer-bloka/glava-10/>Глава 10: DAO</a></li><li><a href=/vojna-za-razmer-bloka/glava-11/>Глава 11: Масштабирование III Милан</a></li><li><a href=/vojna-za-razmer-bloka/glava-12/>Глава 12: Bitcoin Unlimited</a></li><li><a href=/vojna-za-razmer-bloka/glava-13/>Глава 13: Биржи</a></li><li><a href=/vojna-za-razmer-bloka/glava-14/>Глава 14: ASICBoost</a></li><li><a href=/vojna-za-razmer-bloka/glava-15/>Глава 15: Логово драконов</a></li><li><a href=/vojna-za-razmer-bloka/glava-16/>Глава 16: Litecoin</a></li><li><a href=/vojna-za-razmer-bloka/glava-17/>Глава 17: UASF – Активируемый пользователями софтфорк</a></li><li><a href=/vojna-za-razmer-bloka/glava-18/>Глава 18: Нью-Йоркское соглашение</a></li><li><a href=/vojna-za-razmer-bloka/glava-19/>Глава 19: Bitcoin Cash</a></li><li><a href=/vojna-za-razmer-bloka/glava-20/>Глава 20: SegWit2x</a></li><li><a href=/vojna-za-razmer-bloka/glava-21/>Глава 21: Победа</a></li></ul></li><li><input type=checkbox id=section-e3c67eeeb417643514d32de865decd82 class=toggle>
<label for=section-e3c67eeeb417643514d32de865decd82 class="flex justify-between"><a href=/cena/>Цена завтрашнего дня</a></label><ul><li><a href=/cena/predislovie/>Предисловие</a></li><li><a href=/cena/vvedenie/>Введение</a></li><li><a href=/cena/1/>Печать денег</a></li><li><a href=/cena/2/>Созидательное разрушение</a></li><li><a href=/cena/3/>Сложно мыслить нестандартно</a></li></ul></li><li><a href=/anil-slides/>Презентации Анила</a></li><li><a href=/bitcoin-money/>Биткоин-деньги</a></li><li><a href=/v-zaschitu-defliazii-book/>В защиту дефляции</a></li><li><a href=/doroga-k-rabstvu/>Дорога к рабству</a></li></ul></li><li><a href=/videos/>Видео</a><ul></ul></li><li><a href=/audiobooks/>Аудиокниги</a><ul></ul></li><li><a href=/pods/>Подкасты</a><ul></ul></li></ul></li></ul><div class=menuSep></div><ul><li><a href=/posts/>Блог</a></li><li><a href=/vestnik/>Вестник</a></li><li><input type=checkbox id=section-d90442343f58c582906ebc7e255e7116 class=toggle>
<label for=section-d90442343f58c582906ebc7e255e7116 class="flex justify-between"><a href=/contribute/>Принять участие</a></label><ul><li><a href=/syntax/>Оформление статей</a></li><li><a href=/github/>Как добавить статью?</a></li><li><a href=/obsidian/>Публикация статей через Obsidian</a></li></ul></li><li><a href=/feedback/>Обратная связь</a></li></ul></nav><footer><br><a class=menuSocialButton href=https://t.me/bitcoin21ideas target=_blank title=Telegram><svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg"><path d="m12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12c0-6.627-5.373-12-12-12zm5.894 8.221-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002.0-.003.0-.005.0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121L8.32 13.617l-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/></svg></a>&nbsp;
<a class=menuSocialButton href=https://github.com/21ideas-org/21ideas.org target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 820"><path d="M4e2 9.9C179.11 9.9.0 189 0 409.94.0 585.6 113.24 734.86 270.71 788.61l2.83.83c20 3.76 27.34-8.59 27.34-19.24.0-9.49-.32-34.68-.5-68-111.27 24.14-134.75-53.68-134.75-53.68a106.58 106.58.0 00-44.09-58.26l-.43-.24c-36.23-24.81 2.8-24.3 2.8-24.3A84.06 84.06.0 01185 606.54l.22.4a85.24 85.24.0 00116.92 33l-.43.21A85.16 85.16.0 01327 586.7C238.19 576.67 144.8 542.25 144.8 389c0-.72.0-1.55.0-2.38a153.82 153.82.0 0141.27-105l-.08.11a139.82 139.82.0 01-8.56-48.58 141.91 141.91.0 0112.4-58.21l-.37.91s33.51-10.72 110 41c30-8.56 64.43-13.5 1e2-13.5a378.09 378.09.0 01102.68 14.14l-2.67-.64c76-51.72 109.51-41 109.51-41a144 144 0 0112 58.07 145.56 145.56.0 01-8.35 48.82l.32-1a154.37 154.37.0 0141 105c0 .83.0 1.63.0 2.43V389c0 153.68-93.5 187.51-182.52 197.35a95.48 95.48.0 0127.27 66.93c0 2.48-.11 5-.3 7.42v-.32c0 53.54-.51 96.54-.51 109.53.0 10.51 7 23 27.51 19C686.25 734.78 8e2 585.39 8e2 409.41 8e2 188.74 621.11 9.87 400.47 9.87H4e2z"/></svg></a>&nbsp;
<a class=menuSocialButton href=https://njump.me/npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l target=_blank title=Nostr><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 820"><path d="M4e2 797.5c219.53.0 397.5-178 397.5-397.5S619.53 2.5 4e2 2.5 2.5 180.47 2.5 4e2 180.47 797.5 4e2 797.5zM598.23 242.15c6.82 8.46 10.35 18.14 11.45 28.86 1.7 16.37-2.68 31.17-11.2 45-14.19 23.62-43.17 39.63-45.85 41-5.42 2.86-7.42 7.12-7.06 13.34s-1.21 37.19-20 50.83c-9.68 7-48.64 16-66.6 19.05a28.61 28.61.0 00-13.18 5.37c-1 .67-2 1.36-3.2 2.06-6.82 4.27-31.23 38-35.31 45.48l10.66-3.27c21.2-6.53 66.85-20.6 69.52-21 9-1.4 15.89 1.22 20.34 7.79 3.63 5.41 7.18 10.81 10.75 16.25.61.94 1.23 1.87 1.85 2.81 1 1.54 2 3.08 2.93 4.62.48.78 1 1.55 1.45 2.32l1.52 2.38c.09.14.19.29.28.45a10.65 10.65.0 011.37 2.83c.24 1 .91 4.14-.92 6.09-1.7 1.77-4.63 1.77-6.21 1.34a15.65 15.65.0 01-5.6-2.8l-2.49-2.13c-2-1.71-5.73-2.56-8.71-2.44-3.41.13-8-1-10.11-2.37-4.2-2.74-5.35-9.56-5.35-9.68a3.51 3.51.0 00-3.72-2.86 18.58 18.58.0 00-6.28 1.15l-.78.25q-15 4.56-29.93 9.24h0l-14.31 4.45c-7.06 2.19-14.12 4.38-21.13 6.69a37.45 37.45.0 00-5.72 2.62c-.43.21-.84.43-1.25.64l-1.24.64h0c-.85.42-1.7.85-2.55 1.34l-.27.15a30.59 30.59.0 01-5.76 2.65c-7.12 2.13-13.39-1-16.32-8.1-1.88-4.63-.18-13.76.86-16.44 5.58-14.35 21.77-39.58 26.28-46.6.75-1.17 1.17-1.83 1.17-1.86-.36-.12-23.25 9.07-27 11.93-10.35 7.86-34.64 26.49-35 28.31A22.75 22.75.0 01331 508.13c-5.66 2.19-9.13 6.7-12.48 11.08.0.0-60.88 83.83-65 88.34l-.68.74c-2.83 3-12.28 13.16-15 18.13-.46.83-1.61 3.27-2.58 5.33-.6 1.26-1.13 2.38-1.38 2.89.0.05-.05.11-.08.17-.59 1.21-1.91 3.9-6.31 3.66s-4.79-6.12-5-9.09v-.4c-.54-6.88 1-13.7 4.63-20.82a6.46 6.46.0 01.31-.58c1-1.8 3.93-7 2.61-11.36s-2.61-11.14-.6-14.61c2.84-4.77 7.62-5.48 13.92-6.41l2.64-.41c5.29-.85 9.13-3.53 12.84-8.88 4.66-6.84 17-24.51 27.65-39.67C293.62 516 3e2 507 302.66 503.09a25.55 25.55.0 003.77-9.08c1.89-9.74 7.85-16.49 18.14-20.7 2.25-.85 43.17-35.06 43.17-39.45.0-3.1-4.45-4.87-7.92-5.78-.48-.12-26.24-6.82-37.92-12.12A88.58 88.58.0 01305 406.41c-7.53-5.54-22.23-3.16-25.3-2.67l-.27.05c-11 1.58-19.12 6.51-28.37 12.78-1.65 1.16-10.05 4.2-14.31 1.77-1.32-.75-2.9-1.6-4.65-2.54-9.16-4.92-22.91-12.31-28.59-20.9-3.11-4.69-2.68-12.42-.49-20.94 7.07-19.73 17.48-28.56 36.77-33.91 11.39-3.95 32.41-5.33 46.84-6.28 2.93-.19 5.59-.37 7.84-.54.12-.05.8-.09 1.94-.18 7-.51 31.32-2.27 49.13-11.39 1.61-.82 3.59-1.92 5.91-3.2 17.67-9.8 55.68-30.86 107.76-29.25 12.95.4 32.15 7.45 49.77 13.93 14.79 5.43 28.46 10.45 36.38 10.79 17.65.73 26.54-1.22 36.77-11.81 2.92-3.05 15.16-29.53 3.59-44a108.64 108.64.0 00-13.94-14.55q-2.28-1.94-4.59-3.85a183.79 183.79.0 01-15.8-14.29c-13.82-14.61-18.09-34.58-11.51-50.17 4.14-10.9 13-15.65 25.63-13.15 6.22 1.24 11.28 5.49 15.95 9.41a73.24 73.24.0 005.84 4.59c3.6 2.38 9.56 3.78 13.46 4.69 4.93 1.16 8.65 4.93 8.4 7.49s-6.7 4.75-13 4.26c-7.36-.49-20.09-.55-27.7 2-5.05 1.83-7.3 7.49-5.84 13 1.22 4.57 10.9 12.66 14.55 15.65 1.64 1.35 3.3 2.67 5 4C587.86 231.81 593.56 236.34 598.23 242.15z" fill-rule="evenodd"/></svg></a>&nbsp;
<a class=menuSocialButton href=/rss title=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="-143 145 525 525"><path d="M113 145c-141.4.0-256 114.6-256 256s114.6 256 256 256 256-114.6 256-256S254.4 145 113 145zM43.1 518.7c-6.2 6.2-14.7 9.9-24.1 9.9-9.4.0-17.8-3.8-24-9.9-6.2-6.2-10-14.6-10-23.9.0-9.4 3.8-17.8 10-24s14.6-10 24-10 17.9 3.8 24 10c6.2 6.2 10 14.6 10 24C53 504.2 49.2 512.6 43.1 518.7zM104.8 529c-.1-32.1-12.5-62.3-35.1-84.9-22.6-22.6-52.8-35.2-84.7-35.2V360c46.6.0 88.7 19 119.3 49.6s49.5 72.8 49.6 119.4H104.8zm87.2.0c-.1-114.2-92.8-207.1-206.9-207.1V273c70.6.0 134.5 28.7 180.8 75.1 46.3 46.4 75 110.3 75.1 180.9H192z"/></svg></a></footer><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Приватность в сети Lightning</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#обзор-lightning>Обзор Lightning</a></li><li><a href=#улучшенная-приватность-в-сети-lightning>Улучшенная приватность в сети Lightning</a></li><li><a href=#краткое-содержание>Краткое содержание</a></li><li><a href=#настройка-узла>Настройка узла</a><ul><li><a href=#ip-против-tor>IP против Tor</a></li></ul></li><li><a href=#идентификация-узла>Идентификация узла</a><ul><li><a href=#псевдоним>Псевдоним</a></li><li><a href=#приложения>Приложения</a></li></ul></li><li><a href=#utxo-и-их-использование-в-lightning>UTXO и их использование в Lightning</a><ul><li><a href=#utxo-используемые-для-открытия-публичных-каналов>UTXO, используемые для открытия публичных каналов</a></li><li><a href=#приватные-каналы-не-приватны>Приватные каналы не приватны</a></li><li><a href=#закрытие-канала>Закрытие канала</a></li><li><a href=#смешанные-utxo>Смешанные UTXO</a></li></ul></li><li><a href=#приватность-получателя>Приватность получателя</a><ul><li><a href=#инвойсы>Инвойсы</a></li></ul></li><li><a href=#приватность-отправителя>Приватность отправителя</a><ul><li><a href=#1-хоп>1 хоп</a></li><li><a href=#2-хопа>2 хопа</a></li><li><a href=#отправка-средств-через-сеть>Отправка средств через сеть</a></li><li><a href=#зондирование-балансов>Зондирование балансов</a></li><li><a href=#временные-атаки>Временные атаки</a></li></ul></li><li><a href=#дополнительные-технологии-лайтнинг-протокола>Дополнительные технологии лайтнинг-протокола</a><ul><li><a href=#многопутевые-платежи-mpp>Многопутевые платежи (MPP)</a></li><li><a href=#атомарные-многопутевые-платежи-amp>Атомарные многопутевые платежи (AMP)</a></li><li><a href=#rendezvous>Rendezvous</a></li><li><a href=#ослепление-маршрута-route-blinding>Ослепление маршрута (Route Blinding)</a></li><li><a href=#маршрутизация-trampoline-trampoline-routing>Маршрутизация Trampoline (Trampoline routing)</a></li><li><a href=#маршрутизация-с-публичным-ключом-public-key-routing>Маршрутизация с публичным ключом (Public Key Routing)</a></li><li><a href=#immortan>Immortan</a></li><li><a href=#zkchannels>zkChannels</a></li><li><a href=#taproot>Taproot</a></li><li><a href=#фабрики-каналов-channel-factories>Фабрики каналов (Channel factories)</a></li><li><a href=#другие-решения>Другие решения</a></li></ul></li><li><a href=#итоговые-советы-по-приватности>Итоговые советы по приватности</a><ul><li><a href=#отправителям>Отправителям</a></li><li><a href=#получателям>Получателям</a></li><li><a href=#смешивание-в-ln>Смешивание в LN</a></li></ul></li><li><a href=#заключение>Заключение</a><ul><li><a href=#благодарности>Благодарности</a></li></ul></li></ul></li></ul></nav></aside></header><div class=pageCover><picture><img src=/img/pln-216.jpeg alt=Cover></picture></div><h1>Приватность в сети Lightning</h1><div class=pageDate>10 мая 2021 г.</div><article class=markdown><p>Помимо преимущества практически мгновенных платежей, Lightning также может улучшить приватность финансовых взаимодействий. К сожалению, есть сценарии, в которых Lightning не так хорош для обеспечения приватности, как может показаться на первый взгляд.</p><blockquote class="book-hint btc">Перевод статьи <a href=https://abytesjourney.com/lightning-privacy/>Current State of Lightning Network Privacy</a> подготовлен <a href=https://snort.social/p/npub10awzknjg5r5lajnr53438ndcyjylgqsrnrtq5grs495v42qc6awsj45ys7>Тони⚡️</a>. <a href=/contribute/>Поддержать проект</a>.</blockquote><p>В последнее время сеть Lightning Network растет, сейчас в ней насчитывается около 17,000 активных публичных узлов из общего количества, примерно равного 37,000. Помимо преимущества практически мгновенных платежей, Lightning также может улучшить приватность финансовых взаимодействий. К сожалению, есть сценарии, в которых Lightning не так хорош для обеспечения приватности, как может показаться на первый взгляд.</p><p>Я бы хотел раскрыть некоторые проблемные аспекты, связанные с приватностью в сети Lightning. Моей целью не является распространение паники; я хочу, чтобы сообщество было максимально информировано, чтобы каждый мог использовать сеть лайтнинг, сохраняя приватность. Все, что написано в этой статье, является общеизвестным и в той или иной степени осознается в сообществе. Это моя попытка собрать известные факты о приватности в сети Lightning воедино.</p><p>Каждый имеет право на финансовую приватность и заслуживает того, чтобы быть осведомленным о способах ее обретения.</p><h2 id=обзор-lightning>Обзор Lightning
<a class=anchor href=#%d0%be%d0%b1%d0%b7%d0%be%d1%80-lightning>#</a></h2><div class=imageWrapper><img src=/img/pln-217.jpg><p><em>Алиса платит Кэрол по существующему каналу, открытому ею с Бобом.</em></p></div><p>В двух словах, узел Lightning блокирует выход неизрасходованной биткоин-транзакции (UTXO) в канале с другим узлом. Эти два узла могут мгновенно совершать транзакции друг с другом без трансляции их в блокчейн. Этот подход часто масштабируется так, что вы можете аналогичным образом совершать транзакции с узлами, к которым подключен ваш партнер по каналу, и это может происходить до бесконечности.</p><p>В сценарии с несколькими “прыжками” или &ldquo;хопами&rdquo; (пересыланиями сатоши от одного партнера по каналу к другому и дальше) конечный получатель обретает часть другого UTXO, не того же самого, который вы, как отправитель изначально ему отправляли. Это можно сравнить с тем, как если бы я дал вам купюру в 10 долларов, чтобы вы передали ее вашему другу, а вы потратили мою купюру на проезд и передали вашему другу другую купюру, полученную вами в абсолютно другом месте. Только в Lightning это происходит посредством криптографии и эта система не вынуждает вас никому доверять.</p><h2 id=улучшенная-приватность-в-сети-lightning>Улучшенная приватность в сети Lightning
<a class=anchor href=#%d1%83%d0%bb%d1%83%d1%87%d1%88%d0%b5%d0%bd%d0%bd%d0%b0%d1%8f-%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d0%be%d1%81%d1%82%d1%8c-%d0%b2-%d1%81%d0%b5%d1%82%d0%b8-lightning>#</a></h2><p>Каждый пир (участник/узел) в многохоповой транзакции запрашивает оплату у следующего пира в прыжке. Все, что они знают, – это кто попросил их направить платеж и кто является следующим пиром, которому следует передать средства. Из-за свойств <a href=https://ru.wikipedia.org/wiki/%D0%9B%D1%83%D0%BA%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F>луковой маршрутизации</a> платежей маршрутизатор не знает, кто выступает в качестве последующих пиров на пути платежа и кто стоит в этой цепочке перед ними. Это также включает в себя первоначального отправителя или конечного получателя.</p><p>Благодаря этому отправители в сети Lightning наделены высоким уровнем приватности. Отправитель знает, кто является узлом назначения, конструирует луковую маршрутизацию платежа и отправляет его. Даже первый пир не может точно знать, получает ли он платеж от первоначального отправителя (обратите внимание на некоторые оговорки в разделе об отправителях далее).</p><p>Получатели не могут похвастаться такой же приватностью. Они должны предоставить определенную информацию отправителю, чтобы тот мог переслать средства. Информация, которую они предоставляют, может быть довольно деликатной.</p><h2 id=краткое-содержание>Краткое содержание
<a class=anchor href=#%d0%ba%d1%80%d0%b0%d1%82%d0%ba%d0%be%d0%b5-%d1%81%d0%be%d0%b4%d0%b5%d1%80%d0%b6%d0%b0%d0%bd%d0%b8%d0%b5>#</a></h2><p>Я начну с основ приватности узла Lightning, с начальной настройки. Затем поговорю об ончейн-информации, которая раскрывается в каналах Lightning. Далее перейду к приватности отправителей и получателей и информации, раскрываемой по мере продвижения средств в сети Lightning.</p><p>Наконец, я расскажу о некоторых будущих функциях и свойствах Lightning, как недавно разработанных, так и готовящихся к запуску.</p><p>На протяжении всей статьи я буду рекомендовать решения, которые помогут улучшить вашу приватность. В конце я предложу наилучший и реалистичный сетап, который вы можете применить уже сегодня.</p><h2 id=настройка-узла>Настройка узла
<a class=anchor href=#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d1%83%d0%b7%d0%bb%d0%b0>#</a></h2><h3 id=ip-против-tor>IP против Tor
<a class=anchor href=#ip-%d0%bf%d1%80%d0%be%d1%82%d0%b8%d0%b2-tor>#</a></h3><p>Один из самых важных шагов, который вы можете сделать в первую очередь, — это настроить ваш узел на работу исключительно через Tor.</p><p>Большинство, если не все реализации персональных узлов, такие как <a href=https://github.com/rootzoll/raspiblitz>Raspiblitz</a> или <a href=https://getumbrel.com/>Umbrel</a>, настроят ваш узел именно так. Это более простой способ настройки, который не требует перенаправления портов, что может показаться сущим адом для большинства новичков.</p><p>Хотя можно изменить настройки в будущем, эта информация может быть заархивирована другими участниками. Вы можете перейти на сайт обозревателя <a href=https://1ml.com/>1ml</a>, чтобы самостоятельно увидеть, что подобные изменения сети действительно отслеживаются.</p><div class=imageWrapper><img src=/img/pln-218.png><p><em><a href=https://1ml.com/node/030c3f19d742ca294a55c00376b3b355c3c90d61c6b6b39554dbc7ac19b141c14f/history>Источник</a></em></p></div><p>Указав эту информацию на сайте поиска IP-адресов, я вижу, что этот узел использует сервер AWS в Ирландии.</p><div class=imageWrapper><img src=/img/pln-219.png><p><em><a href=https://whatismyipaddress.com/ip/52.50.244.44>https://whatismyipaddress.com/ip/52.50.244.44</a></em></p></div><p>Если вы введете свой IP-адрес в службу поиска, она покажет вашего провайдера и примерное местоположение.</p><p>Независимо от того, размещаетесь ли вы на сервере AWS или на домашнем сервере, ваша приватная информация может быть раскрыта по решению суда или через инсайдеров. Если вы настаиваете узел на IP-узле, подумайте о постоянном VPN со статическим IP, чтобы защитить свой домашний/серверный IP.</p><p>Недостатком использования исключительно Tor является то, что IP-узлы не могут открыть с вами канал. Однако вы можете присоединиться к ним. По данным <a href=https://1ml.com/statistics>1ml</a>, в настоящее время существует около 12,500 узлов Tor.</p><h2 id=идентификация-узла>Идентификация узла
<a class=anchor href=#%d0%b8%d0%b4%d0%b5%d0%bd%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d1%8f-%d1%83%d0%b7%d0%bb%d0%b0>#</a></h2><h3 id=псевдоним>Псевдоним
<a class=anchor href=#%d0%bf%d1%81%d0%b5%d0%b2%d0%b4%d0%be%d0%bd%d0%b8%d0%bc>#</a></h3><div class=imageWrapper><img src=/img/pln-220.png><p><em><a href=https://1ml.com/>https://1ml.com/</a></em></p></div><p>В настройках своего узла вы можете задать псевдоним, благодаря чему пользователи могут видеть “имена” этих узлов в одноранговом режиме. Если вы запускаете сервис или магазин, привязывая к нему собственный лайтнинг-узел, то, вероятно, вы захотите, чтобы ваш псевдоним соответствовал названию вашего бизнеса и клиентам было проще ассоциировать одно с другим.</p><p>Однако если это не так, я бы посоветовал не указывать псевдоним и, тем более, не выбирать что-то, связанное с вашим реальным именем. В любом случае решать вам, но помните, что это все равно что прикрепить собственное имя к вашему биткоин-адресу, а в большинстве случаев этого делать не стоит. Это делает вас мишенью, так как публичная пропускная способность узла, информация о UTXO и многое другое отображается для остальных участников сети.</p><h3 id=приложения>Приложения
<a class=anchor href=#%d0%bf%d1%80%d0%b8%d0%bb%d0%be%d0%b6%d0%b5%d0%bd%d0%b8%d1%8f>#</a></h3><p>Псевдоним узла оглашается, когда вы открываете публичный канал, но есть и другие способы, с помощью которых ваш узел может быть связан с вашей личностью.</p><p>Приложения-чаты, такие как <a href=https://sphinx.chat/>Sphinx Chat</a>, работают посредством связи между вашим и другими узлами через Lightning Network. Это очень крутая технология, которую я люблю и использую. Тем не менее, она основана на связи вашего узла с Sphinx, и когда люди общаются с вами в чате, они отправляют платежи на ваш узел. Таким образом они могут видеть всю публичную информацию о вашем узле. RaspiBlitz <a href=https://blog.blockstream.com/en-raspiblitz-integrates-c-lightning-for-lightweight-customizable-functionality/>умеет параллельно запускать c-lightning и LND</a>, таким образом вы <a href=https://github.com/rootzoll/raspiblitz/issues/2073#issuecomment-979940630>можете использовать</a> LND для таких приложений как Sphinx и оставить c-lightning для осуществления приватных платежей и маршрутизации. Я бы настоятельно рекомендовал использовать этот подход или, например, запустить отдельный узел Umbrel для тестирования интересных приложений и личного использования. В настоящее время Sphinx позволяет вам использовать один из своих узлов, но имейте в виду, что в таком случае они могут отслеживать и читать каждое сообщение.</p><p>Помимо таких приложений, как Sphinx, будьте осторожны с любыми сервисами, которые отправляют вам средства и получают доступ к вашим персональным данным. Если вы не готовы предоставить свой XPUB сервису, не предоставляйте ему и идентификатор своего узла. Подробнее об этом в разделе <em>Приватность получателя</em>.</p><p>Одним заметным исключением является <a href=https://github.com/fiatjaf/lnurl-rfc/blob/master/lnurl-auth.md>LNURL Auth</a>. Несмотря на то, что он основан на Lightning, он не привязывает ссылку к вашему Lightning- узлу. Каждый сайт получает свой идентификатор LNURL, поэтому они не соотносятся друг с другом. Это гораздо лучший и более приватный способ логина, чем использование электронной почты или номера телефона. Сервис LNURL все еще может захотеть отправить средства на ваш узел, но сам по себе он является приватным и некоррелируемым.</p><h2 id=utxo-и-их-использование-в-lightning>UTXO и их использование в Lightning
<a class=anchor href=#utxo-%d0%b8-%d0%b8%d1%85-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b2-lightning>#</a></h2><p>Как я уже упоминал, для открытия канала необходимо заблокировать UTXO с другим участником сети. Транзакции в открытом канале выглядят как перевод средств на <a href=/multisig-1>мультисиг</a>-адрес. Эта транзакция или адрес не раскрывают никакой приватной информации. Однако информация о канале (если он публичный) распространяется по всей сети Lightning. Информация о канале включает в себя индекс транзакции и выход (точка канала).</p><div class=imageWrapper><img src=/img/pln-221.png><p><em><a href=https://1ml.com/node/03cde60a6323f7122d5178255766e38114b4722ede08f7c9e0c5df9b912cc201d6/channels>Источник</a></em></p></div><p><a href=https://blog.bitmex.com/lightning-network-part-7-proportion-of-public-vs-private-channels/>Приватные каналы</a> не публикуются в сети. Если кто-то из пиров попытается опубликовать такой канал в сети, действие будет отклонено в соответствии с требованиями протокола.</p><p>Итак, давайте разберем использование UTXO в сети Lightning.</p><h3 id=utxo-используемые-для-открытия-публичных-каналов>UTXO, используемые для открытия публичных каналов
<a class=anchor href=#utxo-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d1%83%d0%b5%d0%bc%d1%8b%d0%b5-%d0%b4%d0%bb%d1%8f-%d0%be%d1%82%d0%ba%d1%80%d1%8b%d1%82%d0%b8%d1%8f-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d1%8b%d1%85-%d0%ba%d0%b0%d0%bd%d0%b0%d0%bb%d0%be%d0%b2>#</a></h3><p>Многие биткоинеры, заботящиеся о приватности, знают, что генерировать новый биткоин-адрес для каждой транзакции – это здоровая практика. Узлы Lightning используют ту же практику при создании нового адреса для обычных транзакций и новых каналов. Учитывая, что вы не можете отличить транзакцию, открывающую канал от, например, мультисиг-транзакции, вы не можете обычно связать один UTXO с другими. Однако информация, передаваемая по сети Lightning, и есть та самая связь.</p><p>Когда вы открываете канал, транзакционные выходы “превращаются” во входы, и таким образом блокируется новый UTXO. Затем, с помощью ончейн-анализа, можно определить источник средств, использованных для открытия канала. Рассматривая <em>только</em> информацию о канале, невозможно определить, <em>какой именно</em> узел заблокировал средства. Мы только знаем, что это был один из двух участников (хотя ваш контрагент знает, что это был не он, и может поделиться этой информацией с внешним миром). Тем не менее, можно определить, какой узел заблокировал UTXO.</p><p><em>Примечание: При наличии <a href=https://bitcoinops.org/en/topics/dual-funding/>каналов с двойным финансированием</a> это могли быть оба узла. Однако можно спровоцировать узел на раскрытие своих UTXO, инициировав запрос на открытие канала с двойным финансированием и прервав его в процессе. Если бы этот UTXO был использован в канале с двойным финансированием позже, мы бы знали, какому узлу он принадлежал.</em></p><p>Итак, мы выяснили, что в настоящее время один или другой узел в канале владеет используемыми UTXO. Вероятность 50/50. Но представьте ситуацию, когда Алиса получила UTXO от Coinbase и использует его для открытия канала. Coinbase будет знать, что инициатором была Алиса, поскольку они отслеживают, что делают их пользователи после вывода средств. Это либо Алиса, либо человек, которому Coinbase отправила средства от имени Алисы. Если бы Coinbase решили докопаться до истины, они могли бы спросить Алису и заблокировать ее счет (средства, принадлежащие Алисе, но хранящиеся на подконтрольном Coinbase кошельке), если бы им что-то не понравилось.</p><p>В другом случае, если у Алисы был 1 UTXO и она открыла канал на неполную сумму, а затем использовала сдачу для открытия другого канала, можно предположить, что оба канала были инициированы Алисой. Алиса использовала свою сдачу с одного канала для открытия другого, поэтому мы знаем, что эти UTXO принадлежат ей. Узел, открывающий канал на неполную сумму, устанавливает собственный адрес для получения сдачи.</p><div class=imageWrapper><img src=/img/pln-222.jpg><p><em>Алиса, использующая TX 1 для открытия двух последовательных каналов, выдает себя как открывающую оба канала.</em></p></div><p>Когда речь идет о публичных каналах, в лучшем случае у вас есть 50% шанс, что UTXO принадлежит вашему узлу. В худшем – 100% вероятность того, что некоторые или все UTXO вашего канала принадлежат вам.</p><p>Поскольку вся сеть Lightning может видеть эту информацию, считайте, что она публичная. Есть вероятность, что аналитические фирмы и регуляторы воспользуются этим.</p><p><em>Решение: открывая публичные каналы, используйте весь UTXO (без сдачи), не привязанный к вашей личности.</em></p><h3 id=приватные-каналы-не-приватны>Приватные каналы не приватны
<a class=anchor href=#%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d1%8b%d0%b5-%d0%ba%d0%b0%d0%bd%d0%b0%d0%bb%d1%8b-%d0%bd%d0%b5-%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d1%8b>#</a></h3><p>Приватные каналы (private channels) – это термин, используемый для описания канала, который публично не объявляется в Lightning Network. Общественность не может знать о существовании канала между двумя узлами или UTXO, стоящими за ними, не приложив никаких усилий. По умолчанию эту информацию знает только ваш контрагент по каналу. Однако давайте разберемся, почему “приватные каналы на самом деле не являются приватными”.</p><p>Начнем с того, что есть несколько причин для открытия приватного канала. Возможно, вы не хотите, чтобы другие узлы направляли по нему платежи, поскольку вы запустили узел на смартфоне и не всегда находитесь онлайн. Вы также можете захотеть скрыть истинную сумму, заблокированную в каналах между вами и другим узлом. Для этого можно открыть публичный канал с узлом и при этом иметь гораздо более крупные приватные каналы с тем же узлом. Вы можете лично прокладывать маршруты через свои приватные каналы без ведома общественности. Использование такой теневой маршрутизации можно обнаружить с помощью методов зондирования баланса, несмотря на то, что информация о канале скрыта.</p><p>Еще одна причина, по которой люди решают открыть приватный канал, – это сокрытие UTXO. В конце концов, это стандартная гигиена приватности – не связывать ваши UTXO между собой. Это предположение ошибочно по нескольким причинам.</p><div class=imageWrapper><img src=/img/pln-223.jpg><p><em>Инвойс с инструкциями приватной маршрутизации включает идентификатор канала, который, в свою очередь, содержит информацию о UTXO.</em></p></div><p>Чтобы получать средства по приватным каналам, вы должны закодировать информацию о канале в инвойсе, который вы предоставляете отправителю. К сожалению, идентификаторы каналов основываются на информации о UTXO. Отправители могут определить, какие UTXO лежат в основе ваших приватных каналов. Помните о 50% в лучшем случае, 100% в худшем, о которых мы говорили выше? То же самое применимо и здесь. Если вы не отправили инвойс по защищенному каналу связи, считайте, что это публичная информация. Также учитывайте, что отправитель может использовать эту информацию против вас — он может продать или обнародовать ее.</p><div class=imageWrapper><img src=/img/pln-224.jpg><p><em><a href=https://arxiv.org/pdf/2004.00333.pdf>https://arxiv.org/pdf/2004.00333.pdf</a></em></p></div><p>Но и это не самое страшное. Вы не только раскрываете эту информацию каждому отправителю, у которого запрашиваете средства, но и можете быть атакованы злоумышленниками. Можно спамить платежами через узел в попытке попасть в реальный приватный канал, угадав UTXO. Злоумышленник начинает с анализа всех транзакций в сети Биткоин и создания набора UTXO, которые отправляются на адрес, похожий на мультисиг. Обнаружив, что UTXO используется в приватном канале жертвы, злоумышленник может попытаться узнать, кто является обладателем второго узла. Это делается путем замены pubkey узла на один из 37,000 узлов, известных сети Lightning. Угадать другой узел невозможно только в том случае, если он никогда не открывал публичный канал и никогда не запускал приватный.</p><p>Если вы открыли приватный канал и никогда не создавали инвойс, все равно возможно, что ваш партнер по каналу разгласил канал и публичный ключ. Он мог включить данные в один из своих инвойсов. Для этого ему не нужно ваше согласие.</p><p>Таким образом, даже если ваш узел &ldquo;полностью приватный&rdquo;, вы никогда не открывали публичный канал и не делились ни с кем инвойсами, достаточно, чтобы один из ваших партнеров по каналу раскрыл ваш приватный канал и публичный ключ через инвойс. После этого злоумышленник может прощупать ваши приватные каналы, UTXO, балансы и даже контрагентов по каналам. Поэтому можно предположить, что любой из ваших приватных каналов и поддерживающих их UTXO открыты для всего мира. Для определения стоимости и времени выполнения этой атаки на зондирование частных каналов потребуются дополнительные исследования.</p><p><em>Решение: чтобы скрыть один из ваших UTXO, откройте приватный канал за одним из ваших публичных каналов. Альтернативный вариант – заставить другой узел открыть канал к вам, раскрывая только его UTXO.</em></p><h3 id=закрытие-канала>Закрытие канала
<a class=anchor href=#%d0%b7%d0%b0%d0%ba%d1%80%d1%8b%d1%82%d0%b8%d0%b5-%d0%ba%d0%b0%d0%bd%d0%b0%d0%bb%d0%b0>#</a></h3><p>Помимо того, что можно найти активные приватные каналы, можно также <a href=https://arxiv.org/pdf/2003.12470.pdf>обнаружить уже закрытые приватные каналы</a>. Ончейн-аналитика может быть применена к транзакциям, закрывающим канал, чтобы выявить обоих участников канала.</p><div class=imageWrapper><img src=/img/pln-225.png><p><em>Можно определить приватный канал Алисы и Боба на основе действий со сдачей, выполненных после его закрытия.</em></p></div><p>Сдача из приватного канала может быть использована в новом публичном канале или оказаться слитой в приватном. Если оба узла использовали сдачу из приватного канала для создания нового, то между ними существует вероятная связь. Вы сможете просмотреть исходный выход транзакции и определить, что он был использован для приватного канала между узлами.</p><p>Также можно обнаружить, что выход транзакции был частью приватного канала, если этот приватный канал будет вынужденно (принудительно) закрыт. Принудительно закрытые каналы выявляют неразрешенные выходы ончейн, характерные для Lightning. После этого можно проанализировать выходы сдачи таким же образом, чтобы обнаружить аналогичные каналы.</p><p><em>Решение: после закрытия канала смешайте выходы сдачи.</em></p><h3 id=смешанные-utxo>Смешанные UTXO
<a class=anchor href=#%d1%81%d0%bc%d0%b5%d1%88%d0%b0%d0%bd%d0%bd%d1%8b%d0%b5-utxo>#</a></h3><p>Управление смешанными UTXO – тема, которая горячо обсуждается биткоинерами, использующими <a href=/privacy/coinjoin>CoinJoin</a>. Смешивать UTXO, а затем снова объединять их без острой необходимости, как правило, является плохой идеей. Если вы владеете несколькими UTXO из одного источника, смешиваете их, а затем отправляете их на один и тот же адрес, вы снижаете анонимность этих монет. Ситуация ухудшается по мере того, как вы объединяете все больше UTXO.</p><p>Существует множество нюансов и сложностей ончейн-аналитики в контексте деанонимизации смешанных UTXO. Мой совет – не объединять их, но здесь присутствует немало переменных.</p><p>Исходя из вышесказанного, я считаю, что отправлять более одного смешанного UTXO на узел Lightning – плохая идея. По всем причинам, описанным выше, все ваши смешанные UTXO на узле Lightning потенциально могут быть связаны. Неважно, предназначены ли они для публичных или приватных каналов. Если вы не уверены в своих действиях со своими смешанными UTXO, я бы по возможности избегал их консолидации на узле.</p><p><em>Решение: Не используйте более одного смешанного UTXO на узел.</em></p><h2 id=приватность-получателя>Приватность получателя
<a class=anchor href=#%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d0%be%d1%81%d1%82%d1%8c-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b0%d1%82%d0%b5%d0%bb%d1%8f>#</a></h2><p>На данном этапе я рассказал о UTXO и каналах, лежащих в основе вашего узла. Теперь давайте разберемся, какая информация раскрывается при получении платежей.</p><h3 id=инвойсы>Инвойсы
<a class=anchor href=#%d0%b8%d0%bd%d0%b2%d0%be%d0%b9%d1%81%d1%8b>#</a></h3><p>Обычно, когда вы хотите получить платеж, вы создаете инвойс и передаете его отправителю. Счет будет состоять из публичного ключа вашего узла, суммы, описания, подсказок по приватной маршрутизации; он будет подписан приватным ключом вашего узла. С помощью вашего публичного ключа отправитель может найти ваш узел и выяснить каналы, UTXO, информацию о TOR/IP-адресе и многое другое. Подсказки по приватной маршрутизации также раскрывают информацию о UTXO вашего приватного канала.</p><div class=imageWrapper><img src=/img/pln-226.png><p><em>Пример Lightning-инвойса</em></p></div><p>И вся эта информация доступна из простого инвойса. Вот где можно допустить ошибку в плане приватности. Во-первых, будьте осторожны с тем, где вы размещаете инвойс. Если вы пытаетесь сохранить приватность/анонимность узла, не делитесь инвойсами на публичных форумах. Или даже в незашифрованных сообщениях или с людьми, которым вы не доверяете информацию о своем узле. Если вы это сделаете, считайте, что эта информация доступна всему миру и каждый может связать ее с вами. Если вы коммерсант, этого невозможно избежать. Стоит иметь в виду, что любой может сгенерировать инвойс от вашего узла под видом попытки осуществления покупки в вашем магазине.</p><p>Инвойсы могут раскрыть еще больше информации о вас или о конкретной сделке. Вы же не скажете в описании платежа на PayPal &ldquo;На приобретение кокаина&rdquo;, то же самое верно и здесь. Каждый инвойс подписывается, поэтому любое сообщение, которое вы в него помещаете, по сути, является заявлением, подписанным вашим узлом. Классический пример – инвойс Мэтта Оделла, в примечании которого упоминается покер. Он передал этот инвойс своему другу, который оплатил его через KYC-биржу. Теперь эта биржа знает больше, чем, вероятно, хотелось бы Мэтту. Это даже ставит его друга в опасное положение. Если биржа захочет, она может цензурировать платежи на узел Мэтта, пояснив свое решение увлечением пользователя азартными играми.</p><p>Учитывая, что каждый инвойс, который вы выставляете, раскрывает информацию о публичном ключе вашего узла, эти данные также сопоставимы. В идеальном мире инвойсы, которые вы выставляете, не раскрывают информацию о вашем узле и не связаны между собой. Каждый новый инвойс будет показывать новую информацию о публичном ключе. Это технически возможно уже сегодня, и, более того, мобильный кошелек <a href=https://www.21ideas.org/basics-simple-buy-and-store-bitcoin/>Muun</a> поступает именно таким образом!</p><p>Muun использует “поддельные” приватные каналы с прикрепленными к ним динамично меняющимися парами ключей. Они создают инвойсы, которые выглядят так, будто они проходят через ваш узел и каждый раз направляются в другой пункт назначения, что предоставляет вам возможность правдоподобного отрицания. Хотя это не идеальный сценарий, он намного лучше невозможности отрицания.</p><p>В конце концов, можно предположить, что ваш узел, маршрутизирующий платежи на эти виртуальные приватные узлы, на самом деле является конечным пунктом назначения. Но это предположение не всегда будет верным. Оно может включать независимые узлы, которые могут иметь единственный приватный канал к вашему узлу.</p><p><em>Решение: Создавать новый публичный ключ узла для каждого инвойса (в реальности это легко сделать только с Muun, поскольку здесь этот подход используется по умолчанию). Я слышал, что другие проекты также работают над внедрением такого подхода.</em></p><h2 id=приватность-отправителя>Приватность отправителя
<a class=anchor href=#%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d0%be%d1%81%d1%82%d1%8c-%d0%be%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%b8%d1%82%d0%b5%d0%bb%d1%8f>#</a></h2><p>Приватность отправителей в Lightning Network обычно очень высока. Отправители создают зашифрованный луковый путь, чтобы ни один узел не мог определить, кто стоит на маршруте средств, помимо его непосредственных “соседей по хопу”. По мере прохождения средств по сети слои разворачиваются, поэтому предыдущие узлы также неизвестны. Известен только непосредственный предыдущий узел, что защищает и оригинального отправителя. Хотя в некоторых случаях первоначального отправителя можно предположить.</p><p>Почему важно обеспечить приватность отправителя? Если Алиса покупает что-то у Боба, и Боб знает Алису, почему важно сохранить приватность ее узла?</p><p>Этот вопрос подводит нас к значимости ончейн-приватности и причинам ротации биткоин-адресов после каждого их использования. Бобу не нужно знать всю описанную в этой статье информацию об узле. IP-адрес узла, информация о каналах и UTXO, балансы и многое другое – все это не является необходимым для получения средств. Все, что нужно знать Бобу — это минимальное количество информации для выполнения заказа Алисы и тот факт, что Боб получил средства в соответствии с полученным заказом.</p><p>Итак, давайте рассмотрим некоторые случаи, позволяющие деанонимизировать отправителя.</p><h3 id=1-хоп>1 хоп
<a class=anchor href=#1-%d1%85%d0%be%d0%bf>#</a></h3><div class=imageWrapper><img src=/img/pln-227.jpg><p><em>Пример с ограниченным количеством соединений между пирами в сети Lightning, где Алиса платит Бобу. Кто еще мог заплатить Бобу, кроме Алисы? Боб знает, что никто.</em></p></div><p>Представьте, что у Алисы есть узел с единственным каналом связи с Бобом. Она посылает платеж Бобу напрямую через их канал. Боб сможет предположить, что узел Алисы был первоначальным отправителем. Какой другой узел мог отправить эти средства через Алису? У Алисы может быть открыт приватный канал с другим узлом, но, как мы уже выяснили, существование приватных каналов может быть раскрыто.</p><p>То же самое может произойти, если Боб определит, что Алиса не является узлом маршрутизации. Некоторые узлы могут отклонять запросы на маршрутизацию. Если Боб попытается провести платеж через узел Алисы и платеж будет отклонен по этой причине, то у Боба есть возможность обоснованно предположить, что Алиса не маршрутизирует платежи. Соответственно, другой узел не мог бы маршрутизировать платеж через Алису к Бобу. Возможно, Алиса отклоняет запросы на маршрутизацию только в одну сторону, но это было бы очень нестандартно, если вообще возможно.</p><p><em>Решение: Если у вас только 1 канал, не отправляйте средства напрямую партнеру по каналу как адресату.</em></p><h3 id=2-хопа>2 хопа
<a class=anchor href=#2-%d1%85%d0%be%d0%bf%d0%b0>#</a></h3><div class=imageWrapper><img src=/img/pln-228.jpg><p><em>Пример с ограниченным количеством соединений между пирами в сети Lightning, где Боб выступает в роли провайдера лайтнинг-сервисов (LSP). Боб может знать, что платежи идут от одного пользователя к другому в том случае, когда у них нет других соединений.</em></p></div><p>Представьте себе сценарий, в котором Алиса подключена к Бобу, а Боб подключен к Кэрол. Боб знает, что Алиса не подключена к другим пирам, и то же самое касается Кэрол.</p><p>Алиса отправляет платеж Кэрол через Боба. Боб знает, что Алиса отправила платеж Кэрол и на какую сумму.</p><p>Это обычная схема работы лайтнинг-провайдеров в лице операторов мобильных кошельков. Обычно мобильные пользователи не подключаются ни к какому другому каналу, кроме как к самому <a href=https://medium.com/breez-technology/introducing-lightning-service-providers-fe9fb1665d5f>LSP</a>. Если мобильный пользователь посылает другому пользователю мобильного кошелька, использующему тот же LSP, это означает, что LSP знает, когда их пользователи платят друг другу.</p><p><em>Решение: Если вы используете мобильный LSP, откройте и другие публичные каналы, или не пытайтесь платить другим пользователям, использующим тот же LSP.</em></p><h3 id=отправка-средств-через-сеть>Отправка средств через сеть
<a class=anchor href=#%d0%be%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b0-%d1%81%d1%80%d0%b5%d0%b4%d1%81%d1%82%d0%b2-%d1%87%d0%b5%d1%80%d0%b5%d0%b7-%d1%81%d0%b5%d1%82%d1%8c>#</a></h3><p>Я описал сценарий с 1 и 2 хопами, когда маршрутизатор или получатель могут определить отправителя. Есть более активные способы попытаться выяснить эту информацию на более длинных путях передачи средств.</p><h3 id=зондирование-балансов>Зондирование балансов
<a class=anchor href=#%d0%b7%d0%be%d0%bd%d0%b4%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b1%d0%b0%d0%bb%d0%b0%d0%bd%d1%81%d0%be%d0%b2>#</a></h3><p><a href=https://s-tikhomirov.github.io/lightning-probing-2/>Зондирование балансов</a> (Balance probing) – это практика, при которой злоумышленник пытается провести множество фальшивых платежей через узлы в попытке выяснить, сколько средств находится на той или иной стороне. В сети Lightning известна только общая сумма публичного канала. При канале в 1 биткоин между Алисой и Бобом в любой момент времени на стороне Алисы может быть 0.7 BTC, а на стороне Боба – 0.3 BTC. Это может меняться по мере прохождения платежей через их канал.</p><div class=imageWrapper><img src=/img/pln-229.jpg><p><em>Кэрол атакует канал между Алисой и Бобом, чтобы выяснить баланс в канале Алисы и Боба.</em></p></div><p>Злоумышленник может узнать баланс, пытаясь направить платежи с разными суммами через канал между Алисой и Бобом. Если платеж в 1 BTC не проходит к Алисе, злоумышленник уменьшает сумму до тех пор, пока он не пройдет. Злоумышленник использует поддельный хэш платежа, который никогда не будет исполнен. Как только Алиса отвечает ошибкой хэша платежа, злоумышленник понимает, что зондирование прошло успешно. Баланс на стороне канала Боба приблизительно равен сумме на самом высоком успешном зондировании.</p><p>Если баланс канала Алисы с Бобом изменился и составляет 0.1 на ее стороне и 0.9 на его стороне, в то время как ни один из других балансов канала Боба не изменился, мы знаем, что Алиса заплатила Бобу 0.6 BTC. Либо одним платежом, либо несколькими.</p><p>Можно также расширить зондирование баланса на всю сеть. Если крупный платеж проходит через более двух узлов, злоумышленник может проследить за движением средств, сделав снимки балансов до и после платежа.</p><p>Хотя это возможно, на практике потребуется много ресурсов, чтобы сделать это оперативно, особенно по мере масштабирования сети. Снимки всей сети занимают много времени. По мере увеличения количества платежей, проходящих через сеть, становится нецелесообразным делать это достаточно быстро, чтобы точно определить отдельных отправителей и их адресатов. Проведены исследования и выпущены <a href=https://eprint.iacr.org/2021/384.pdf>документы</a> о стоимости и времени, необходимых для таких атак. Делать это в больших масштабах нецелесообразно. Однако многомиллиардные аналитические фирмы или силовые структуры определенно на это способны.</p><p>Атакующему будет более разумно нацелиться на конкретные направления. Это позволило бы оценить их общую экономическую активность.</p><p>Злоумышленник может нацелиться на узел магазина конкурента и сделать снимок всех его каналов. Они могли бы следить за тем, как уменьшается входящая ликвидность узла конкурентов. Атакующий может проверить цены на товары магазина и сделать некоторые предположения о продажах конкурента. Возможное решение для борьбы с этой проблемой заключается в том, чтобы узел мерчанта регулярно выталкивал средства на противоположные стороны своих каналов пропорционально получаемым оплатам. В идеале – сразу после получения платежей. Таким образом злоумышленники не успевали бы зафиксировать отдельные покупки. Они могут направлять средства на другой подконтрольный им узел, не связанный с их магазином.</p><p>Есть способы определить, зондируются ли ваш балансы, и вы можете попытаться отсечь такую активность. С другой стороны зондирование может быть неотличимо от того, что узлы испытывают трудности с проведением платежа и пробуют разные пути. Я считаю, что для защиты приватности можно отказаться от получения после пары попыток. Случайный отказ от маршрутизации фактического платежа может привести к упущенному доходу от маршрутизации. Кроме того, меньшее количество платежей будет направлено в вашу сторону из-за репутационной природы алгоритмов маршрутизации платежей. Я не знаю программного обеспечения для борьбы с зондированием балансов, поэтому необходимо написать что-то собственное.</p><p><em>Решение: Пока не будет разработан лучший метод борьбы с зондированием, периодически восстанавливайте баланс и ребалансируйте каналы. Это не самое лучшее решение, но эта проблема не проста.</em></p><h3 id=временные-атаки>Временные атаки
<a class=anchor href=#%d0%b2%d1%80%d0%b5%d0%bc%d0%b5%d0%bd%d0%bd%d1%8b%d0%b5-%d0%b0%d1%82%d0%b0%d0%ba%d0%b8>#</a></h3><p><a href=https://arxiv.org/pdf/2006.12143.pdf>Временные атаки</a> делают обоснованные предположения на основе того, как быстро что-то произошло. В случае с Lightning Network маршрутизатор может определить, кто является получателем платежа. Они делают это на основе того, как быстро прошла успешная транзакция. Существуют базовые ограничения на задержку в сети, когда мы переходим от прыжка к прыжку по сети. Например, представьте, что средняя сетевая задержка составляет 100 мс на один хоп. Если платеж прошел успешно за 500 мс, можно предположить, что получатель платежа находится на расстоянии 5 хопов. Если атакующий просканирует время между каждым узлом, он сможет сделать еще более точное предположение.</p><p>По мере роста сети и увеличения количества пунктов назначения и задержек, я полагаю, это будет сложнее.</p><p>_Решение: Как узел, вы можете добавить случайное количество времени для пересылки или приема платежей. Однако это может ухудшить пользовательский опыт взаимодействия с мгновенными платежами, задерживая некоторые транзакции на несколько секунд. Пользователь reddit <a href="https://www.reddit.com/r/TheLightningNetwork/comments/n99ksn/current_state_of_lightning_network_privacy/gxnfq2u/?utm_source=share&amp;utm_medium=web2x&amp;context=3">поделился</a> своим <a href=https://github.com/ajpwahqgbi/lightning-tools/tree/master/clightning-plugins/jitterbug>плагином c-lightning</a> для достижения этой цели).</p><h2 id=дополнительные-технологии-лайтнинг-протокола>Дополнительные технологии лайтнинг-протокола
<a class=anchor href=#%d0%b4%d0%be%d0%bf%d0%be%d0%bb%d0%bd%d0%b8%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d1%8b%d0%b5-%d1%82%d0%b5%d1%85%d0%bd%d0%be%d0%bb%d0%be%d0%b3%d0%b8%d0%b8-%d0%bb%d0%b0%d0%b9%d1%82%d0%bd%d0%b8%d0%bd%d0%b3-%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb%d0%b0>#</a></h2><p>На сегодняшний день есть несколько дополнительных технологий протокола Lightning, о которых стоит упомянуть.</p><h3 id=многопутевые-платежи-mpp>Многопутевые платежи (MPP)
<a class=anchor href=#%d0%bc%d0%bd%d0%be%d0%b3%d0%be%d0%bf%d1%83%d1%82%d0%b5%d0%b2%d1%8b%d0%b5-%d0%bf%d0%bb%d0%b0%d1%82%d0%b5%d0%b6%d0%b8-mpp>#</a></h3><div class=imageWrapper><img src=/img/pln-230.jpg><p><em>Небольшая часть сети Lightning, где Алиса оплачивает счет по нескольким путям. Боб и Кэрол не видят общую сумму платежа.</em></p></div><p><a href=https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-November/001577.html>(Базовые) Многопутевые платежи</a> (MPP) – это существующее сегодня, но, возможно, не так часто используемое решение. Вместо того чтобы один платеж проходил по одному маршруту, это решение позволяет разбить один платеж на меньшие суммы и пройти по нескольким маршрутам. Это повышает вероятность того, что более крупный платеж пройдет по сети. Это также в определенной степени повышает приватность.</p><p>В соответствии с разделом <em>Зондирование баланса</em>, вместо крупного платежа, проходящего через сеть, осуществляются более мелкие платежи. Это позволяет лучше скрыть платеж и точную общую сумму. Одна из проблем заключается в том, что каждый MPP использует один и тот же хэш платежа, поэтому маршрутизатор (или сговорившиеся маршрутизаторы) может сопоставить их.</p><h3 id=атомарные-многопутевые-платежи-amp>Атомарные многопутевые платежи (AMP)
<a class=anchor href=#%d0%b0%d1%82%d0%be%d0%bc%d0%b0%d1%80%d0%bd%d1%8b%d0%b5-%d0%bc%d0%bd%d0%be%d0%b3%d0%be%d0%bf%d1%83%d1%82%d0%b5%d0%b2%d1%8b%d0%b5-%d0%bf%d0%bb%d0%b0%d1%82%d0%b5%d0%b6%d0%b8-amp>#</a></h3><p><a href=https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-February/000993.html>Атомарные многопутевые платежи</a> – это усовершенствование базовых MPP, в котором каждый разделенный платеж получает свой хэш платежа. Таким образом они не так коррелируют в сети, как MPP.</p><h3 id=rendezvous>Rendezvous
<a class=anchor href=#rendezvous>#</a></h3><p><a href=https://bitcointechweekly.com/front/proposal-for-rendez-vous-routing/>Маршрутизация Rendezvous</a> – это значительное улучшение приватности получателей. Получатели скрывают свой публичный ключ и приватные каналы, создавая инвойс с уже заполненной зашифрованной луковым методом информацией. Они указывают случайный узел, к которому отправитель должен создать путь, и оттуда направляется остальная часть платежа. Отправитель никогда не знает конечного получателя платежа, как и любой узел на маршруте.</p><h3 id=ослепление-маршрута-route-blinding>Ослепление маршрута (Route Blinding)
<a class=anchor href=#%d0%be%d1%81%d0%bb%d0%b5%d0%bf%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bc%d0%b0%d1%80%d1%88%d1%80%d1%83%d1%82%d0%b0-route-blinding>#</a></h3><p><a href=https://github.com/lightningnetwork/lightning-rfc/pull/765>Ослепление маршрута</a> – это альтернатива Rendezvous. Оно аналогично, но помогает предотвратить раскрытие приватных каналов злоумышленникам. Ослепление маршрута позволяет обеспечить конфиденциальность получателя и повторение маршрутов с различными суммами. Однако в целом это решение может быть менее приватным, и все еще может оставить некоторые возможности зондирования.</p><p>Rendezvous и Route Blinding все еще могут быть подвержены атакам через снэпшоты балансов как способу раскрытия отправителя и получателя. Для этого достаточно сделать снимок до совершения платежа и после. В случае с ослеплением маршрута можно добиться того, чтобы приватные каналы были недоступны до тех пор, пока узел не выдал инвойс ослепленного маршрута.</p><h3 id=маршрутизация-trampoline-trampoline-routing>Маршрутизация Trampoline (Trampoline routing)
<a class=anchor href=#%d0%bc%d0%b0%d1%80%d1%88%d1%80%d1%83%d1%82%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-trampoline-trampoline-routing>#</a></h3><p><a href=https://bitcoinops.org/en/topics/trampoline-payments/>Маршрутизация Trampoline</a> – это метод, при котором узел хочет отправить средства в определенный пункт назначения, но не обладает достаточной информацией, чтобы это осуществить. Вместо этого отправитель передает платеж известному Trampoline маршрутизатору. Этот маршрутизатор далее создает путь, чтобы доставить платеж в пункт назначения.</p><p>Даже если получатель также поддерживает (или хотя бы <a href="https://twitter.com/realtbast/status/1391832442575720455?s=20">понимает</a>) протокол Trampoline, то другие маршрутизаторы продолжают не знать, является ли следующий Trampoline конечным пунктом назначения. Примерно так же, как это происходит сегодня, когда обычные маршрутизаторы не знают, является ли их следующий хоп последним. Получатели могут даже реализовать Rendezvous поверх этого решения.</p><h3 id=маршрутизация-с-публичным-ключом-public-key-routing>Маршрутизация с публичным ключом (Public Key Routing)
<a class=anchor href=#%d0%bc%d0%b0%d1%80%d1%88%d1%80%d1%83%d1%82%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d1%81-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d1%8b%d0%bc-%d0%ba%d0%bb%d1%8e%d1%87%d0%be%d0%bc-public-key-routing>#</a></h3><p>Простой альтернативой сокрытию UTXO в основе канала является реализация <a href=https://github.com/lightningnetwork/lightning-rfc/pull/814>маршрутизации с публичным ключом</a>. Хотя по-прежнему можно обнаружить приватный канал между двумя пирами, которые не имеют открытого канала между собой, это исключает возможность узнать UTXO, стоящий за ним.</p><h3 id=immortan>Immortan
<a class=anchor href=#immortan>#</a></h3><p><a href=https://github.com/btcontract/immortan>Immortan</a> – это &ldquo;минимальная, ориентированная на приватность реализация протокола LN, предназначенная как основа для легких узлов LN&rdquo;. Эта реализация решает такие задачи, как ротация публичных ключей/инвойсов и поддельные идентификаторы каналов. В настоящее время она находится в разработке.</p><h3 id=zkchannels>zkChannels
<a class=anchor href=#zkchannels>#</a></h3><p>zkChannels предлагает надежную анонимность и невозможность связывания оффчейн-транзакций, минимизируя объем информации, которую получатель имеет об отправителе, (кроме суммы платежа). Это предложенный уровень обновления, который характеризуется асимметричным потоком информации для сохранения приватности через искаженные схемы.</p><p>Он в первую очередь улучшает приватность отправителя. Однако он поддерживает только отношения типа &ldquo;продавец-клиент&rdquo;, когда клиент раскрывает продавцу только сумму платежа. zkChannels не поддерживает пересылку платежей.</p><h3 id=taproot>Taproot
<a class=anchor href=#taproot>#</a></h3><p><a href=/taproot>Taproot</a> привнес множество улучшений, но с точки зрения Lightning одним из преимуществ является сокрытие мультисиг-транзакций. Каждое совместное закрытие без неразрешенных (проблемных/спорных) платежей будет выглядеть как обычная Taproot-трата с одной подписью. Таким образом, будет сложнее угадать, какая из транзакций может являться закрытием приватного канала.</p><h3 id=фабрики-каналов-channel-factories>Фабрики каналов (Channel factories)
<a class=anchor href=#%d1%84%d0%b0%d0%b1%d1%80%d0%b8%d0%ba%d0%b8-%d0%ba%d0%b0%d0%bd%d0%b0%d0%bb%d0%be%d0%b2-channel-factories>#</a></h3><p>Фабрики каналов – это место, где множество пиров могут объединить свои средства для совместного создания подсети каналов. В этом есть преимущества масштабируемости, но еще один потенциальный результат заключается в том, что со стороны они могут выглядеть как канал CoinJoin. Для создания фабрик каналов потребуется несколько усовершенствований протокола базового уровня и уровня Lightning. В качестве альтернативы аналогичного результата можно добиться с помощью многостороннего приложения для пакетного создания каналов.</p><h3 id=другие-решения>Другие решения
<a class=anchor href=#%d0%b4%d1%80%d1%83%d0%b3%d0%b8%d0%b5-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f>#</a></h3><p>Существует множество возможных улучшений или предложений для Lightning, которые могли бы улучшить приватность пользователей. Реализация некоторых из них, включая упомянутые здесь, может занять годы. Я пока не рассматриваю их слишком глубоко, поскольку эта статья посвящена возможностям, доступным уже сегодя.</p><h2 id=итоговые-советы-по-приватности>Итоговые советы по приватности
<a class=anchor href=#%d0%b8%d1%82%d0%be%d0%b3%d0%be%d0%b2%d1%8b%d0%b5-%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%8b-%d0%bf%d0%be-%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d0%be%d1%81%d1%82%d0%b8>#</a></h2><p>Итак, мы определили несколько моментов, касающихся приватности в сети Lightning:</p><ol><li>Любой может увидеть информацию о публичном узле любого участника, если он когда-либо открывал публичный канал.</li><li>Любой может увидеть UTXO, лежащие в основе канала, приватные каналы также могут подвергнуться раскрытию.</li><li>Ончейн-аналитики могут нацелиться на узлы, их активные и уже закрытые каналы, UTXO и т.д.</li><li>Размещение более одного смешанного (CoinJoin) UTXO на вашем узле может нивелировать смешивание и раскрыть вашу истинную личность.</li><li>Уровень приватности получателей очень низок; это не изменится до тех пор, пока не будет реализовано что-то вроде Rendezvous.</li><li>Отдельные платежи, проходящие через сеть, можно засечь. Хотя маловероятно получить какие-либо гарантии, если только речь не идет о злоумышленнике, обладающем огромными ресурсами. Более реалистична атака, нацеленная на конкретные узлы для оценки их экономической активности.</li></ol><p>Учитывая вышесказанное, поделюсь своими предложениями по улучшению собственной приватности в сети Lightning.</p><h3 id=отправителям>Отправителям
<a class=anchor href=#%d0%be%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%b8%d1%82%d0%b5%d0%bb%d1%8f%d0%bc>#</a></h3><ol><li>1 UTXO на узел на приватном канале. В идеале смешанный и использующий полный баланс UTXO (без сдачи).</li><li>Не отправляйте напрямую своему партнеру по каналу (это следует делать обходными путями через других пиров).</li><li>Когда закончили, полностью исчерпайте свой канал и закройте его.</li><li>Не получайте, не создавайте инвойсы и т.д., которые раскрывают информацию о канале/UTXO.</li><li>Если пройдет достаточно времени, этот канал станет известен сети и его можно будет прозондировать, поэтому не держите эти одноразовые узлы в течение длительного периода времени.</li><li>Отправляйте платежи небольшими частями и по более длинным путям, чтобы скрыть их от перехвата.</li></ol><h3 id=получателям>Получателям
<a class=anchor href=#%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b0%d1%82%d0%b5%d0%bb%d1%8f%d0%bc>#</a></h3><ol><li>Никогда не открывайте канал на основе принадлежащего вам UTXO. Попросите вторую сторону открыть канал с их UTXO или найдите источник UTXO для открытия канала. Источниками могут послужить <a href="https://www.bitrefill.com/thor-lightning-network-channels/?hl=en">Bitrefill Thor</a>, <a href=https://lightning.engineering/loop/>Lightning Lab&rsquo;s Loop Out</a>, <a href=https://lnbig.com/#/open-channel>LNBig</a>, <a href=https://yalls.org/about/>Yalls</a> и т.д.</li><li>Если вы хотите отправить некоторые средства ончейн, либо воспользуйтесь сервисом вроде Loop Out, либо закройте канал и смешайте средства перед открытием нового.</li><li>Используйте только Tor и не используйте псевдонимов для вашей ноды.</li><li>Не делитесь инвойсами публично и не получайте их от сервисов, на которых вы <a href=/privacy/no-kyc>прошли проверку KYC</a>, разве что вы используете систему одноразовых инвойсов.</li><li>Не сообщайте окружающим, каким именно узлом вы оперируете.</li><li>Не создавайте инвойсы с заметками, содержащими раскрывающую информацию.</li></ol><h3 id=смешивание-в-ln>Смешивание в LN
<a class=anchor href=#%d1%81%d0%bc%d0%b5%d1%88%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b2-ln>#</a></h3><p>Если вам интересно смешивании в сети, вы можете заплатить за услугу, например, <em>Bitrefill Thor</em>, чтобы открыть канал с совершенно новым узлом. Затем вы можете отправить средства с вашего одноразового узла на ваш арендованный узел канала. Таким образом, после закрытия каналов вы больше не владеете UTXO, с которым открывали первый канал. Теперь вы владеете новым UTXO с другого узла. Оплата арендованного канала или UTXO через Lightning также позволит скрыть вас как отправителя, если следовать лучшим практикам.</p><h2 id=заключение>Заключение
<a class=anchor href=#%d0%b7%d0%b0%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5>#</a></h2><p>Цель сети Lightning Network – молниеносные платежи. Базовый уровень Биткоина не предоставляет никаких гарантий приватности, точно так же как и Lightning. Существуют способы попытаться скрыться среди активности сети, но это не гарантия. Крупные игроки могут атаковать и попытаться раскрыть приватные каналы, которые, по сути, являются лишь продолжением основного графа. Отсюда следует, что движение средств по сети должно считаться достоянием общественности.</p><p>Подпольные сети Lightning, состоящие из полностью приватных узлов, которые доверяют друг другу свою приватность, вполне могут существовать сейчас или в будущем. Но маршрутизация платежей по основному публичному графу сопряжена с определенными рисками в плане приватности. Учитывайте ту модель угроз, которую считаете уместной в своей ситуации и используйте представленную выше информацию соответствующим образом.</p><p>Возможно, в будущем появятся решения, которые смогут улучшить ситуацию, но на сегодняшний день мы находимся именно на этом этапе общего использования сети Lightning Network.</p><h3 id=благодарности>Благодарности
<a class=anchor href=#%d0%b1%d0%bb%d0%b0%d0%b3%d0%be%d0%b4%d0%b0%d1%80%d0%bd%d0%be%d1%81%d1%82%d0%b8>#</a></h3><p>Огромное спасибо всем, кто нашел время, чтобы просмотреть и дать ценные предложения по нескольким черновикам этой статьи! Это openoms, Abubakar, Evan, Andrew и другие.</p><p>Исследователи и разработчики Lightning Network также заслуживают отдельной благодарности, поскольку большая часть информации в этой статье получена в результате их многолетней работы. Я привел множество их ссылок, но в этой статье особо выделяются Rusty, Sergei, Bastien и Joost!</p><p>Не стесняйтесь поддержать биткоин-разработчиков в Bitcoin Dev List!</p><p>Поддержать проект 21 идея, подготовивший перевод этой статьи можно, перейдя по <a href=/contribute>ссылке</a>.</p></article><hr><i>Connect to our relay to leave a comment. <a href=https://21ideas.org/en/comments/>Details</a>.<br>Подключитесь к нашему релею, чтобы оставить комментарий. <a href=https://21ideas.org/comments/>Подробнее</a>.</i>
<zap-threads anchor=https://21ideas.org/privatnost-v-lajtning/ author=npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l relays=wss://21ideas.nostr1.com disable=replyAnonymously><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#обзор-lightning>Обзор Lightning</a></li><li><a href=#улучшенная-приватность-в-сети-lightning>Улучшенная приватность в сети Lightning</a></li><li><a href=#краткое-содержание>Краткое содержание</a></li><li><a href=#настройка-узла>Настройка узла</a><ul><li><a href=#ip-против-tor>IP против Tor</a></li></ul></li><li><a href=#идентификация-узла>Идентификация узла</a><ul><li><a href=#псевдоним>Псевдоним</a></li><li><a href=#приложения>Приложения</a></li></ul></li><li><a href=#utxo-и-их-использование-в-lightning>UTXO и их использование в Lightning</a><ul><li><a href=#utxo-используемые-для-открытия-публичных-каналов>UTXO, используемые для открытия публичных каналов</a></li><li><a href=#приватные-каналы-не-приватны>Приватные каналы не приватны</a></li><li><a href=#закрытие-канала>Закрытие канала</a></li><li><a href=#смешанные-utxo>Смешанные UTXO</a></li></ul></li><li><a href=#приватность-получателя>Приватность получателя</a><ul><li><a href=#инвойсы>Инвойсы</a></li></ul></li><li><a href=#приватность-отправителя>Приватность отправителя</a><ul><li><a href=#1-хоп>1 хоп</a></li><li><a href=#2-хопа>2 хопа</a></li><li><a href=#отправка-средств-через-сеть>Отправка средств через сеть</a></li><li><a href=#зондирование-балансов>Зондирование балансов</a></li><li><a href=#временные-атаки>Временные атаки</a></li></ul></li><li><a href=#дополнительные-технологии-лайтнинг-протокола>Дополнительные технологии лайтнинг-протокола</a><ul><li><a href=#многопутевые-платежи-mpp>Многопутевые платежи (MPP)</a></li><li><a href=#атомарные-многопутевые-платежи-amp>Атомарные многопутевые платежи (AMP)</a></li><li><a href=#rendezvous>Rendezvous</a></li><li><a href=#ослепление-маршрута-route-blinding>Ослепление маршрута (Route Blinding)</a></li><li><a href=#маршрутизация-trampoline-trampoline-routing>Маршрутизация Trampoline (Trampoline routing)</a></li><li><a href=#маршрутизация-с-публичным-ключом-public-key-routing>Маршрутизация с публичным ключом (Public Key Routing)</a></li><li><a href=#immortan>Immortan</a></li><li><a href=#zkchannels>zkChannels</a></li><li><a href=#taproot>Taproot</a></li><li><a href=#фабрики-каналов-channel-factories>Фабрики каналов (Channel factories)</a></li><li><a href=#другие-решения>Другие решения</a></li></ul></li><li><a href=#итоговые-советы-по-приватности>Итоговые советы по приватности</a><ul><li><a href=#отправителям>Отправителям</a></li><li><a href=#получателям>Получателям</a></li><li><a href=#смешивание-в-ln>Смешивание в LN</a></li></ul></li><li><a href=#заключение>Заключение</a><ul><li><a href=#благодарности>Благодарности</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>