<!doctype html><html lang=ru dir=ltr><head><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel=stylesheet><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Биткоин-сообщество сейчас активно обсуждает предложение изменить политику Bitcoin Core в отношении транзакций с OP_RETURN. Это не просто технический спор; он затрагивает фундаментальные философские вопросы о предназначении Биткоина, о том, как должна функционировать его сеть, и вечные дебаты о спаме в противовес легитимному встраиванию данных. Этот пост посвящён ключевым аспектам этого предложения и сопутствующей дискуссии."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=lightning content="21ideas@getalby.com"><meta property="og:title" content="Дебаты вокруг OP_RETURN"><meta property="og:description" content="Биткоин-сообщество сейчас активно обсуждает предложение изменить политику Bitcoin Core в отношении транзакций с OP_RETURN. Это не просто технический спор; он затрагивает фундаментальные философские вопросы о предназначении Биткоина, о том, как должна функционировать его сеть, и вечные дебаты о спаме в противовес легитимному встраиванию данных. Этот пост посвящён ключевым аспектам этого предложения и сопутствующей дискуссии."><meta property="og:type" content="article"><meta property="og:url" content="https://21ideas.org/posts/op_return-debate/"><meta property="og:image" content="https://21ideas.org/img/blog/op_return-wars/never-gonna-give-you-up.webp"><title>Дебаты вокруг OP_RETURN | 21ideas</title>
<link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon media="(prefers-color-scheme: dark)" sizes=180x180 href=/apple-touch-icon-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=32x32 href=/favicon-32x32-dark.png><link rel=icon type=image/png media="(prefers-color-scheme: dark)" sizes=16x16 href=/favicon-16x16-dark.png><link rel=stylesheet href=/book.min.a88fda41628a86b0aa4a3caa9c8ab466ee8e01a433898186e506a93fb98f1884.css integrity="sha256-qI/aQWKKhrCqSjyqnIq0Zu6OAaQziYGG5QapP7mPGIQ=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/ru.search.min.1fbc76bd1c0143c2d942c8f1ffa73e7c3676eb9d3fe3fe50e862f0275fcfb686.js integrity="sha256-H7x2vRwBQ8LZQsjx/6c+fDZ2650/4/5Q6GLwJ1/PtoY=" crossorigin=anonymous></script><script type=text/javascript src=https://unpkg.com/zapthreads@0.5.2/dist/zapthreads.iife.js></script><script defer data-domain=21ideas.org src=https://plausible.io/js/script.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><picture><source srcset=/svg/logo_white.svg media="(prefers-color-scheme: dark)"><img src=/svg/logo_black.svg alt=Logo>
</picture><span>21ideas</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Поиск aria-label=Поиск maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Русский</a></label><ul><li><a href=https://21ideas.org/en/>English</a></li></ul></li></ul><ul><li><input type=checkbox id=section-b0dafb98a5d0578d631a1c9dd29bee81 class=toggle>
<label for=section-b0dafb98a5d0578d631a1c9dd29bee81 class="flex justify-between"><a href=/start/>Старт</a></label><ul><li><a href=/glossary/>Глоссарий</a></li><li><a href=/start/start/>Что такое Биткоин?</a></li><li><a href=/start/guide/>Используем биткоин</a></li><li><a href=/course/>Биткоин от А до Я</a></li><li><a href=/bitcoin-myths/>Разрушаем мифы о Биткоине</a></li><li><a href=/shitcoin-casino/>Не играйте в щиткоин-казино</a></li></ul></li><li><input type=checkbox id=section-f4a619252679302c899a690180d7ffa2 class=toggle>
<label for=section-f4a619252679302c899a690180d7ffa2 class="flex justify-between"><a href=/theory/>Теория</a></label><ul><li><input type=checkbox id=section-356070beafdf88b67731f5d7a38cd521 class=toggle>
<label for=section-356070beafdf88b67731f5d7a38cd521 class="flex justify-between"><a href=/economics/>Экономика</a></label><ul><li><input type=checkbox id=section-9c21df0254e6f531458131e593d77332 class=toggle>
<label for=section-9c21df0254e6f531458131e593d77332 class="flex justify-between"><a href=/pzv/>Постепенно, затем внезапно</a></label><ul><li><a href=/pzv/postepenno-zatem-vnezapno/>Введение</a></li><li><a href=/pzv/bitkoin-nelzya-skopirovat/>Биткоин нельзя скопировать</a></li><li><a href=/pzv/bitkoin-ne-slishkom-volatilen/>Биткоин не слишком волатилен</a></li><li><a href=/pzv/bitkoin-ne-tratit-energiyu-zrya/>Биткоин не тратит энергию зря</a></li><li><a href=/pzv/bitkoin-ne-slishkom-medlennyj/>Биткоин не слишком медленный</a></li><li><a href=/pzv/bitkoin-eto-ispravit/>Биткоин это исправит</a></li><li><a href=/pzv/bitkoin-ne-blokchejn/>Биткоин, не блокчейн</a></li><li><a href=/pzv/bitkoin-nichem-ne-podkreplen/>Биткоин ничем не подкреплен?</a></li><li><a href=/pzv/bitkoin-ne-finansovaya-piramida/>Биткоин — не финансовая пирамида</a></li><li><a href=/pzv/bitkoin-ne-mozhet-byt-zabanen/>Биткоин не может быть забанен</a></li><li><a href=/pzv/bitkoin-ne-dlya-prestupnikov/>Биткоин не для преступников</a></li><li><a href=/pzv/bitkoin-obescenivaet-ostalnye-dengi/>Биткоин обесценивает остальные деньги</a></li><li><a href=/pzv/bitkoin-zov-k-edineniyu/>Биткоин — зов к единению</a></li><li><a href=/pzv/bitkoin-eto-zdravyj-smysl/>Биткоин — это здравый смысл</a></li><li><a href=/pzv/bitkoin-antihrupok/>Биткоин антихрупок</a></li><li><a href=/pzv/bitkoin-velikaya-definancializaciya/>Биткоин — великая дефинанcиализация</a></li></ul></li><li><input type=checkbox id=section-f75619703a6dc5d9286c6f2682febebb class=toggle>
<label for=section-f75619703a6dc5d9286c6f2682febebb class="flex justify-between"><a href=/sb/>Становление Биткоина</a></label><ul><li><a href=/sb/stanovlenie-intro/>Введение</a></li><li><a href=/sb/stanovlenie-1/>О времени</a></li><li><a href=/sb/stanovlenie-2/>О людях</a></li><li><a href=/sb/stanovlenie-3/>Знакомьтесь: деньги</a></li><li><a href=/sb/stanovlenie-4/>Поворот не туда</a></li><li><a href=/sb/stanovlenie-5/>Цифровая редкость</a></li><li><a href=/sb/stanovlenie-6/>Цифровые контракты</a></li><li><a href=/sb/stanovlenie-7/>Недостающие части головоломки</a></li></ul></li><li><a href=/bitkoin-ne-vredit-okruzhayushej-srede/>Биткоин и окружающая среда</a></li><li><a href=/sem-setevyh-effektov-bitkoina/>Семь сетевых эффектов Биткоина</a></li><li><a href=/hozyaeva-i-raby-deneg/>Хозяева и рабы денег</a></li><li><a href=/strukturnaya-perestrojka/>Структурная перестройка</a></li><li><a href=/v-zashchitu-deflyacii/>В защиту дефляции</a></li><li><a href=/sravnenie-monetarnyh-standartov/>Сравнение монетарных стандартов</a></li><li><a href=/negativnye-effekty-neftedollara/>Негативные внешние эффекты нефтедоллара</a></li><li><a href=/raskoshelivaemsya/>Раскошеливаемся (Shelling Out): Происхождение денег</a></li><li><a href=/bitcoin-i-ritmy-istorii/>Биткоин и ритмы истории</a></li><li><a href=/bitcoin-i-internet-cikly-hopfa/>Биткоин и интернет-циклы Хопфа</a></li><li><a href=/dengi-blokchejny-i-socialnaya-masshtabiruemost/>Деньги, блокчейны и социальная масштабируемость</a></li><li><a href=/chto-takoe-dengi/>Что такое деньги</a></li><li><a href=/vyzhivaet-silnejshij/>Выживает сильнейший</a></li><li><a href=/strategiya-dca/>Стратегия DCA</a></li><li><a href=/jevons-paradox/>Парадокс Джевонса: Обратная истина</a></li><li><a href=/kak-rabotajut-dengi/>Как работают деньги</a></li></ul></li><li><input type=checkbox id=section-25dd0684538231cc6c8c9cfa92ec4aa8 class=toggle>
<label for=section-25dd0684538231cc6c8c9cfa92ec4aa8 class="flex justify-between"><a href=/security/>Безопасность</a></label><ul><li><a href=/kak-hranit-kljuchi/>Биткоин-кошельки. Зачем и как хранить свои приватные ключи</a></li><li><a href=/seed/>Что такое сид-фраза?</a></li><li><a href=/seed-security/>Как обезопасить свои сид-фразы?</a></li><li><a href=/passphrase/>Насколько надежна ваша парольная фраза?</a></li><li><a href=/multisig/>Все о мультисиг</a></li><li><a href=/hwws/>Сравнение аппаратных кошельков</a></li><li><a href=/multisig-1/>Мультисиг. Часть I</a></li><li><a href=/multisig-2/>Мультисиг. Часть II: Отдельные ключи – основа мультиподписи</a></li></ul></li><li><input type=checkbox id=section-aff498226e3572dbd162673efd80256d class=toggle>
<label for=section-aff498226e3572dbd162673efd80256d class="flex justify-between"><a href=/privacy/>Приватность</a></label><ul><li><a href=/privacy/luchshie-praktiki/>Как сохранить приватность?</a></li><li><a href=/privacy/no-kyc/>Никаких KYC, берегите персональные данные</a></li><li><a href=/privatnost-v-seti-bitcoin/>Приватность в сети Биткоин</a></li><li><a href=/bitcoin-stanovitsya-kriticheski-vazhnym/>Биткоин становится критически важным</a></li><li><a href=/bip47-ili-gadkij-utenok/>BIP47, или гадкий утенок</a></li><li><input type=checkbox id=section-e925ecbcdc92e383b7ea825222e52704 class=toggle>
<label for=section-e925ecbcdc92e383b7ea825222e52704 class="flex justify-between"><a href=/privacy/oxt/>Понимание приватности в сети Биткоин с помощью OXT</a></label><ul><li><a href=/privacy/oxt-1/>Часть 1: Анализ цепочки и приватность транзакций</a></li><li><a href=/privacy/oxt-2/>Часть 2: Ключевые концепции анализа цепочки</a></li><li><a href=/privacy/oxt-3/>Часть 3: Защита от анализа цепочки</a></li><li><a href=/privacy/oxt-4/>Часть 4: Применение концепций анализа цепочки для улучшения приватности пользователей</a></li></ul></li><li><a href=/privacy/coinjoin/>Понимание и использование CoinJoin</a></li><li><a href=/bitcoin-fungibility/>Взаимозаменяемость Биткоина</a></li><li><a href=/freesamourai/>#FreeSamourai</a></li></ul></li><li><input type=checkbox id=section-0c147b062aca36b71690569b35776e24 class=toggle>
<label for=section-0c147b062aca36b71690569b35776e24 class="flex justify-between"><a href=/protocol/>Протокол</a></label><ul><li><a href=/kto-kontroliruet-bitkoin-kor/>Кто контролирует Bitcoin Core?</a></li><li><a href=/vechnaja-borba/>Вечная борьба Биткоина</a></li><li><a href=/ob-udobstve-vzaimodejstvija-s-bitcoinom/>Об удобстве взаимодействия с Биткоином</a></li><li><a href=/bitcoin-zoloto-2-0/>Биткоин: цифровое золото или пиринговая наличность?</a></li><li><a href=/upravlenie-bitcoin/>Управление Биткоином</a></li><li><a href=/doverennye-tretyi-storony/>Доверенные третьи стороны — это бреши в системе безопасности</a></li><li><a href=/21-million-ne-podlezhit-obsuzhdeniyu/>21 миллион не подлежит обсуждению</a></li><li><a href=/proof-of-work/>Proof of Work: доказательство проделанной работы</a></li><li><a href=/proof-of-stake-eto-skam/>Proof of Stake – это скам</a></li><li><a href=/byl-li-satoshi-zhadnym-majnerom/>Был ли Сатоши жадным майнером?</a></li><li><a href=/segwit/>Что такое SegWit</a></li><li><a href=/taproot/>Что такое Taproot</a></li><li><a href=/bomby-slozhnosti-ethereum/>Бомбы сложности Ethereum</a></li><li><a href=/rgb/>Разбирая протокол RGB</a></li><li><a href=/halving/>Что такое Биткоин-халвинг?</a></li><li><a href=/difficulty/>О корректировке сложности майнинга</a></li><li><a href=/sravnenie-tipov-bitcoin-adresov/>Типы биткоин-адресов</a></li><li><a href=/myths-about-halving/>Мифы о Биткоин-халвинге</a></li><li><a href=/mining-walkthrough/>SHA256 и майнинг в сети Биткоин</a></li><li><input type=checkbox id=section-b92a36e5ae31c3fd403b01b9c2ec1c8b class=toggle>
<label for=section-b92a36e5ae31c3fd403b01b9c2ec1c8b class="flex justify-between"><a href=/protocol/utxo/>Что такое UTXO и как ими управлять?</a></label><ul><li><a href=/protocol/utxo-1/>Что такое UTXO?</a></li><li><a href=/protocol/utxo-2/>Как избежать высоких комиссий при большом количестве UTXO</a></li><li><a href=/protocol/utxo-3/>Приватность UTXO</a></li></ul></li><li><a href=/timestamps/>Временны́е метки в Биткоине</a></li><li><a href=/transaction-size/>Размер транзакции</a></li><li><a href=/o-zakostenenii-protokola/>О закостенении протокола</a></li></ul></li><li><input type=checkbox id=section-06b1b370d2d0779d84f03a0910de7588 class=toggle>
<label for=section-06b1b370d2d0779d84f03a0910de7588 class="flex justify-between"><a href=/history/>История</a></label><ul><li><input type=checkbox id=section-139f117b6284888a0eef6a640eb6c1bd class=toggle>
<label for=section-139f117b6284888a0eef6a640eb6c1bd class="flex justify-between"><a href=/gf/>Генезис-файлы</a></label><ul><li><a href=/gf/genesis-intro/>Пролог</a></li><li><a href=/gf/genesis-1/>Часть I: eCash Дэвида Чаума и зарождение мечты шифропанков</a></li><li><a href=/gf/genesis-2/>Часть II: Hashcash или как Адам Бэк разработал сердце Биткоина</a></li><li><a href=/gf/genesis-3/>Часть III: Если у Биткоина был прототип, то это были b-money Вэя Дая</a></li><li><a href=/gf/genesis-4/>Часть IV: Создавая Bit Gold, Сабо был в двух шагах от изобретения Биткоина</a></li><li><a href=/gf/genesis-5/>Часть V: Как поиски цифровой наличности привели Хэла Финни к созданию RPOW (и не только)</a></li></ul></li><li><a href=/hal-finney/>Хэл Финни — жизнь и смерть легенды движения шифропанков</a></li><li><a href=/bitcoin-and-me/>Биткоин и я</a></li><li><a href=/bitcoin-reformaciya/>Биткоин-Реформация</a></li><li><a href=/bitcoin-forks/>Полная история консенсус-форков Биткоина</a></li><li><a href=/analyzing-2013-fork/>Анализ форка Биткоина 2013 года</a></li><li><input type=checkbox id=section-75b9ecb484c68d9cfe79cb170ea1cece class=toggle>
<label for=section-75b9ecb484c68d9cfe79cb170ea1cece class="flex justify-between"><a href=/sr/>Silk Road</a></label><ul><li><a href=/sr/silkroad-1/>Скаут, Биткоин и грибы</a></li><li><a href=/sr/silkroad-2/>Первые успехи и неудачи нарко-Amazon'a</a></li><li><a href=/sr/silkroad-3/>Ужасный Пират Робертс</a></li><li><a href=/sr/silkroad-4/>Компания, заработавшая тысячи биткоинов</a></li><li><a href=/sr/silkroad-5/>Тёмная сторона Silk Road</a></li><li><a href=/sr/silkroad-6/>Розыск и арест Росса Ульбрихта</a></li></ul></li></ul></li><li><input type=checkbox id=section-af85ae42a802ac9fce098ca6b8d6a65b class=toggle>
<label for=section-af85ae42a802ac9fce098ca6b8d6a65b class="flex justify-between"><a href=/philosophy/>Философия</a></label><ul><li><input type=checkbox id=section-d0147c75204bce6530fbcf41d2d36549 class=toggle>
<label for=section-d0147c75204bce6530fbcf41d2d36549 class="flex justify-between"><a href=/chemu-ya-nauchilsya-u-bitcoina/>Чему я научился у Биткоина?</a></label><ul><li><a href=/chemu-ya-nauchilsya-u-bitcoina/filosofskie-uroki-bitcoina/>Часть1. Философские уроки Биткоина</a></li></ul></li><li><a href=/ne-shitcoin/>Биткоин, не щиткоин</a></li><li><a href=/neotemlemye-prava-sobstvennosti/>Неотъемлемые права собственности</a></li><li><a href=/manifest-kriptoanarhista/>Манифест криптоанархиста</a></li><li><a href=/manifest-shifropanka/>Манифест шифропанка</a></li><li><a href=/tyulpannaya-lihoradka/>Биткоин — современная голландская тюльпанная лихорадка?</a></li><li><a href=/vse-moshenniki/>Все — мошенники</a></li><li><a href=/svoboda-cennosti/>Свобода ценности</a></li><li><a href=/bitcoin-meme/>Биткоин — единственный реальный мем</a></li><li><a href=/nol-i-bitcoin/>Ноль и Биткоин</a></li><li><a href=/crypto-bro/>Дорогие крипто- и фиат-бро</a></li><li><a href=/boremsya-s-poddelnymi-bitcoin/>Боремся с поддельными биткоинами</a></li><li><a href=/bit%D1%81oin-eto-micelij/>Биткоин — это мицелий</a></li><li><a href=/pochemu-bitcoin-zhivoj-organizm/>Доказательство жизни. Почему Биткоин — живой организм</a></li><li><a href=/samaya-mirnaya-revolyuciya/>Самая мирная революция</a></li><li><a href=/o-bitcoin-vselennoj/>О Биткоин-вселенной</a></li><li><a href=/bitcoin-dissidenty/>Биткоин-диссиденты</a></li><li><a href=/bitcoin-svoboda/>Биткоин = свобода</a></li></ul></li><li><input type=checkbox id=section-fdb518469e72600e21abd65af5ea6171 class=toggle>
<label for=section-fdb518469e72600e21abd65af5ea6171 class="flex justify-between"><a href=/future/>Будущее</a></label><ul><li><input type=checkbox id=section-b59a8856c56e2e0372711e9188dfebe9 class=toggle>
<label for=section-b59a8856c56e2e0372711e9188dfebe9 class="flex justify-between"><a href=/ba/>Биткоин-астрономия</a></label><ul><li><a href=/ba/1/>Постгипербиткоинизация</a></li><li><a href=/ba/2/>Миллион крошечных миров</a></li><li><a href=/ba/3/>Первый контакт</a></li></ul></li><li><a href=/ej-bitcoin-pritormozi/>Эй, Биткоин, притормози</a></li><li><a href=/apokalipsis/>Сможет ли Биткоин пережить апокалипсис?</a></li><li><a href=/bitcoin-i-teplovaya-energiya-okeanov/>Биткоин и тепловая энергия океанов</a></li></ul></li><li><input type=checkbox id=section-43599378ef9b0927116f5c672d4753eb class=toggle>
<label for=section-43599378ef9b0927116f5c672d4753eb class="flex justify-between"><a href=/lightning/>Лайтнинг</a></label><ul><li><a href=/chto-takoe-laitning/>Что такое Лайтнинг?</a></li><li><a href=/lajtning-koshelki/>Лайтнинг-кошельки</a></li><li><a href=/lajtning-adresa/>Лайтнинг-адреса</a></li><li><a href=/privatnost-v-lajtning/>Приватность в сети Lightning</a></li><li><a href=/centralizovanna-li-set-lightning/>Централизованна ли сеть Lightning?</a></li><li><a href=/mekhanizm-raboty-lightning/>Механизм работы Lightning Network</a></li><li><a href=/problema-vhodyashchej-likvidnosti/>Решение проблемы входящей ликвидности</a></li></ul></li></ul></li><li><input type=checkbox id=section-d4e0b36756ff8942d2ab4055a855ff29 class=toggle>
<label for=section-d4e0b36756ff8942d2ab4055a855ff29 class="flex justify-between"><a href=/practice/>Практика</a></label><ul><li><input type=checkbox id=section-306de2e6e6c2e950b9ae3bd383e891b8 class=toggle>
<label for=section-306de2e6e6c2e950b9ae3bd383e891b8 class="flex justify-between"><a href=/practice/buy/>Покупка</a></label><ul><li><a href=/newbie-buy/>Покупка и хранение биткоина для новичков</a></li><li><a href=/hodl-hodl/>Покупка биткоина без KYC на Hodl Hodl</a></li><li><a href=/robosats/>RoboSats: Приватный p2p обмен</a></li></ul></li><li><input type=checkbox id=section-7e507c15445415f4a6c6ff107fd5be67 class=toggle>
<label for=section-7e507c15445415f4a6c6ff107fd5be67 class="flex justify-between"><a href=/practice/hodl/>Хранение</a></label><ul><li><a href=/electrum/>Кошелек Электрум</a></li><li><a href=/blue/>Кошелек Blue</a></li><li><a href=/seedsigner/>SeedSigner: оффлайн-крепость для ваших биткоинов</a></li><li><a href=/holodnyj-koshelek-iz-starogo-smartfona/>Холодный кошелек из старого смартфона</a></li><li><a href=/coldcard/>Что такое Coldcard?</a></li></ul></li><li><input type=checkbox id=section-cc823275546413520de75cb290b6340f class=toggle>
<label for=section-cc823275546413520de75cb290b6340f class="flex justify-between"><a href=/practice/interact/>Взаимодействие</a></label><ul><li><a href=/practice/bitcoin-node/>Каждому следует запустить собственную Биткоин-ноду!</a></li><li><a href=/orangepilling-in-5-min/>Оранжпиллинг за 5 минут</a></li><li><a href=/5-tips-for-teaching-bitcoin/>5 советов по обучению Биткоину</a></li></ul></li><li><input type=checkbox id=section-15aa48ccf00c4a6077461082e56e8a87 class=toggle>
<label for=section-15aa48ccf00c4a6077461082e56e8a87 class="flex justify-between"><a href=/docs/Practice/security/>Практики безопасности</a></label><ul><li><a href=/pgp-verify/>Проверка подлинности программ с помощью PGP</a></li></ul></li><li><input type=checkbox id=section-7a6d0f6b85d630f151cfac100463320e class=toggle>
<label for=section-7a6d0f6b85d630f151cfac100463320e class="flex justify-between"><a href=/practice-privacy/>Практики приватности</a></label><ul><li><input type=checkbox id=section-0937c773447ed958013e7f991c3cfc8e class=toggle>
<label for=section-0937c773447ed958013e7f991c3cfc8e class="flex justify-between"><a href=/practice-privacy/dojo/>Установка Биткоин-узла Dojo на x86</a></label><ul><li><a href=/practice-privacy/dojo-0/>Введение</a></li><li><a href=/practice-privacy/dojo-1/>Установка Bitcoin Core и Tor</a></li><li><a href=/practice-privacy/dojo-2/>Установка индексатора Fulcrum</a></li><li><a href=/practice-privacy/dojo-3/>Установка блокчейн-обозревателя Mempool</a></li><li><a href=/practice-privacy/dojo-4/>Установка Samourai Dojo</a></li><li><a href=/practice-privacy/dojo-5/>Конфигурация межсетевого экрана</a></li><li><a href=/practice-privacy/dojo-6/>Установка обновлений пакетов</a></li></ul></li><li><a href=/practice-privacy/ronindojo/>Установка RoninDojo на x86</a></li><li><a href=/grapheneos/>GrapheneOS: Избавляемся от слежки Google на смартфоне</a></li></ul></li><li><input type=checkbox id=section-9ce9af3be32641dfee9cee88793362a5 class=toggle>
<label for=section-9ce9af3be32641dfee9cee88793362a5 class="flex justify-between"><a href=/practice/lightning/>Лайтнинг на практике</a></label><ul><li><a href=/phoenix/>Кошелек Phoenix</a></li><li><a href=/lnbits/>LNbits – швейцарский нож среди лайтнинг-приложений</a></li><li><a href=/alby-i-nostr/>Alby и Nostr</a></li><li><a href=/zapplanner/>Подписки с помощью Лайтнинг</a></li><li><a href=/zapgram/>Телеграм-бот ZapGram</a></li><li><a href=/ochishchaem-bitcoin-cherez-lajtning/>Очищаем биткоины через сеть Лайтнинг</a></li><li><a href=/likvidnost-v-lajtning/>Руководство по управлению ликвидностью в сети Lightning</a></li><li><a href=/mutiny/>Кошелек Mutiny</a></li></ul></li></ul></li><li><input type=checkbox id=section-8d344ddc25268a9861446f8e4c24f2ef class=toggle>
<label for=section-8d344ddc25268a9861446f8e4c24f2ef class="flex justify-between"><a href=/rabbithole/>Кроличья нора</a></label><ul><li><a href=/books/>Книги</a><ul></ul></li><li><a href=/videos/>Видео</a><ul></ul></li><li><a href=/audiobooks/>Аудиокниги</a><ul></ul></li><li><a href=/pods/>Подкасты</a><ul></ul></li></ul></li></ul><div class=menuSep></div><ul><li><a href=/posts/>Блог</a></li><li><a href=/glossary/>Глоссарий</a></li><li><a href=/calendar/>Биткоин-календарь</a></li><li><input type=checkbox id=section-380047aa906f67ecf269300a9eda240b class=toggle>
<label for=section-380047aa906f67ecf269300a9eda240b class="flex justify-between"><a href=/contribute/>Принять участие</a></label><ul><li><a href=/syntax/>Оформление статей</a></li><li><a href=/github/>Как добавить статью?</a></li><li><a href=/obsidian/>Публикация статей через Obsidian</a></li></ul></li><li><a href=/feedback/>Обратная связь</a></li></ul><div class=menuBlock><div id=metrics-container class=metrics-container><div id=metrics-label></div><div id=metrics-value></div></div></div></nav><footer><br><a class=menuSocialButton href=https://t.me/bitcoin21ideas target=_blank title=Telegram><svg viewBox="0 0 25 25"><path d="m12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12c0-6.627-5.373-12-12-12zm5.894 8.221-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002.0-.003.0-.005.0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121L8.32 13.617l-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=https://github.com/21ideas-org/21ideas.org target=_blank title=GitHub><svg viewBox="0 0 820 820"><path d="M4e2 9.9C179.11 9.9.0 189 0 409.94.0 585.6 113.24 734.86 270.71 788.61l2.83.83c20 3.76 27.34-8.59 27.34-19.24.0-9.49-.32-34.68-.5-68-111.27 24.14-134.75-53.68-134.75-53.68a106.58 106.58.0 00-44.09-58.26l-.43-.24c-36.23-24.81 2.8-24.3 2.8-24.3A84.06 84.06.0 01185 606.54l.22.4a85.24 85.24.0 00116.92 33l-.43.21A85.16 85.16.0 01327 586.7C238.19 576.67 144.8 542.25 144.8 389c0-.72.0-1.55.0-2.38a153.82 153.82.0 0141.27-105l-.08.11a139.82 139.82.0 01-8.56-48.58 141.91 141.91.0 0112.4-58.21l-.37.91s33.51-10.72 110 41c30-8.56 64.43-13.5 1e2-13.5a378.09 378.09.0 01102.68 14.14l-2.67-.64c76-51.72 109.51-41 109.51-41a144 144 0 0112 58.07 145.56 145.56.0 01-8.35 48.82l.32-1a154.37 154.37.0 0141 105c0 .83.0 1.63.0 2.43V389c0 153.68-93.5 187.51-182.52 197.35a95.48 95.48.0 0127.27 66.93c0 2.48-.11 5-.3 7.42v-.32c0 53.54-.51 96.54-.51 109.53.0 10.51 7 23 27.51 19C686.25 734.78 8e2 585.39 8e2 409.41 8e2 188.74 621.11 9.87 400.47 9.87H4e2z"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=https://njump.me/npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l target=_blank title=Nostr><svg viewBox="0 0 820 820"><path d="M4e2 797.5c219.53.0 397.5-178 397.5-397.5S619.53 2.5 4e2 2.5 2.5 180.47 2.5 4e2 180.47 797.5 4e2 797.5zM598.23 242.15c6.82 8.46 10.35 18.14 11.45 28.86 1.7 16.37-2.68 31.17-11.2 45-14.19 23.62-43.17 39.63-45.85 41-5.42 2.86-7.42 7.12-7.06 13.34s-1.21 37.19-20 50.83c-9.68 7-48.64 16-66.6 19.05a28.61 28.61.0 00-13.18 5.37c-1 .67-2 1.36-3.2 2.06-6.82 4.27-31.23 38-35.31 45.48l10.66-3.27c21.2-6.53 66.85-20.6 69.52-21 9-1.4 15.89 1.22 20.34 7.79 3.63 5.41 7.18 10.81 10.75 16.25.61.94 1.23 1.87 1.85 2.81 1 1.54 2 3.08 2.93 4.62.48.78 1 1.55 1.45 2.32l1.52 2.38c.09.14.19.29.28.45a10.65 10.65.0 011.37 2.83c.24 1 .91 4.14-.92 6.09-1.7 1.77-4.63 1.77-6.21 1.34a15.65 15.65.0 01-5.6-2.8l-2.49-2.13c-2-1.71-5.73-2.56-8.71-2.44-3.41.13-8-1-10.11-2.37-4.2-2.74-5.35-9.56-5.35-9.68a3.51 3.51.0 00-3.72-2.86 18.58 18.58.0 00-6.28 1.15l-.78.25q-15 4.56-29.93 9.24h0l-14.31 4.45c-7.06 2.19-14.12 4.38-21.13 6.69a37.45 37.45.0 00-5.72 2.62c-.43.21-.84.43-1.25.64l-1.24.64h0c-.85.42-1.7.85-2.55 1.34l-.27.15a30.59 30.59.0 01-5.76 2.65c-7.12 2.13-13.39-1-16.32-8.1-1.88-4.63-.18-13.76.86-16.44 5.58-14.35 21.77-39.58 26.28-46.6.75-1.17 1.17-1.83 1.17-1.86-.36-.12-23.25 9.07-27 11.93-10.35 7.86-34.64 26.49-35 28.31A22.75 22.75.0 01331 508.13c-5.66 2.19-9.13 6.7-12.48 11.08.0.0-60.88 83.83-65 88.34l-.68.74c-2.83 3-12.28 13.16-15 18.13-.46.83-1.61 3.27-2.58 5.33-.6 1.26-1.13 2.38-1.38 2.89.0.05-.05.11-.08.17-.59 1.21-1.91 3.9-6.31 3.66s-4.79-6.12-5-9.09v-.4c-.54-6.88 1-13.7 4.63-20.82a6.46 6.46.0 01.31-.58c1-1.8 3.93-7 2.61-11.36s-2.61-11.14-.6-14.61c2.84-4.77 7.62-5.48 13.92-6.41l2.64-.41c5.29-.85 9.13-3.53 12.84-8.88 4.66-6.84 17-24.51 27.65-39.67C293.62 516 3e2 507 302.66 503.09a25.55 25.55.0 003.77-9.08c1.89-9.74 7.85-16.49 18.14-20.7 2.25-.85 43.17-35.06 43.17-39.45.0-3.1-4.45-4.87-7.92-5.78-.48-.12-26.24-6.82-37.92-12.12A88.58 88.58.0 01305 406.41c-7.53-5.54-22.23-3.16-25.3-2.67l-.27.05c-11 1.58-19.12 6.51-28.37 12.78-1.65 1.16-10.05 4.2-14.31 1.77-1.32-.75-2.9-1.6-4.65-2.54-9.16-4.92-22.91-12.31-28.59-20.9-3.11-4.69-2.68-12.42-.49-20.94 7.07-19.73 17.48-28.56 36.77-33.91 11.39-3.95 32.41-5.33 46.84-6.28 2.93-.19 5.59-.37 7.84-.54.12-.05.8-.09 1.94-.18 7-.51 31.32-2.27 49.13-11.39 1.61-.82 3.59-1.92 5.91-3.2 17.67-9.8 55.68-30.86 107.76-29.25 12.95.4 32.15 7.45 49.77 13.93 14.79 5.43 28.46 10.45 36.38 10.79 17.65.73 26.54-1.22 36.77-11.81 2.92-3.05 15.16-29.53 3.59-44a108.64 108.64.0 00-13.94-14.55q-2.28-1.94-4.59-3.85a183.79 183.79.0 01-15.8-14.29c-13.82-14.61-18.09-34.58-11.51-50.17 4.14-10.9 13-15.65 25.63-13.15 6.22 1.24 11.28 5.49 15.95 9.41a73.24 73.24.0 005.84 4.59c3.6 2.38 9.56 3.78 13.46 4.69 4.93 1.16 8.65 4.93 8.4 7.49s-6.7 4.75-13 4.26c-7.36-.49-20.09-.55-27.7 2-5.05 1.83-7.3 7.49-5.84 13 1.22 4.57 10.9 12.66 14.55 15.65 1.64 1.35 3.3 2.67 5 4C587.86 231.81 593.56 236.34 598.23 242.15z" fill-rule="evenodd"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=/rss title=RSS><svg viewBox="-143 145 525 525"><path d="M113 145c-141.4.0-256 114.6-256 256s114.6 256 256 256 256-114.6 256-256S254.4 145 113 145zM43.1 518.7c-6.2 6.2-14.7 9.9-24.1 9.9-9.4.0-17.8-3.8-24-9.9-6.2-6.2-10-14.6-10-23.9.0-9.4 3.8-17.8 10-24s14.6-10 24-10 17.9 3.8 24 10c6.2 6.2 10 14.6 10 24C53 504.2 49.2 512.6 43.1 518.7zM104.8 529c-.1-32.1-12.5-62.3-35.1-84.9-22.6-22.6-52.8-35.2-84.7-35.2V360c46.6.0 88.7 19 119.3 49.6s49.5 72.8 49.6 119.4H104.8zm87.2.0c-.1-114.2-92.8-207.1-206.9-207.1V273c70.6.0 134.5 28.7 180.8 75.1 46.3 46.4 75 110.3 75.1 180.9H192z"/></svg>
</a>&nbsp;
<a class=menuSocialButton href=https://www.youtube.com/@21ideas target=_blank title=YouTube><svg viewBox="0 0 25 25"><path d="M12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12S18.627.0 12 0zm4.441 16.892c-2.102.144-6.784.144-8.883.0C5.282 16.736 5.017 15.622 5 12c.017-3.629.285-4.736 2.558-4.892 2.099-.144 6.782-.144 8.883.0C18.718 7.264 18.982 8.378 19 12c-.018 3.629-.285 4.736-2.559 4.892zM10 9.658l4.917 2.338L10 14.342V9.658z"/></svg></a></footer><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class="book-page book-page-page"><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Дебаты вокруг OP_RETURN</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#1-что-такое-op_return>1. Что такое OP_RETURN?</a></li><li><a href=#2-изменение-политики-vs-изменение-консенсуса>2. Изменение политики vs. Изменение консенсуса</a></li><li><a href=#3-текущие-правила-op_return-в-bitcoin-core-и-предлагаемые-изменения>3. Текущие правила OP_RETURN в Bitcoin Core и предлагаемые изменения</a></li></ul></li><li><a href=#суть-дебатов-основные-опасения-и-вопросы>Суть дебатов: Основные опасения и вопросы</a><ul><li><a href=#пользователям-должны-быть-предоставлены-чёткие-опции-настройки-их-мемпула-зачем-убирать-возможность-контроля-например-опции><strong>Пользователям должны быть предоставлены чёткие опции настройки их мемпула. Зачем убирать возможность контроля (например, опции <code>-datacarrier</code> и <code>-datacarriersize</code>)?</strong></a></li><li><a href=#не-будут-ли-спамеры-злоупотреблять-большими-op_return-для-раздувания-блокчейна-и-замедления-изначальной-загрузки-блоков-initial-block-downloadibd>Не будут ли спамеры злоупотреблять большими OP_RETURN для раздувания блокчейна и замедления изначальной загрузки блоков (Initial Block Download/IBD)?</a></li><li><a href=#это-не-первый-раз-когда-предлагается-смягчить-лимиты-op_return-похожий-pr-обсуждался-пару-лет-назад-что-изменилось-сейчас>Это не первый раз, когда предлагается смягчить лимиты OP_RETURN. Похожий PR обсуждался пару лет назад. Что изменилось сейчас?</a></li><li><a href=#не-должны-ли-мы-бороться-со-спамом-ужесточая-политики-а-не-ослабляя-их>Не должны ли мы бороться со спамом, ужесточая политики, а не ослабляя их?</a></li><li><a href=#как-сейчас-обходят-политику-стандартности-для-лимитов-размера-op_return>Как сейчас обходят политику стандартности для лимитов размера OP_RETURN?</a></li><li><a href=#может-ли-это-обновление-негативно-повлиять-на-децентрализацию-биткоина>Может ли это обновление негативно повлиять на децентрализацию Биткоина?</a></li><li><a href=#что-делает-utxo-не-подлежащим-прунингу-и-какие-проекты-создают-такие-utxo-раздувающие-их-набор>Что делает UTXO &ldquo;не подлежащим прунингу&rdquo;, и какие проекты создают такие UTXO, раздувающие их набор?</a></li><li><a href=#какова-была-основная-причина-этого-pr-что-будет-если-ничего-не-делать>Какова была основная причина этого PR? Что будет, если ничего не делать?</a></li><li><a href=#если-op_return-всё-ещё-не-может-остановить-весь-мусор-почему-так-важно-смягчить-его-лимиты>Если OP_RETURN всё ещё не может остановить весь мусор, почему так важно смягчить его лимиты?</a></li><li><a href=#зачем-спамеру-использовать-op_return-если-дешевле-использовать-свидетельские-данные-segwit>Зачем спамеру использовать OP_RETURN, если дешевле использовать свидетельские данные (Segwit)?</a></li><li><a href=#если-смягчение-лимита-стандартности-op_return-направлено-на-то-чтобы-позволить-прунинг-спама-каково-мнение-сторонников-этого-изменения-касательно-долгосрочной-жизнеспособности-запуска-не-урезанного-биткоин-узла->Если смягчение лимита стандартности OP_RETURN направлено на то, чтобы позволить прунинг спама, каково мнение сторонников этого изменения касательно долгосрочной жизнеспособности запуска не урезанного Биткоин-узла ?</a></li><li><a href=#это-изменение-политики-а-не-консенсуса-значит-оно-не-вызовет-хардфорк-верно>Это изменение политики, а не консенсуса. Значит, оно не вызовет хардфорк, верно?</a></li><li><a href=#почему-этому-изменению-не-присвоен-номер-bip>Почему этому изменению не присвоен номер BIP?</a></li></ul></li><li><a href=#выводы-диванного-максималиста>Выводы диванного максималиста</a></li><li><a href=#рекомендуемые-дополнительные-материалы>Рекомендуемые дополнительные материалы</a></li></ul></li></ul></nav></aside></header><div class=pageCover><picture><img src=/img/blog/op_return-wars/never-gonna-give-you-up.webp alt=Cover></picture></div><h1>Дебаты вокруг OP_RETURN – политика, прагматизм и будущее Биткоина</h1><div class=pageDate>13 мая 2025 г.</div><article class=markdown><p>Биткоин-сообщество сейчас активно обсуждает предложение изменить политику Bitcoin Core в отношении транзакций с <code>OP_RETURN</code>. Это не просто технический спор; он затрагивает фундаментальные философские вопросы о предназначении Биткоина, о том, как должна функционировать его сеть, и вечные дебаты о спаме в противовес легитимному встраиванию данных.</p><blockquote class="book-hint btc"><p>Блогпост подготовлен <a href=https://snort.social/p/npub10awzknjg5r5lajnr53438ndcyjylgqsrnrtq5grs495v42qc6awsj45ys7>Тони⚡️</a>.</p><p><a href=/contribute>Поддержать проект</a>.</p></blockquote><p>Этот пост посвящён ключевым аспектам этого предложения и сопутствующей дискуссии.</p><blockquote class="book-hint info">Прежде чем начать, необходимо разобраться с основными понятиями, релевантными в данном контексте.</blockquote><h3 id=1-что-такое-op_return>1. Что такое OP_RETURN?
<a class=anchor href=#1-%d1%87%d1%82%d0%be-%d1%82%d0%b0%d0%ba%d0%be%d0%b5-op_return>#</a></h3><p>По своей сути, <code>OP_RETURN</code> — это скриптовый <a href=https://21ideas.org/glossary/#op_code-%d0%be%d0%bf%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d0%be%d0%bd%d0%bd%d1%8b%d0%b9-%d0%ba%d0%be%d0%b4>операционный код</a> Биткоина, который позволяет пользователям встраивать небольшой объём произвольных данных в транзакцию. Пометка <code>OP_RETURN</code> в выходе транзакции указывает на то, что его доказуемо невозможно потратить (unspendable). Это критически важно, поскольку означает, что данные, связанные с этим выходом, не раздувают набор неизрасходованных выходов транзакций (<a href=https://21ideas.org/glossary/#utxo-unspent-transaction-output>UTXO</a> set) — важнейшую базу данных, которую все полные узлы Биткоина должны поддерживать для отслеживания биткоинов, которые могут быть потрачены.</p><p><code>OP_RETURN</code> был введён как способ явного разрешения хранения данных в блокчейне таким образом, чтобы это было менее вредно для сети, чем другие методы, которые могут пытаться маскировать данные под выходы, которые можно потратить в будущем. Данные в выходе <code>OP_RETURN</code> хранятся в блокчейне как часть транзакции, проверяются один раз, когда узел впервые видит транзакцию, но не требуют постоянного обслуживания в наборе UTXO.</p><p>Изначально <code>OP_RETURN</code> с его (текущим по умолчанию) лимитом в 80 байт задумывался и использовался для различных целей, таких как:</p><ul><li><strong>Доказательство существования/Временны́е метки (Timestamping):</strong> Встраивание хеша документа или набора данных для подтверждения его существования в определенный момент времени. Например, университет мог бы хешировать список выданных дипломов.</li><li><strong>Метаданные активов (Colored Coins):</strong> Ранние протоколы для создания токенов на Биткоине (часто называемые &ldquo;цветными монетами»&rdquo;) использовали <code>OP_RETURN</code> для встраивания метаданных, связывающих конкретный выход биткоин-транзакции с <a href=https://21ideas.org/glossary/#%d0%be%d1%84%d1%84%d1%87%d0%b5%d0%b9%d0%bd>оффчейн</a>-активом. Например, связывание UTXO с &ldquo;10 акциями публично торгуемой компании&rdquo;.</li><li><strong>Нотариальные услуги:</strong> Короткие сообщения или удостоверения, вроде цифровой нотариальной печати.</li><li><strong>Идентификаторы протоколов/Обязательства (Commitments):</strong> Сигнализирование об использовании протокола более высокого уровня или фиксация обязательств по отношению к оффчейн-данным. Например, хеш, который фиксирует больший объем данных, хранящихся где-то еще, или идентификатор для конкретного прикладного протокола. Counterparty был одним из первых проектов, использовавших <code>OP_RETURN</code> таким образом. Совсем недавно проекты, такие как <a href=https://citrea.xyz>Citrea</a>, изучали его использование для доказательств, связанных с их решением <a href=https://21ideas.org/glossary/#%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b2%d1%82%d0%be%d1%80%d0%be%d0%b3%d0%be-%d1%83%d1%80%d0%be%d0%b2%d0%bd%d1%8f>второго уровня</a>.</li><li><strong>Простые сообщения:</strong> Хотя это и не было его основным предназначением, короткие произвольные сообщения также встраивались.</li></ul><blockquote class="book-hint info">Сатоши лично участвовал в дискусии на bitcointalk и <a href=https://t.me/bitcoin_calendar/197>высказывался</a> о том, почему Биткоин нативно не поддерживает передачу текстовых сообщений.</blockquote><p>Таким образом, сутью <code>OP_RETURN</code> была возможность добавлять небольшие, лаконичные данные, которые выигрывали от неизменяемости и глобальной доступности Биткоина, не требуя при этом возможности быть потраченными.</p><h3 id=2-изменение-политики-vs-изменение-консенсуса>2. Изменение политики vs. Изменение консенсуса
<a class=anchor href=#2-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d0%b8%d1%82%d0%b8%d0%ba%d0%b8-vs-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d0%ba%d0%be%d0%bd%d1%81%d0%b5%d0%bd%d1%81%d1%83%d1%81%d0%b0>#</a></h3><p><strong>Это различие является критическим моментом в текущих дебатах.</strong></p><ul><li><strong>Правила консенсуса:</strong> Это фундаментальные правила, по которым все узлы Биткоина должны приходить к согласию для проверки блоков и транзакций. Если узлы расходятся во мнениях относительно правил консенсуса, это может привести к <a href=https://21ideas.org/glossary/#%d1%84%d0%be%d1%80%d0%ba-fork>форку</a> сети (разделению блокчейна). Изменение правил консенсуса — очень серьезное мероприятие, требующее широкого согласия. Транзакции, нарушающие правила консенсуса, недействительны и отклоняются всей сетью.</li><li><strong>Правила политики – стандартность (standardness):</strong> Это дополнительные, более строгие правила, которые отдельные <a href=https://21ideas.org/glossary/#%d0%bd%d0%be%d0%b4%d0%b0-%d1%82%d0%b0%d0%ba%d0%b6%d0%b5-%d0%b1%d0%b8%d1%82%d0%ba%d0%be%d0%b8%d0%bd-%d1%83%d0%b7%d0%b5%d0%bb-%d0%b8%d0%bb%d0%b8-%d0%bf%d1%80%d0%be%d1%81%d1%82%d0%be-%d1%83%d0%b7%d0%b5%d0%bb>узлы</a> Bitcoin Core (и многие другие узлы) применяют к транзакциям, которые они готовы ретранслировать по сети или включать в добываемые ими блоки. Их часто называют &ldquo;правилами стандартности&rdquo;. Транзакция может быть <em>валидной по консенсусу</em> (т.е. она соответствует всем фундаментальным правилам Биткоина), но <em>нестандартной</em> (т.е. она нарушает локальную политику узла). Распространение нестандартных транзакций по сети через обычную P2P-ретрансляцию может быть более затруднительным, но всё же эти транзакции могут быть включены (и включаются) в блоки, если майнер решит их принять (часто через прямую отправку или использование альтернативных реализаций Биткоин-узлов).</li></ul><div class=imageWrapper><img src=/img/blog/op_return-wars/4mb-inscription.png><p><em>Источник: <a href=https://mempool.space/ru/tx/ef03981e8926758aae3a08a5c1f5499962bbc427503185ad4a2255b7c9a41dcb>mempool.space/ru</a></em></p></div><p>Текущее предложение по <code>OP_RETURN</code> касается изменения <strong>правил политики</strong>, а не правил консенсуса. Это означает, что даже если политика изменится, базовая валидность по консенсусу транзакций с более крупными или несколькими <code>OP_RETURN</code> останется неизменной — они уже разрешены консенсусом. Дебаты ведутся о том, что узлы Bitcoin Core должны считать <em>стандартным</em> для ретрансляции и майнинга.</p><h3 id=3-текущие-правила-op_return-в-bitcoin-core-и-предлагаемые-изменения>3. Текущие правила OP_RETURN в Bitcoin Core и предлагаемые изменения
<a class=anchor href=#3-%d1%82%d0%b5%d0%ba%d1%83%d1%89%d0%b8%d0%b5-%d0%bf%d1%80%d0%b0%d0%b2%d0%b8%d0%bb%d0%b0-op_return-%d0%b2-bitcoin-core-%d0%b8-%d0%bf%d1%80%d0%b5%d0%b4%d0%bb%d0%b0%d0%b3%d0%b0%d0%b5%d0%bc%d1%8b%d0%b5-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d1%8f>#</a></h3><p><strong>Что означает &ldquo;стандартность&rdquo; применительно к OP_RETURN?</strong> &ldquo;Стандартность&rdquo; для транзакций с <code>OP_RETURN</code> относится к набору правил политики, которые узлы Bitcoin Core используют по умолчанию, чтобы решить, будут ли они ретранслировать или майнить транзакции, содержащие выходы <code>OP_RETURN</code>. Если транзакция с выходом <code>OP_RETURN</code> соответствует этим критериям стандартности, она обычно принимается в мемпул узла и ретранслируется пирам.</p><p><strong>Текущие лимиты OP_RETURN (Правила стандартности):</strong> Исторически политика Bitcoin Core по отношению к <code>OP_RETURN</code> была довольно строгой:</p><ul><li>Разрешался только <strong>один</strong> выход <code>OP_RETURN</code> на транзакцию.</li><li>Было установлено ограничение полезной нагрузки данных в этом единственном выходе <code>OP_RETURN</code>, равное <strong>80 байтам</strong>.</li></ul><p><a href="https://gnusha.org/pi/bitcoindev/rhfyCHr4RfaEalbfGejVdolYCVWIyf84PT2062DQbs5-eU8BPYty5sGyvI3hKeRZQtVC7rn_ugjUWFnWCymz9e9Chbn7FjWJePllFhZRKYk=@protonmail.com">Предложение</a> направлено на смягчение этих правил стандартности:</p><ul><li>Снятние ограничения размера данных для выходов <code>OP_RETURN</code> &ldquo;в качестве первого минимального шага для прекращения поощрения вредного поведения&rdquo;</li><li>Потенциальное разрешение нескольких выходов <code>OP_RETURN</code> в одной транзакции указано как последующее возможное послабление в случае такой необходимости.</li></ul><div class=imageWrapper><img src=/img/blog/op_return-wars/opreturn-proposal.png><p><em>Ознакомиться с предложением и дискуссией вокруг него можно в <a href="https://groups.google.com/g/bitcoindev/c/d6ZO7gXGYbQ?pli=1">списке рассылки биткоин-разработчиков</a>.</em></p></div><p>Ключевым моментом является то, что транзакции, превышающие текущие стандартные лимиты, уже <em>валидны</em> по правилам консенсуса. Майнеры могут включать их в блоки, и иногда так и делают.</p><blockquote class="book-hint info">Разобравшись с основными техническими деталями, мы можем переходить к разбору самого (мягко говоря) спора.</blockquote><h2 id=суть-дебатов-основные-опасения-и-вопросы>Суть дебатов: Основные опасения и вопросы
<a class=anchor href=#%d1%81%d1%83%d1%82%d1%8c-%d0%b4%d0%b5%d0%b1%d0%b0%d1%82%d0%be%d0%b2-%d0%be%d1%81%d0%bd%d0%be%d0%b2%d0%bd%d1%8b%d0%b5-%d0%be%d0%bf%d0%b0%d1%81%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b8-%d0%b2%d0%be%d0%bf%d1%80%d0%be%d1%81%d1%8b>#</a></h2><blockquote class="book-hint info">Это довольно сложная тема, требующая понимания базовых технических особенностей функционирования протокола Биткоин. Поэтому под развёрнутыми ответам на вопросы я прикладываю упрощённые краткие ответы. Если подробности вас утомляют, вы можете сразу перепрыгивать к выделенному <strong>жирным</strong> шрифтом блоку &ldquo;<strong>Краткий, нетехнический ответ</strong>&rdquo;.</blockquote><p>Это предложение вызвало бурные дискуссии. Вот некоторые ключевые опасения, а также мысли сторонников снятия ограничений <code>OP_RETURN</code>:</p><h3 id=пользователям-должны-быть-предоставлены-чёткие-опции-настройки-их-мемпула-зачем-убирать-возможность-контроля-например-опции><strong>Пользователям должны быть предоставлены чёткие опции настройки их мемпула. Зачем убирать возможность контроля (например, опции <code>-datacarrier</code> и <code>-datacarriersize</code>)?</strong>
<a class=anchor href=#%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f%d0%bc-%d0%b4%d0%be%d0%bb%d0%b6%d0%bd%d1%8b-%d0%b1%d1%8b%d1%82%d1%8c-%d0%bf%d1%80%d0%b5%d0%b4%d0%be%d1%81%d1%82%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d1%8b-%d1%87%d1%91%d1%82%d0%ba%d0%b8%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8-%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b8-%d0%b8%d1%85-%d0%bc%d0%b5%d0%bc%d0%bf%d1%83%d0%bb%d0%b0-%d0%b7%d0%b0%d1%87%d0%b5%d0%bc-%d1%83%d0%b1%d0%b8%d1%80%d0%b0%d1%82%d1%8c-%d0%b2%d0%be%d0%b7%d0%bc%d0%be%d0%b6%d0%bd%d0%be%d1%81%d1%82%d1%8c-%d0%ba%d0%be%d0%bd%d1%82%d1%80%d0%be%d0%bb%d1%8f-%d0%bd%d0%b0%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%be%d0%bf%d1%86%d0%b8%d0%b8>#</a></h3><p>Хотя Bitcoin Core ценит возможность пользователей калибровать настройку своих узлов, эффективность установки отдельными узлами совершенно разных лимитов <code>OP_RETURN</code> сомннительна. Если значительная часть сети (особенно майнеры) принимает более крупные <code>OP_RETURN</code> (которые валидны по консенсусу и оплачивают комиссии), узел с более строгими локальными лимитами сталкивается с неудобствами: он может отклонить транзакцию из своего мемпула (предварительно загрузив её для проверки) лишь для того, чтобы быть вынужденным загрузить её снова, когда она будет включена в блок. Это приводит к излишнему расходу трафика и оттягивает момент достижения вершины цепочки (последнего намайненного блока), не предотвращая при этом запись данных в блокчейн. Существует аргументированное мнение, что эта конкретная опция конфигурации на сегодняшний день в значительной степени неэффективна для своей предполагаемой цели, и её удаление упрощает политику.</p><p><strong>Краткий, нетехнический ответ:</strong> Локальные лимиты OP_RETURN неэффективны и вредят оператору узла, если майнеры всё равно принимают данные; удаление опции упрощает политику.</p><h3 id=не-будут-ли-спамеры-злоупотреблять-большими-op_return-для-раздувания-блокчейна-и-замедления-изначальной-загрузки-блоков-initial-block-downloadibd>Не будут ли спамеры злоупотреблять большими OP_RETURN для раздувания блокчейна и замедления изначальной загрузки блоков (Initial Block Download/IBD)?
<a class=anchor href=#%d0%bd%d0%b5-%d0%b1%d1%83%d0%b4%d1%83%d1%82-%d0%bb%d0%b8-%d1%81%d0%bf%d0%b0%d0%bc%d0%b5%d1%80%d1%8b-%d0%b7%d0%bb%d0%be%d1%83%d0%bf%d0%be%d1%82%d1%80%d0%b5%d0%b1%d0%bb%d1%8f%d1%82%d1%8c-%d0%b1%d0%be%d0%bb%d1%8c%d1%88%d0%b8%d0%bc%d0%b8-op_return-%d0%b4%d0%bb%d1%8f-%d1%80%d0%b0%d0%b7%d0%b4%d1%83%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-%d0%b1%d0%bb%d0%be%d0%ba%d1%87%d0%b5%d0%b9%d0%bd%d0%b0-%d0%b8-%d0%b7%d0%b0%d0%bc%d0%b5%d0%b4%d0%bb%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b8%d0%b7%d0%bd%d0%b0%d1%87%d0%b0%d0%bb%d1%8c%d0%bd%d0%be%d0%b9-%d0%b7%d0%b0%d0%b3%d1%80%d1%83%d0%b7%d0%ba%d0%b8-%d0%b1%d0%bb%d0%be%d0%ba%d0%be%d0%b2-initial-block-downloadibd>#</a></h3><p>Данные <code>OP_RETURN</code> являются частью скрипта выхода транзакции, на который <em>не</em> распространяется скидка для свидетельских данных (witness discount) SegWit. Это делает хранение данных в <code>OP_RETURN</code> дороже за байт для больших объёмов по сравнению со свидетельскими данными (как в Inscriptions). Если больший вес блока используется данными <code>OP_RETURN</code>, это означает меньше места для других данных. Проверка выходов <code>OP_RETURN</code> также является вычислительно недорогой, а сами выходы не попадают в набор UTXO, поэтому не ожидается, что они значительно замедлят IBD или создадут нагрузку на критически важную базу данных UTXO. Добавление большего количества данных в скрипты выходов (таких как <code>OP_RETURN</code>) может даже привести к уменьшению размера блоков в байтах, если это вытеснит свидетельские данные, из-за особенностей расчёта веса блока.</p><p><strong>Краткий, нетехнический ответ:</strong> Маловероятно, что это значительно замедлит IBD или усугубит общее раздувание по сравнению с другими методами; OP_RETURN дороже для больших данных, чем Inscriptions, и не раздувает критически важный набор UTXO.</p><h3 id=это-не-первый-раз-когда-предлагается-смягчить-лимиты-op_return-похожий-pr-обсуждался-пару-лет-назад-что-изменилось-сейчас>Это не первый раз, когда предлагается смягчить лимиты OP_RETURN. Похожий PR обсуждался пару лет назад. Что изменилось сейчас?
<a class=anchor href=#%d1%8d%d1%82%d0%be-%d0%bd%d0%b5-%d0%bf%d0%b5%d1%80%d0%b2%d1%8b%d0%b9-%d1%80%d0%b0%d0%b7-%d0%ba%d0%be%d0%b3%d0%b4%d0%b0-%d0%bf%d1%80%d0%b5%d0%b4%d0%bb%d0%b0%d0%b3%d0%b0%d0%b5%d1%82%d1%81%d1%8f-%d1%81%d0%bc%d1%8f%d0%b3%d1%87%d0%b8%d1%82%d1%8c-%d0%bb%d0%b8%d0%bc%d0%b8%d1%82%d1%8b-op_return-%d0%bf%d0%be%d1%85%d0%be%d0%b6%d0%b8%d0%b9-pr-%d0%be%d0%b1%d1%81%d1%83%d0%b6%d0%b4%d0%b0%d0%bb%d1%81%d1%8f-%d0%bf%d0%b0%d1%80%d1%83-%d0%bb%d0%b5%d1%82-%d0%bd%d0%b0%d0%b7%d0%b0%d0%b4-%d1%87%d1%82%d0%be-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b8%d0%bb%d0%be%d1%81%d1%8c-%d1%81%d0%b5%d0%b9%d1%87%d0%b0%d1%81>#</a></h3><p>Ландшафт Биткоина изменился. Ключевым фактором является то, что такие проекты как Citrea заявили, что будут использовать не подлежащие прунингу (обрезке) выходы платежей (которые раздувают набор UTXO) для своих нужд в данных, если лимиты размера <code>OP_RETURN</code> останутся для них слишком строгими. Этот потенциал роста раздувания UTXO из-за новых проектов, наряду с существующими тенденциями встраивания данных (такими как Ordinals и Runes), сделал аргумент в пользу &ldquo;более чистого&rdquo;, стандартизированного метода встраивания данных, такого как <code>OP_RETURN</code>, более весомым. Текущее предложение рассматривается некоторыми как мера по снижению вреда в свете этих событий.</p><p><strong>Краткий, нетехнический ответ:</strong> Основное изменение заключается в том, что новые проекты (например, Citrea), решившие хранить данные в блокчейне, могут использовать методы, раздувающие набор UTXO, если лимиты OP_RETURN не будут смягчены, что сделало аргумент &ldquo;снижения вреда&rdquo; через снятие ограничений OP_RETURN более актуальным.</p><h3 id=не-должны-ли-мы-бороться-со-спамом-ужесточая-политики-а-не-ослабляя-их>Не должны ли мы бороться со спамом, ужесточая политики, а не ослабляя их?
<a class=anchor href=#%d0%bd%d0%b5-%d0%b4%d0%be%d0%bb%d0%b6%d0%bd%d1%8b-%d0%bb%d0%b8-%d0%bc%d1%8b-%d0%b1%d0%be%d1%80%d0%be%d1%82%d1%8c%d1%81%d1%8f-%d1%81%d0%be-%d1%81%d0%bf%d0%b0%d0%bc%d0%be%d0%bc-%d1%83%d0%b6%d0%b5%d1%81%d1%82%d0%be%d1%87%d0%b0%d1%8f-%d0%bf%d0%be%d0%bb%d0%b8%d1%82%d0%b8%d0%ba%d0%b8-%d0%b0-%d0%bd%d0%b5-%d0%be%d1%81%d0%bb%d0%b0%d0%b1%d0%bb%d1%8f%d1%8f-%d0%b8%d1%85>#</a></h3><p>Многие разработчики признают, что встраивание данных является следствием безразрешительной природы Биткоина. Борьба со спамом на уровне политики мемпула часто неэффективна, если транзакции валидны по консенсусу и оплачивают достаточные комиссии, поскольку майнеры заинтересованы в их включении. Эффективное ограничение спама, вероятно, потребует ограничительных изменений консенсуса (софтфорк), которые сложны и спорны – к тому моменту, как софтфорк будет проработан, утверждён и запущен, фанаты добавления произвольных данных в блокчейн Биткоина с высокой вероятностью найдут новые методы засорения блокчейна. Аргумент заключается в том, что лучше направлять данные в <em>наименее вредный</em> известный механизм (<code>OP_RETURN</code>), чем допускать их появление в более проблемных формах.</p><p><strong>Краткий, нетехнический ответ:</strong> Политика мемпула не очень эффективна против спама, который майнеры всё равно включат в блоки; это изменение направлено на снижение вреда путем направления данных в менее разрушительный формат (OP_RETURN).</p><h3 id=как-сейчас-обходят-политику-стандартности-для-лимитов-размера-op_return>Как сейчас обходят политику стандартности для лимитов размера OP_RETURN?
<a class=anchor href=#%d0%ba%d0%b0%d0%ba-%d1%81%d0%b5%d0%b9%d1%87%d0%b0%d1%81-%d0%be%d0%b1%d1%85%d0%be%d0%b4%d1%8f%d1%82-%d0%bf%d0%be%d0%bb%d0%b8%d1%82%d0%b8%d0%ba%d1%83-%d1%81%d1%82%d0%b0%d0%bd%d0%b4%d0%b0%d1%80%d1%82%d0%bd%d0%be%d1%81%d1%82%d0%b8-%d0%b4%d0%bb%d1%8f-%d0%bb%d0%b8%d0%bc%d0%b8%d1%82%d0%be%d0%b2-%d1%80%d0%b0%d0%b7%d0%bc%d0%b5%d1%80%d0%b0-op_return>#</a></h3><p>Если транзакция валидна по консенсусу, но нестандартна (например, <code>OP_RETURN</code>больше 80 байт), она может не ретранслироваться узлами, работающими с установленной по умолчанию политикой Bitcoin Core. Однако пользователи могут:</p><ol><li>Отправить её напрямую майнинг-пулам, которые используют собственные политики мемпула и готовы включать такие транзакции &ldquo;мимо кассы&rdquo; (out-of-band).</li><li>Использовать альтернативные реализации Биткоин-узлов, такие как Libre Relay, которые могут иметь менее строгие политики мемпула и ретранслировать транзакции, считающиеся нестандартными в Bitcoin Core. Поскольку транзакции с несколькими или более крупными выходами <code>OP_RETURN</code> разрешены правилами консенсуса, блоки, включающие эти нестандартные транзакции, принимаются всеми узлами.</li></ol><p><strong>Краткий, нетехнический ответ:</strong> Пользователи могут обходить ограничительные политики, отправляя транзакции напрямую майнерам или используя узлы/сервисы с более разрешительными правилами ретрансляции; эти валидные транзакции всё равно будут приняты в блоках всеми узлами.</p><h3 id=может-ли-это-обновление-негативно-повлиять-на-децентрализацию-биткоина>Может ли это обновление негативно повлиять на децентрализацию Биткоина?
<a class=anchor href=#%d0%bc%d0%be%d0%b6%d0%b5%d1%82-%d0%bb%d0%b8-%d1%8d%d1%82%d0%be-%d0%be%d0%b1%d0%bd%d0%be%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bd%d0%b5%d0%b3%d0%b0%d1%82%d0%b8%d0%b2%d0%bd%d0%be-%d0%bf%d0%be%d0%b2%d0%bb%d0%b8%d1%8f%d1%82%d1%8c-%d0%bd%d0%b0-%d0%b4%d0%b5%d1%86%d0%b5%d0%bd%d1%82%d1%80%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8e-%d0%b1%d0%b8%d1%82%d0%ba%d0%be%d0%b8%d0%bd%d0%b0>#</a></h3><p>Наоборот, это может даже (незначительно) <em>улучшить</em> децентрализацию. Если желательные (оплачивающие комиссию, валидные по консенсусу) транзакции не ретранслируются по умолчанию, это стимулирует их прямую отправку крупным майнинг-пулам, предоставляя тем преимущество. Придание таким транзакциям статуса &ldquo;стандартных&rdquo; делает их комиссии доступными любому майнеру, потенциально в некоторой мере снижая давление в сторону централизации.</p><p><strong>Краткий, нетехнический ответ:</strong> Это может улучшить децентрализацию, сделав больше транзакций, оплачивающих комиссию, широко доступными для майнинга, а не концентрируя их через прямые отправки крупным пулам.</p><h3 id=что-делает-utxo-не-подлежащим-прунингу-и-какие-проекты-создают-такие-utxo-раздувающие-их-набор>Что делает UTXO &ldquo;не подлежащим прунингу&rdquo;, и какие проекты создают такие UTXO, раздувающие их набор?
<a class=anchor href=#%d1%87%d1%82%d0%be-%d0%b4%d0%b5%d0%bb%d0%b0%d0%b5%d1%82-utxo-%d0%bd%d0%b5-%d0%bf%d0%be%d0%b4%d0%bb%d0%b5%d0%b6%d0%b0%d1%89%d0%b8%d0%bc-%d0%bf%d1%80%d1%83%d0%bd%d0%b8%d0%bd%d0%b3%d1%83-%d0%b8-%d0%ba%d0%b0%d0%ba%d0%b8%d0%b5-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d1%8b-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d1%8e%d1%82-%d1%82%d0%b0%d0%ba%d0%b8%d0%b5-utxo-%d1%80%d0%b0%d0%b7%d0%b4%d1%83%d0%b2%d0%b0%d1%8e%d1%89%d0%b8%d0%b5-%d0%b8%d1%85-%d0%bd%d0%b0%d0%b1%d0%be%d1%80>#</a></h3><p>Набор UTXO (Unspent Transaction Output) представляет все текущие &ldquo;кусочки&rdquo; биткоинов, подлежащие трате в будущем. Каждый полный узел <em>должен</em> хранить весь набор UTXO в памяти для проверки новых транзакций и предотвращения двойных трат. Если бы узлы отбрасывали UTXO, которые позже могут быть потрачены, сеть бы разделилась (форк). Таким образом, сам набор UTXO &ldquo;не подлежит прунингу&rdquo;. &ldquo;Обезьяны на блокчейне&rdquo; – как я люблю называть произвольные данные, записываемые в блокчейн Биткоина – иногда включали в себя встраивание сообщений в хеши публичных ключей. Проекты, такие как Counterparty и Stamps, использовали методы вроде &ldquo;голых&rdquo; <a href=https://21ideas.org/glossary/#%d0%bc%d1%83%d0%bb%d1%8c%d1%82%d0%b8%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d1%8c-multisignature>мультисиг</a>-выходов 1-из-3, сохраняя данные в двух публичных ключах, оставляя при этом UTXO технически подлежащим трате (spendable) и, следовательно, делая их неотъемлемой частью набора UTXO. Одной из мотиваций для смягчения лимитов <code>OP_RETURN</code> является снижение вреда: разрешение, например, полезной нагрузки <code>OP_RETURN</code> в 100 байт или полное снятие ограничения рассматривается как предпочтительное по сравнению с тем, чтобы проекты создавали записи в наборе UTXO.</p><p><strong>Краткий, нетехнический ответ:</strong> Набор UTXO (все биткоины, подлежащие трате) жизненно важен и не может быть &ldquo;обрезан&rdquo; узлами. Хранение данных в выходах, выглядящих как подлежащие трате (как это делают Stamps или планирует Citrea), раздувает этот критически важный набор; хранение данных в OP_RETURN этого избегает.</p><h3 id=какова-была-основная-причина-этого-pr-что-будет-если-ничего-не-делать>Какова была основная причина этого PR? Что будет, если ничего не делать?
<a class=anchor href=#%d0%ba%d0%b0%d0%ba%d0%be%d0%b2%d0%b0-%d0%b1%d1%8b%d0%bb%d0%b0-%d0%be%d1%81%d0%bd%d0%be%d0%b2%d0%bd%d0%b0%d1%8f-%d0%bf%d1%80%d0%b8%d1%87%d0%b8%d0%bd%d0%b0-%d1%8d%d1%82%d0%be%d0%b3%d0%be-pr-%d1%87%d1%82%d0%be-%d0%b1%d1%83%d0%b4%d0%b5%d1%82-%d0%b5%d1%81%d0%bb%d0%b8-%d0%bd%d0%b8%d1%87%d0%b5%d0%b3%d0%be-%d0%bd%d0%b5-%d0%b4%d0%b5%d0%bb%d0%b0%d1%82%d1%8c>#</a></h3><p><strong>Обоснование:</strong> Если валидные по консенсусу транзакции с более крупными/множественными <code>OP_RETURN</code> майнятся, но не ретранслируются по умолчанию, узлы с более строгими политиками могут загружать их, отклонять, а затем загружать <em>снова</em>, когда они появляются в блоке. Это приводит к излишнему расходу трафика и может замедлить распространение блоков, что непропорционально выгодно более крупным майнерам. Бездействие увековечивает эти неэффективности и продолжает стимулировать хранение данных потенциально более вредными способами, раздувающими набор UTXO.</p><p><strong>Краткий, нетехнический ответ:</strong> Изменение направлено на повышение эффективности сети (меньше потерь трафика, более быстрая ретрансляция блоков) и снижение стимулов для хранения данных способами, раздувающими набор UTXO.</p><h3 id=если-op_return-всё-ещё-не-может-остановить-весь-мусор-почему-так-важно-смягчить-его-лимиты>Если OP_RETURN всё ещё не может остановить весь мусор, почему так важно смягчить его лимиты?
<a class=anchor href=#%d0%b5%d1%81%d0%bb%d0%b8-op_return-%d0%b2%d1%81%d1%91-%d0%b5%d1%89%d1%91-%d0%bd%d0%b5-%d0%bc%d0%be%d0%b6%d0%b5%d1%82-%d0%be%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%b8%d1%82%d1%8c-%d0%b2%d0%b5%d1%81%d1%8c-%d0%bc%d1%83%d1%81%d0%be%d1%80-%d0%bf%d0%be%d1%87%d0%b5%d0%bc%d1%83-%d1%82%d0%b0%d0%ba-%d0%b2%d0%b0%d0%b6%d0%bd%d0%be-%d1%81%d0%bc%d1%8f%d0%b3%d1%87%d0%b8%d1%82%d1%8c-%d0%b5%d0%b3%d0%be-%d0%bb%d0%b8%d0%bc%d0%b8%d1%82%d1%8b>#</a></h3><p>Суть в снижении вреда и выборе наименее разрушительного метода для хранения данных в блокчейне путем поощрения их размещения в <code>OP_RETURN</code> вместо методов, раздувающих UTXO.</p><ol><li><strong>Inscriptions:</strong> Данные в свидетельской части (SegWit) входных данных. Дисконтированные (дешевле для больших объемов данных), но податливые (malleable) вплоть до момента подтверждения. Обрезанные (pruned) узлы при изначальной синхронизации с опцией <code>assumevalid</code> могут не загружать/не проверять их.</li><li><strong>OP_RETURN:</strong> Данные в выходных скриптах. Не дисконтированные (дороже для больших объемов данных свыше примерно 143 байт по сравнению с Inscriptions), не податливые, если входы используют <code>SIGHASH_ALL</code>. Не попадает в набор неизрасходованных выходов (UTXO set).</li><li><strong>Данные в платёжных выходах (например, Stamps):</strong> Данные в поддельных публичных ключах/хешах. Не дисконтированные. Раздувает набор UTXO (наихудший исход для узлов). Ослабление стандартности <code>OP_RETURN</code> поощряет перемещение данных в формат, который не раздувает набор UTXO и не является податливым (при правильном использовании), даже если он немного дороже для некоторых случаев использования, чем Inscriptions.</li></ol><p><strong>Краткий, нетехнический ответ:</strong> Хотя мы не можем полностью запретить запись произвольных данных в блокчейн, ослабление ограничений OP_RETURN необходимо, потому что это поощряет пользователей использовать менее вредный способ записи этих данных вместо методов, которые сильно нагружают и раздувают основную часть блокчейна. Это помогает уменьшить ущерб для каждого, кто поддерживает сеть.</p><h3 id=зачем-спамеру-использовать-op_return-если-дешевле-использовать-свидетельские-данные-segwit>Зачем спамеру использовать OP_RETURN, если дешевле использовать свидетельские данные (Segwit)?
<a class=anchor href=#%d0%b7%d0%b0%d1%87%d0%b5%d0%bc-%d1%81%d0%bf%d0%b0%d0%bc%d0%b5%d1%80%d1%83-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d1%8c-op_return-%d0%b5%d1%81%d0%bb%d0%b8-%d0%b4%d0%b5%d1%88%d0%b5%d0%b2%d0%bb%d0%b5-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d1%8c-%d1%81%d0%b2%d0%b8%d0%b4%d0%b5%d1%82%d0%b5%d0%bb%d1%8c%d1%81%d0%ba%d0%b8%d0%b5-%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d0%b5-segwit>#</a></h3><p>Данные OP_RETURN подписываются подписями во входных данных и, следовательно, не могут быть изменены (malleated), в то время как по крайней мере подписи в свидетельских данных являются податливыми (malleable). Некоторые пользователи также воспринимают OP_RETURN как &ldquo;праведный&rdquo; способ встраивания данных. Выходы <code>OP_RETURN</code> также немного дешевле для небольших объемов данных (до 143 байт), но дороже для больших объемов данных.</p><p><strong>Краткий, нетехнический ответ:</strong> Даже если хранить много данных через witness дешевле, кто-то может выбрать OP_RETURN, потому что данные там более надежно &ldquo;запечатаны&rdquo; и не могут быть изменены после подтверждения, а для необльших объёмов данных этот подход даже немного дешевле.</p><h3 id=если-смягчение-лимита-стандартности-op_return-направлено-на-то-чтобы-позволить-прунинг-спама-каково-мнение-сторонников-этого-изменения-касательно-долгосрочной-жизнеспособности-запуска-не-урезанного-биткоин-узла->Если смягчение лимита стандартности OP_RETURN направлено на то, чтобы позволить прунинг спама, каково мнение сторонников этого изменения касательно долгосрочной жизнеспособности запуска не урезанного Биткоин-узла ?
<a class=anchor href=#%d0%b5%d1%81%d0%bb%d0%b8-%d1%81%d0%bc%d1%8f%d0%b3%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bb%d0%b8%d0%bc%d0%b8%d1%82%d0%b0-%d1%81%d1%82%d0%b0%d0%bd%d0%b4%d0%b0%d1%80%d1%82%d0%bd%d0%be%d1%81%d1%82%d0%b8-op_return-%d0%bd%d0%b0%d0%bf%d1%80%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%be-%d0%bd%d0%b0-%d1%82%d0%be-%d1%87%d1%82%d0%be%d0%b1%d1%8b-%d0%bf%d0%be%d0%b7%d0%b2%d0%be%d0%bb%d0%b8%d1%82%d1%8c-%d0%bf%d1%80%d1%83%d0%bd%d0%b8%d0%bd%d0%b3-%d1%81%d0%bf%d0%b0%d0%bc%d0%b0-%d0%ba%d0%b0%d0%ba%d0%be%d0%b2%d0%be-%d0%bc%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d1%81%d1%82%d0%be%d1%80%d0%be%d0%bd%d0%bd%d0%b8%d0%ba%d0%be%d0%b2-%d1%8d%d1%82%d0%be%d0%b3%d0%be-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d1%8f-%d0%ba%d0%b0%d1%81%d0%b0%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d0%be-%d0%b4%d0%be%d0%bb%d0%b3%d0%be%d1%81%d1%80%d0%be%d1%87%d0%bd%d0%be%d0%b9-%d0%b6%d0%b8%d0%b7%d0%bd%d0%b5%d1%81%d0%bf%d0%be%d1%81%d0%be%d0%b1%d0%bd%d0%be%d1%81%d1%82%d0%b8-%d0%b7%d0%b0%d0%bf%d1%83%d1%81%d0%ba%d0%b0-%d0%bd%d0%b5-%d1%83%d1%80%d0%b5%d0%b7%d0%b0%d0%bd%d0%bd%d0%be%d0%b3%d0%be-%d0%b1%d0%b8%d1%82%d0%ba%d0%be%d0%b8%d0%bd-%d1%83%d0%b7%d0%bb%d0%b0->#</a></h3><p>Это изменение <em>повышает</em> жизнеспособность полных узлов, защищая набор UTXO. Блоки были почти полными примерно c начала 2023 года, что указывает на высокий спрос на пространство в блоках. Предлагаемое изменение не обязательно сделает блоки ещё более полными, позволив добавлять в них другие типы данных; вместо этого оно направлено на перенос части данных из менее желательных форм (таких как выходы, раздувающие UTXO, или даже свидетельские данные, на которые действует скидка) в <code>OP_RETURN</code>. Большее количество данных <code>OP_RETURN</code> по сравнению со свидетельскими данными может фактически упростить проверку блоков и потенциально уменьшить их общий размер в байтах из-за отсутствия скидки на свидетельские данные для <code>OP_RETURN</code>. Беспокойство вызывает не только размер блокчейна (который может корректироваться путем прунинга старых блоков), но и рост размера набора UTXO, который <code>OP_RETURN</code> помогает минимизировать.</p><p><strong>Краткий, нетехнический ответ:</strong> Это изменение рассматривается как способствующее жизнеспособности полных узлов путем увода данных от методов, раздувающих UTXO. Это не должно повысить стоимость запуска узлов, и наоборот, может даже упростить проверку блоков.</p><h3 id=это-изменение-политики-а-не-консенсуса-значит-оно-не-вызовет-хардфорк-верно>Это изменение политики, а не консенсуса. Значит, оно не вызовет хардфорк, верно?
<a class=anchor href=#%d1%8d%d1%82%d0%be-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d0%b8%d1%82%d0%b8%d0%ba%d0%b8-%d0%b0-%d0%bd%d0%b5-%d0%ba%d0%be%d0%bd%d1%81%d0%b5%d0%bd%d1%81%d1%83%d1%81%d0%b0-%d0%b7%d0%bd%d0%b0%d1%87%d0%b8%d1%82-%d0%be%d0%bd%d0%be-%d0%bd%d0%b5-%d0%b2%d1%8b%d0%b7%d0%be%d0%b2%d0%b5%d1%82-%d1%85%d0%b0%d1%80%d0%b4%d1%84%d0%be%d1%80%d0%ba-%d0%b2%d0%b5%d1%80%d0%bd%d0%be>#</a></h3><p>Верно. <strong>Это предложение НЕ является изменением консенсуса и НЕ вызовет хардфорк.</strong> Оно изменяет базовые правила Bitcoin Core для ретрансляции и майнинга транзакций. Оно не меняет никаких правил консенсуса. Узлы, работающие с разными политиками, могут видеть разное содержимое мемпула, но всё равно будут сходиться на одном и том же валидном блокчейне.</p><p><strong>Краткий, нетехнический ответ:</strong> Верно, это изменение политики, а не консенсуса и не может вызвать хардфорк или разделение цепи.</p><h3 id=почему-этому-изменению-не-присвоен-номер-bip>Почему этому изменению не присвоен номер BIP?
<a class=anchor href=#%d0%bf%d0%be%d1%87%d0%b5%d0%bc%d1%83-%d1%8d%d1%82%d0%be%d0%bc%d1%83-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d1%8e-%d0%bd%d0%b5-%d0%bf%d1%80%d0%b8%d1%81%d0%b2%d0%be%d0%b5%d0%bd-%d0%bd%d0%be%d0%bc%d0%b5%d1%80-bip>#</a></h3><p>Предложения по улучшению Биткоина (<a href=https://21ideas.org/glossary/#bip-bitcoin-improvement-proposal>BIP</a>) обычно предназначены для изменений, которые влияют на правила консенсуса, значительные изменения протокола P2P-сети или вводят новые широко принятые стандарты (например, пути деривации кошельков). Изменения в <em>политике</em> Bitcoin Core (например, критерии приёма &ldquo;стандартных&rdquo; транзакций в мемпул), как правило, управляются через процесс разработки Bitcoin Core (PR на GitHub, обсуждения в списках рассылки) без формального BIP.</p><p><strong>Краткий, нетехнический ответ:</strong> BIP обычно предназначены для изменений консенсуса или крупных сетевых стандартов; изменения политики узла обычно не получают BIP.</p><h2 id=выводы-диванного-максималиста>Выводы диванного максималиста
<a class=anchor href=#%d0%b2%d1%8b%d0%b2%d0%be%d0%b4%d1%8b-%d0%b4%d0%b8%d0%b2%d0%b0%d0%bd%d0%bd%d0%be%d0%b3%d0%be-%d0%bc%d0%b0%d0%ba%d1%81%d0%b8%d0%bc%d0%b0%d0%bb%d0%b8%d1%81%d1%82%d0%b0>#</a></h2><p>Дискуссия вокруг <code>OP_RETURN</code> подчёркивает фундаментальное противоречие: Биткоин как чисто финансовый расчётный уровень против Биткоина как устойчивого к цензуре, программируемого публичного реестра.</p><p>Я убеждён, что попытки фильтровать &ldquo;нефинансовые&rdquo; или &ldquo;нежелательные&rdquo; транзакции на уровне политики мемпула — это всё более сложное и в конечном счёте тщетное занятие. Вот основные аргументы в поддержку моего мнения, на которые я бы хотел обратить ваше внимание:</p><ol><li><strong>Определение спама субъективно:</strong> То, что один человек считает спамом, другой может рассматривать как легитимное использование безразрешительной системы.</li><li><strong>Экономические стимулы доминируют:</strong> Если существует спрос на хранение данных в Биткоине, и пользователи готовы платить комиссии за транзакции, майнеры в конечном итоге найдут способы включать эти (валидные по консенсусу) транзакции. &ldquo;Обезьяны на блокчейне&rdquo; принесли майнерам около $280 миллионов комиссионных за пару лет – мощный стимул. Пытаться играть в &ldquo;поймай крота&rdquo; с правилами политики против такой экономической силы – заведомо проигрышная затея.</li><li><strong>Обходные пути:</strong> Более строгие политики часто приводят к тому, что пользователи и майнеры создают прямые каналы для отправки транзакций &ldquo;мимо кассы&rdquo;, потенциально централизуя влияние вокруг более крупных майнинговых операций и снижая прозрачность.</li><li><strong>Сложность против выгоды:</strong> Чрезмерно сложные правила политики, пытающиеся дифференцировать &ldquo;хорошие&rdquo; и &ldquo;плохие&rdquo; транзакции, могут приводить к ошибкам, снижать эффективность и затруднять понимание системы.</li></ol><p>Предлагаемое смягчение стандартности <code>OP_RETURN</code> выглядит как прагматичное признание этих реалий. Оно направлено на:</p><ul><li><strong>Снижение негативных внешних эффектов:</strong> Поощрение хранения данных таким способом, который не раздувает набор UTXO (в отличие от данных в поддельных выходах, подлежащих дальнейшей трате).</li><li><strong>Повышение эффективности сети:</strong> Сокращение потерь трафика и задержек распространения блоков, вызванных отклонением узлами транзакций, которые всё равно будут добавлены в блок.</li><li><strong>Выравнивание условий игры:</strong> Сделать доход от комиссий за эти транзакции более широко доступным, а не концентрировать его в руках крупных пулов с приватными сетями ретрансляции.</li></ul><p>В конечном счёте, самым эффективным &ldquo;фильтром&rdquo; в блокчейне Биткоина являются <strong>финансовые стимулы</strong>. Если какая-либо деятельность достаточно ценна для её сторонников, они заплатят необходимые комиссии. Если эта деятельность легкомысленна или вызвана погоней за лёгкой наживой, в конечном счёте она будет вытеснена активностью пользователей, действительно нуждающихся в Биткоине в долгосрочной перспективе.</p><p>Попытки навязать определённое видение &ldquo;легитимного использования&rdquo; через политику мемпула для валидных по консенсусу транзакций могут создать больше проблем, чем решить. Блокчейн – это общественный ресурс; его использование будет диктоваться теми, кто готов платить за то, чтобы оставить в нём свой след. Текущее предложение корректировки политики <code>OP_RETURN</code> является шагом к более эффективному и <strong>реалистичному</strong> обращению с окружающей нас реальностью.</p><blockquote><p>Хотите высказать своё мнение? К сожалению, ностр-релей 21 идеи на данный момент проходит технические работы, поэтому я предлагаю вам оставить комментарий в нашем чате <a href=https://t.me/+Kg6_43gEnB1hYzU0>₿-Talk</a> в Телеграм. Мы активно используем сеть Лайтнинг и финансовые стимулы, чтобы фильтровать спамеров, ежедневно пытающихся заполнить наш чат &ldquo;сигналами&rdquo; и &ldquo;инвестиционными советами&rdquo;. Единоразовая стоимость входа – 1000 сатоши.</p></blockquote><hr><h2 id=рекомендуемые-дополнительные-материалы>Рекомендуемые дополнительные материалы
<a class=anchor href=#%d1%80%d0%b5%d0%ba%d0%be%d0%bc%d0%b5%d0%bd%d0%b4%d1%83%d0%b5%d0%bc%d1%8b%d0%b5-%d0%b4%d0%be%d0%bf%d0%be%d0%bb%d0%bd%d0%b8%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d1%8b%d0%b5-%d0%bc%d0%b0%d1%82%d0%b5%d1%80%d0%b8%d0%b0%d0%bb%d1%8b>#</a></h2><ul><li>PR Питера Тодда: <a href=https://github.com/bitcoin/bitcoin/pull/32359>https://github.com/bitcoin/bitcoin/pull/32359</a></li><li>Дискуссия в списке рассылки: <a href="https://groups.google.com/g/bitcoindev/c/d6ZO7gXGYbQ?pli=1">https://groups.google.com/g/bitcoindev/c/d6ZO7gXGYbQ?pli=1</a></li><li>Блогпост &ldquo;виновника&rdquo; всего этого бедлама – Antonie Poinshot&rsquo;а, который предложил убрать ограничение размера поля <code>OP_RETURN</code> – освещающий его видение происходящего: <a href=https://antoinep.com/posts/relay_policy_drama/>https://antoinep.com/posts/relay_policy_drama/</a></li><li>AMA-сессия Murch – разработчика Bitcoin Core – которая легла в основу секции Q&amp;A в этом посте: <a href=https://stacker.news/items/971277/r/Tony>https://stacker.news/items/971277/r/Tony</a></li></ul></article><hr><i>Connect to our relay to leave a comment. <a href=https://21ideas.org/en/comments/>Details</a>.<br>Подключитесь к нашему релею, чтобы оставить комментарий. <a href=https://21ideas.org/comments/>Подробнее</a>.</i>
<zap-threads anchor=https://21ideas.org/posts/op_return-debate/ author=npub1lm3f47nzyf0rjp6fsl4qlnkmzed4uj4h2gnf2vhe3l3mrj85vqks6z3c7l relays=wss://21ideas.nostr1.com disable=replyAnonymously legacy-url=true></zap-threads><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#1-что-такое-op_return>1. Что такое OP_RETURN?</a></li><li><a href=#2-изменение-политики-vs-изменение-консенсуса>2. Изменение политики vs. Изменение консенсуса</a></li><li><a href=#3-текущие-правила-op_return-в-bitcoin-core-и-предлагаемые-изменения>3. Текущие правила OP_RETURN в Bitcoin Core и предлагаемые изменения</a></li></ul></li><li><a href=#суть-дебатов-основные-опасения-и-вопросы>Суть дебатов: Основные опасения и вопросы</a><ul><li><a href=#пользователям-должны-быть-предоставлены-чёткие-опции-настройки-их-мемпула-зачем-убирать-возможность-контроля-например-опции><strong>Пользователям должны быть предоставлены чёткие опции настройки их мемпула. Зачем убирать возможность контроля (например, опции <code>-datacarrier</code> и <code>-datacarriersize</code>)?</strong></a></li><li><a href=#не-будут-ли-спамеры-злоупотреблять-большими-op_return-для-раздувания-блокчейна-и-замедления-изначальной-загрузки-блоков-initial-block-downloadibd>Не будут ли спамеры злоупотреблять большими OP_RETURN для раздувания блокчейна и замедления изначальной загрузки блоков (Initial Block Download/IBD)?</a></li><li><a href=#это-не-первый-раз-когда-предлагается-смягчить-лимиты-op_return-похожий-pr-обсуждался-пару-лет-назад-что-изменилось-сейчас>Это не первый раз, когда предлагается смягчить лимиты OP_RETURN. Похожий PR обсуждался пару лет назад. Что изменилось сейчас?</a></li><li><a href=#не-должны-ли-мы-бороться-со-спамом-ужесточая-политики-а-не-ослабляя-их>Не должны ли мы бороться со спамом, ужесточая политики, а не ослабляя их?</a></li><li><a href=#как-сейчас-обходят-политику-стандартности-для-лимитов-размера-op_return>Как сейчас обходят политику стандартности для лимитов размера OP_RETURN?</a></li><li><a href=#может-ли-это-обновление-негативно-повлиять-на-децентрализацию-биткоина>Может ли это обновление негативно повлиять на децентрализацию Биткоина?</a></li><li><a href=#что-делает-utxo-не-подлежащим-прунингу-и-какие-проекты-создают-такие-utxo-раздувающие-их-набор>Что делает UTXO &ldquo;не подлежащим прунингу&rdquo;, и какие проекты создают такие UTXO, раздувающие их набор?</a></li><li><a href=#какова-была-основная-причина-этого-pr-что-будет-если-ничего-не-делать>Какова была основная причина этого PR? Что будет, если ничего не делать?</a></li><li><a href=#если-op_return-всё-ещё-не-может-остановить-весь-мусор-почему-так-важно-смягчить-его-лимиты>Если OP_RETURN всё ещё не может остановить весь мусор, почему так важно смягчить его лимиты?</a></li><li><a href=#зачем-спамеру-использовать-op_return-если-дешевле-использовать-свидетельские-данные-segwit>Зачем спамеру использовать OP_RETURN, если дешевле использовать свидетельские данные (Segwit)?</a></li><li><a href=#если-смягчение-лимита-стандартности-op_return-направлено-на-то-чтобы-позволить-прунинг-спама-каково-мнение-сторонников-этого-изменения-касательно-долгосрочной-жизнеспособности-запуска-не-урезанного-биткоин-узла->Если смягчение лимита стандартности OP_RETURN направлено на то, чтобы позволить прунинг спама, каково мнение сторонников этого изменения касательно долгосрочной жизнеспособности запуска не урезанного Биткоин-узла ?</a></li><li><a href=#это-изменение-политики-а-не-консенсуса-значит-оно-не-вызовет-хардфорк-верно>Это изменение политики, а не консенсуса. Значит, оно не вызовет хардфорк, верно?</a></li><li><a href=#почему-этому-изменению-не-присвоен-номер-bip>Почему этому изменению не присвоен номер BIP?</a></li></ul></li><li><a href=#выводы-диванного-максималиста>Выводы диванного максималиста</a></li><li><a href=#рекомендуемые-дополнительные-материалы>Рекомендуемые дополнительные материалы</a></li></ul></li></ul></nav></div></aside></main><script>"use strict";const METRICS={FEE:"fee",BLOCK:"block",PRICE:"price",SATS:"sats",BTC:"btc"};let currentMetric=METRICS.FEE,lastKnownValues={fee:{label:"Комиссия",value:"0 sat/vB"},block:{label:"Высота блока",value:"0"},price:{label:"Цена",value:"$0"},sats:{label:"Московское время",value:"00:00"},btc:{label:"",value:"1 BTC = 1 BTC"}};function formatSatsAsTime(e){const t=Math.round(e).toString().padStart(4,"0"),n=t.slice(0,-2),s=t.slice(-2);return`${n}:${s}`}function formatNumber(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function updateDisplay(){const n=document.getElementById("metrics-label"),e=document.getElementById("metrics-value");if(!n||!e)return;const t=lastKnownValues[currentMetric];n.textContent=t.label,e.textContent=t.value,e.style.paddingTop=t.label?"0":"0.7rem"}async function updateMetrics(){try{const[t,n,e]=await Promise.all([fetch("https://mempool.space/api/v1/fees/recommended").then(e=>e.json()),fetch("https://mempool.space/api/blocks/tip/height").then(e=>e.json()),fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd").then(e=>e.json())]);lastKnownValues.fee.value=`${t.fastestFee} sat/vB`,lastKnownValues.block.value=formatNumber(n),lastKnownValues.price.value=`$${formatNumber(e.bitcoin.usd)}`;const s=Math.round(1e8/e.bitcoin.usd);lastKnownValues.sats.value=formatSatsAsTime(s),updateDisplay()}catch(e){console.error("Error fetching metrics:",e)}}function cycleMetric(){const e=Object.values(METRICS),t=e.indexOf(currentMetric);currentMetric=e[(t+1)%e.length],updateDisplay()}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("metrics-container");e&&(e.addEventListener("click",cycleMetric),updateMetrics(),setInterval(updateMetrics,6e4))})</script></body></html>